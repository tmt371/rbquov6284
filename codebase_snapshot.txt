--- FILE START: .gitignore ---
node_modules/
--- FILE END ---

--- FILE START: .gitattributes ---
# Auto detect text files and perform LF normalization
* text=auto

--- FILE END ---

--- FILE START: package.json ---
{
  "name": "quick-quote-framework",
  "version": "1.0.0",
  "description": "A framework for building multi-product quoting applications.",
  "main": "04-core-code/main.js",
  "type": "module",
  "scripts": {
    "test": "jest",
    "lint": "eslint .",
    "format": "prettier --write ."
  },
  "dependencies": {
    "uuid": "^9.0.1"
  },
  "devDependencies": {
    "@babel/core": "^7.24.7",
    "@babel/preset-env": "^7.24.7",
    "babel-jest": "^29.7.0",
    "eslint": "^8.57.0",
    "eslint-config-prettier": "^9.1.0",
    "jest": "^29.7.0",
    "jest-environment-jsdom": "^29.7.0",
    "prettier": "^3.3.2"
  }
}
--- FILE END ---

--- FILE START: package-lock.json ---
{
  "name": "quick-quote-framework",
  "version": "1.0.0",
  "lockfileVersion": 3,
  "requires": true,
  "packages": {
    "": {
      "name": "quick-quote-framework",
      "version": "1.0.0",
      "dependencies": {
        "uuid": "^9.0.1"
      },
      "devDependencies": {
        "@babel/core": "^7.24.7",
        "@babel/preset-env": "^7.24.7",
        "babel-jest": "^29.7.0",
        "eslint": "^8.57.0",
        "eslint-config-prettier": "^9.1.0",
        "jest": "^29.7.0",
        "jest-environment-jsdom": "^29.7.0",
        "prettier": "^3.3.2"
      }
    },
    "node_modules/@babel/code-frame": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/code-frame/-/code-frame-7.27.1.tgz",
      "integrity": "sha512-cjQ7ZlQ0Mv3b47hABuTevyTuYN4i+loJKGeV9flcCgIK37cCXRh+L1bd3iBHlynerhQ7BhCkn2BPbQUL+rGqFg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-validator-identifier": "^7.27.1",
        "js-tokens": "^4.0.0",
        "picocolors": "^1.1.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/compat-data": {
      "version": "7.28.4",
      "resolved": "https://registry.npmjs.org/@babel/compat-data/-/compat-data-7.28.4.tgz",
      "integrity": "sha512-YsmSKC29MJwf0gF8Rjjrg5LQCmyh+j/nD8/eP7f+BeoQTKYqs9RoWbjGOdy0+1Ekr68RJZMUOPVQaQisnIo4Rw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/core": {
      "version": "7.28.4",
      "resolved": "https://registry.npmjs.org/@babel/core/-/core-7.28.4.tgz",
      "integrity": "sha512-2BCOP7TN8M+gVDj7/ht3hsaO/B/n5oDbiAyyvnRlNOs+u1o+JWNYTQrmpuNp1/Wq2gcFrI01JAW+paEKDMx/CA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/code-frame": "^7.27.1",
        "@babel/generator": "^7.28.3",
        "@babel/helper-compilation-targets": "^7.27.2",
        "@babel/helper-module-transforms": "^7.28.3",
        "@babel/helpers": "^7.28.4",
        "@babel/parser": "^7.28.4",
        "@babel/template": "^7.27.2",
        "@babel/traverse": "^7.28.4",
        "@babel/types": "^7.28.4",
        "@jridgewell/remapping": "^2.3.5",
        "convert-source-map": "^2.0.0",
        "debug": "^4.1.0",
        "gensync": "^1.0.0-beta.2",
        "json5": "^2.2.3",
        "semver": "^6.3.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/babel"
      }
    },
    "node_modules/@babel/generator": {
      "version": "7.28.3",
      "resolved": "https://registry.npmjs.org/@babel/generator/-/generator-7.28.3.tgz",
      "integrity": "sha512-3lSpxGgvnmZznmBkCRnVREPUFJv2wrv9iAoFDvADJc0ypmdOxdUtcLeBgBJ6zE0PMeTKnxeQzyk0xTBq4Ep7zw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/parser": "^7.28.3",
        "@babel/types": "^7.28.2",
        "@jridgewell/gen-mapping": "^0.3.12",
        "@jridgewell/trace-mapping": "^0.3.28",
        "jsesc": "^3.0.2"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-annotate-as-pure": {
      "version": "7.27.3",
      "resolved": "https://registry.npmjs.org/@babel/helper-annotate-as-pure/-/helper-annotate-as-pure-7.27.3.tgz",
      "integrity": "sha512-fXSwMQqitTGeHLBC08Eq5yXz2m37E4pJX1qAU1+2cNedz/ifv/bVXft90VeSav5nFO61EcNgwr0aJxbyPaWBPg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/types": "^7.27.3"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-compilation-targets": {
      "version": "7.27.2",
      "resolved": "https://registry.npmjs.org/@babel/helper-compilation-targets/-/helper-compilation-targets-7.27.2.tgz",
      "integrity": "sha512-2+1thGUUWWjLTYTHZWK1n8Yga0ijBz1XAhUXcKy81rd5g6yh7hGqMp45v7cadSbEHc9G3OTv45SyneRN3ps4DQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/compat-data": "^7.27.2",
        "@babel/helper-validator-option": "^7.27.1",
        "browserslist": "^4.24.0",
        "lru-cache": "^5.1.1",
        "semver": "^6.3.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-create-class-features-plugin": {
      "version": "7.28.3",
      "resolved": "https://registry.npmjs.org/@babel/helper-create-class-features-plugin/-/helper-create-class-features-plugin-7.28.3.tgz",
      "integrity": "sha512-V9f6ZFIYSLNEbuGA/92uOvYsGCJNsuA8ESZ4ldc09bWk/j8H8TKiPw8Mk1eG6olpnO0ALHJmYfZvF4MEE4gajg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-annotate-as-pure": "^7.27.3",
        "@babel/helper-member-expression-to-functions": "^7.27.1",
        "@babel/helper-optimise-call-expression": "^7.27.1",
        "@babel/helper-replace-supers": "^7.27.1",
        "@babel/helper-skip-transparent-expression-wrappers": "^7.27.1",
        "@babel/traverse": "^7.28.3",
        "semver": "^6.3.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0"
      }
    },
    "node_modules/@babel/helper-create-regexp-features-plugin": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-create-regexp-features-plugin/-/helper-create-regexp-features-plugin-7.27.1.tgz",
      "integrity": "sha512-uVDC72XVf8UbrH5qQTc18Agb8emwjTiZrQE11Nv3CuBEZmVvTwwE9CBUEvHku06gQCAyYf8Nv6ja1IN+6LMbxQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-annotate-as-pure": "^7.27.1",
        "regexpu-core": "^6.2.0",
        "semver": "^6.3.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0"
      }
    },
    "node_modules/@babel/helper-define-polyfill-provider": {
      "version": "0.6.5",
      "resolved": "https://registry.npmjs.org/@babel/helper-define-polyfill-provider/-/helper-define-polyfill-provider-0.6.5.tgz",
      "integrity": "sha512-uJnGFcPsWQK8fvjgGP5LZUZZsYGIoPeRjSF5PGwrelYgq7Q15/Ft9NGFp1zglwgIv//W0uG4BevRuSJRyylZPg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-compilation-targets": "^7.27.2",
        "@babel/helper-plugin-utils": "^7.27.1",
        "debug": "^4.4.1",
        "lodash.debounce": "^4.0.8",
        "resolve": "^1.22.10"
      },
      "peerDependencies": {
        "@babel/core": "^7.4.0 || ^8.0.0-0 <8.0.0"
      }
    },
    "node_modules/@babel/helper-globals": {
      "version": "7.28.0",
      "resolved": "https://registry.npmjs.org/@babel/helper-globals/-/helper-globals-7.28.0.tgz",
      "integrity": "sha512-+W6cISkXFa1jXsDEdYA8HeevQT/FULhxzR99pxphltZcVaugps53THCeiWA8SguxxpSp3gKPiuYfSWopkLQ4hw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-member-expression-to-functions": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-member-expression-to-functions/-/helper-member-expression-to-functions-7.27.1.tgz",
      "integrity": "sha512-E5chM8eWjTp/aNoVpcbfM7mLxu9XGLWYise2eBKGQomAk/Mb4XoxyqXTZbuTohbsl8EKqdlMhnDI2CCLfcs9wA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/traverse": "^7.27.1",
        "@babel/types": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-module-imports": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-module-imports/-/helper-module-imports-7.27.1.tgz",
      "integrity": "sha512-0gSFWUPNXNopqtIPQvlD5WgXYI5GY2kP2cCvoT8kczjbfcfuIljTbcWrulD1CIPIX2gt1wghbDy08yE1p+/r3w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/traverse": "^7.27.1",
        "@babel/types": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-module-transforms": {
      "version": "7.28.3",
      "resolved": "https://registry.npmjs.org/@babel/helper-module-transforms/-/helper-module-transforms-7.28.3.tgz",
      "integrity": "sha512-gytXUbs8k2sXS9PnQptz5o0QnpLL51SwASIORY6XaBKF88nsOT0Zw9szLqlSGQDP/4TljBAD5y98p2U1fqkdsw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-module-imports": "^7.27.1",
        "@babel/helper-validator-identifier": "^7.27.1",
        "@babel/traverse": "^7.28.3"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0"
      }
    },
    "node_modules/@babel/helper-optimise-call-expression": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-optimise-call-expression/-/helper-optimise-call-expression-7.27.1.tgz",
      "integrity": "sha512-URMGH08NzYFhubNSGJrpUEphGKQwMQYBySzat5cAByY1/YgIRkULnIy3tAMeszlL/so2HbeilYloUmSpd7GdVw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/types": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-plugin-utils": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-plugin-utils/-/helper-plugin-utils-7.27.1.tgz",
      "integrity": "sha512-1gn1Up5YXka3YYAHGKpbideQ5Yjf1tDa9qYcgysz+cNCXukyLl6DjPXhD3VRwSb8c0J9tA4b2+rHEZtc6R0tlw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-remap-async-to-generator": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-remap-async-to-generator/-/helper-remap-async-to-generator-7.27.1.tgz",
      "integrity": "sha512-7fiA521aVw8lSPeI4ZOD3vRFkoqkJcS+z4hFo82bFSH/2tNd6eJ5qCVMS5OzDmZh/kaHQeBaeyxK6wljcPtveA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-annotate-as-pure": "^7.27.1",
        "@babel/helper-wrap-function": "^7.27.1",
        "@babel/traverse": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0"
      }
    },
    "node_modules/@babel/helper-replace-supers": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-replace-supers/-/helper-replace-supers-7.27.1.tgz",
      "integrity": "sha512-7EHz6qDZc8RYS5ElPoShMheWvEgERonFCs7IAonWLLUTXW59DP14bCZt89/GKyreYn8g3S83m21FelHKbeDCKA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-member-expression-to-functions": "^7.27.1",
        "@babel/helper-optimise-call-expression": "^7.27.1",
        "@babel/traverse": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0"
      }
    },
    "node_modules/@babel/helper-skip-transparent-expression-wrappers": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-skip-transparent-expression-wrappers/-/helper-skip-transparent-expression-wrappers-7.27.1.tgz",
      "integrity": "sha512-Tub4ZKEXqbPjXgWLl2+3JpQAYBJ8+ikpQ2Ocj/q/r0LwE3UhENh7EUabyHjz2kCEsrRY83ew2DQdHluuiDQFzg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/traverse": "^7.27.1",
        "@babel/types": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-string-parser": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-string-parser/-/helper-string-parser-7.27.1.tgz",
      "integrity": "sha512-qMlSxKbpRlAridDExk92nSobyDdpPijUq2DW6oDnUqd0iOGxmQjyqhMIihI9+zv4LPyZdRje2cavWPbCbWm3eA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-validator-identifier": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-validator-identifier/-/helper-validator-identifier-7.27.1.tgz",
      "integrity": "sha512-D2hP9eA+Sqx1kBZgzxZh0y1trbuU+JoDkiEwqhQ36nodYqJwyEIhPSdMNd7lOm/4io72luTPWH20Yda0xOuUow==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-validator-option": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-validator-option/-/helper-validator-option-7.27.1.tgz",
      "integrity": "sha512-YvjJow9FxbhFFKDSuFnVCe2WxXk1zWc22fFePVNEaWJEu8IrZVlda6N0uHwzZrUM1il7NC9Mlp4MaJYbYd9JSg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-wrap-function": {
      "version": "7.28.3",
      "resolved": "https://registry.npmjs.org/@babel/helper-wrap-function/-/helper-wrap-function-7.28.3.tgz",
      "integrity": "sha512-zdf983tNfLZFletc0RRXYrHrucBEg95NIFMkn6K9dbeMYnsgHaSBGcQqdsCSStG2PYwRre0Qc2NNSCXbG+xc6g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/template": "^7.27.2",
        "@babel/traverse": "^7.28.3",
        "@babel/types": "^7.28.2"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helpers": {
      "version": "7.28.4",
      "resolved": "https://registry.npmjs.org/@babel/helpers/-/helpers-7.28.4.tgz",
      "integrity": "sha512-HFN59MmQXGHVyYadKLVumYsA9dBFun/ldYxipEjzA4196jpLZd8UjEEBLkbEkvfYreDqJhZxYAWFPtrfhNpj4w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/template": "^7.27.2",
        "@babel/types": "^7.28.4"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/parser": {
      "version": "7.28.4",
      "resolved": "https://registry.npmjs.org/@babel/parser/-/parser-7.28.4.tgz",
      "integrity": "sha512-yZbBqeM6TkpP9du/I2pUZnJsRMGGvOuIrhjzC1AwHwW+6he4mni6Bp/m8ijn0iOuZuPI2BfkCoSRunpyjnrQKg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/types": "^7.28.4"
      },
      "bin": {
        "parser": "bin/babel-parser.js"
      },
      "engines": {
        "node": ">=6.0.0"
      }
    },
    "node_modules/@babel/plugin-bugfix-firefox-class-in-computed-class-key": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-bugfix-firefox-class-in-computed-class-key/-/plugin-bugfix-firefox-class-in-computed-class-key-7.27.1.tgz",
      "integrity": "sha512-QPG3C9cCVRQLxAVwmefEmwdTanECuUBMQZ/ym5kiw3XKCGA7qkuQLcjWWHcrD/GKbn/WmJwaezfuuAOcyKlRPA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1",
        "@babel/traverse": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0"
      }
    },
    "node_modules/@babel/plugin-bugfix-safari-class-field-initializer-scope": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-bugfix-safari-class-field-initializer-scope/-/plugin-bugfix-safari-class-field-initializer-scope-7.27.1.tgz",
      "integrity": "sha512-qNeq3bCKnGgLkEXUuFry6dPlGfCdQNZbn7yUAPCInwAJHMU7THJfrBSozkcWq5sNM6RcF3S8XyQL2A52KNR9IA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0"
      }
    },
    "node_modules/@babel/plugin-bugfix-safari-id-destructuring-collision-in-function-expression": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-bugfix-safari-id-destructuring-collision-in-function-expression/-/plugin-bugfix-safari-id-destructuring-collision-in-function-expression-7.27.1.tgz",
      "integrity": "sha512-g4L7OYun04N1WyqMNjldFwlfPCLVkgB54A/YCXICZYBsvJJE3kByKv9c9+R/nAfmIfjl2rKYLNyMHboYbZaWaA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0"
      }
    },
    "node_modules/@babel/plugin-bugfix-v8-spread-parameters-in-optional-chaining": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-bugfix-v8-spread-parameters-in-optional-chaining/-/plugin-bugfix-v8-spread-parameters-in-optional-chaining-7.27.1.tgz",
      "integrity": "sha512-oO02gcONcD5O1iTLi/6frMJBIwWEHceWGSGqrpCmEL8nogiS6J9PBlE48CaK20/Jx1LuRml9aDftLgdjXT8+Cw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1",
        "@babel/helper-skip-transparent-expression-wrappers": "^7.27.1",
        "@babel/plugin-transform-optional-chaining": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.13.0"
      }
    },
    "node_modules/@babel/plugin-bugfix-v8-static-class-fields-redefine-readonly": {
      "version": "7.28.3",
      "resolved": "https://registry.npmjs.org/@babel/plugin-bugfix-v8-static-class-fields-redefine-readonly/-/plugin-bugfix-v8-static-class-fields-redefine-readonly-7.28.3.tgz",
      "integrity": "sha512-b6YTX108evsvE4YgWyQ921ZAFFQm3Bn+CA3+ZXlNVnPhx+UfsVURoPjfGAPCjBgrqo30yX/C2nZGX96DxvR9Iw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1",
        "@babel/traverse": "^7.28.3"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0"
      }
    },
    "node_modules/@babel/plugin-proposal-private-property-in-object": {
      "version": "7.21.0-placeholder-for-preset-env.2",
      "resolved": "https://registry.npmjs.org/@babel/plugin-proposal-private-property-in-object/-/plugin-proposal-private-property-in-object-7.21.0-placeholder-for-preset-env.2.tgz",
      "integrity": "sha512-SOSkfJDddaM7mak6cPEpswyTRnuRltl429hMraQEglW+OkovnCzsiszTmsrlY//qLFjCpQDFRvjdm2wA5pPm9w==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-syntax-async-generators": {
      "version": "7.8.4",
      "resolved": "https://registry.npmjs.org/@babel/plugin-syntax-async-generators/-/plugin-syntax-async-generators-7.8.4.tgz",
      "integrity": "sha512-tycmZxkGfZaxhMRbXlPXuVFpdWlXpir2W4AMhSJgRKzk/eDlIXOhb2LHWoLpDF7TEHylV5zNhykX6KAgHJmTNw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.8.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-syntax-bigint": {
      "version": "7.8.3",
      "resolved": "https://registry.npmjs.org/@babel/plugin-syntax-bigint/-/plugin-syntax-bigint-7.8.3.tgz",
      "integrity": "sha512-wnTnFlG+YxQm3vDxpGE57Pj0srRU4sHE/mDkt1qv2YJJSeUAec2ma4WLUnUPeKjyrfntVwe/N6dCXpU+zL3Npg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.8.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-syntax-class-properties": {
      "version": "7.12.13",
      "resolved": "https://registry.npmjs.org/@babel/plugin-syntax-class-properties/-/plugin-syntax-class-properties-7.12.13.tgz",
      "integrity": "sha512-fm4idjKla0YahUNgFNLCB0qySdsoPiZP3iQE3rky0mBUtMZ23yDJ9SJdg6dXTSDnulOVqiF3Hgr9nbXvXTQZYA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.12.13"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-syntax-class-static-block": {
      "version": "7.14.5",
      "resolved": "https://registry.npmjs.org/@babel/plugin-syntax-class-static-block/-/plugin-syntax-class-static-block-7.14.5.tgz",
      "integrity": "sha512-b+YyPmr6ldyNnM6sqYeMWE+bgJcJpO6yS4QD7ymxgH34GBPNDM/THBh8iunyvKIZztiwLH4CJZ0RxTk9emgpjw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.14.5"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-syntax-import-assertions": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-syntax-import-assertions/-/plugin-syntax-import-assertions-7.27.1.tgz",
      "integrity": "sha512-UT/Jrhw57xg4ILHLFnzFpPDlMbcdEicaAtjPQpbj9wa8T4r5KVWCimHcL/460g8Ht0DMxDyjsLgiWSkVjnwPFg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-syntax-import-attributes": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-syntax-import-attributes/-/plugin-syntax-import-attributes-7.27.1.tgz",
      "integrity": "sha512-oFT0FrKHgF53f4vOsZGi2Hh3I35PfSmVs4IBFLFj4dnafP+hIWDLg3VyKmUHfLoLHlyxY4C7DGtmHuJgn+IGww==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-syntax-import-meta": {
      "version": "7.10.4",
      "resolved": "https://registry.npmjs.org/@babel/plugin-syntax-import-meta/-/plugin-syntax-import-meta-7.10.4.tgz",
      "integrity": "sha512-Yqfm+XDx0+Prh3VSeEQCPU81yC+JWZ2pDPFSS4ZdpfZhp4MkFMaDC1UqseovEKwSUpnIL7+vK+Clp7bfh0iD7g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.10.4"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-syntax-json-strings": {
      "version": "7.8.3",
      "resolved": "https://registry.npmjs.org/@babel/plugin-syntax-json-strings/-/plugin-syntax-json-strings-7.8.3.tgz",
      "integrity": "sha512-lY6kdGpWHvjoe2vk4WrAapEuBR69EMxZl+RoGRhrFGNYVK8mOPAW8VfbT/ZgrFbXlDNiiaxQnAtgVCZ6jv30EA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.8.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-syntax-jsx": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-syntax-jsx/-/plugin-syntax-jsx-7.27.1.tgz",
      "integrity": "sha512-y8YTNIeKoyhGd9O0Jiyzyyqk8gdjnumGTQPsz0xOZOQ2RmkVJeZ1vmmfIvFEKqucBG6axJGBZDE/7iI5suUI/w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-syntax-logical-assignment-operators": {
      "version": "7.10.4",
      "resolved": "https://registry.npmjs.org/@babel/plugin-syntax-logical-assignment-operators/-/plugin-syntax-logical-assignment-operators-7.10.4.tgz",
      "integrity": "sha512-d8waShlpFDinQ5MtvGU9xDAOzKH47+FFoney2baFIoMr952hKOLp1HR7VszoZvOsV/4+RRszNY7D17ba0te0ig==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.10.4"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-syntax-nullish-coalescing-operator": {
      "version": "7.8.3",
      "resolved": "https://registry.npmjs.org/@babel/plugin-syntax-nullish-coalescing-operator/-/plugin-syntax-nullish-coalescing-operator-7.8.3.tgz",
      "integrity": "sha512-aSff4zPII1u2QD7y+F8oDsz19ew4IGEJg9SVW+bqwpwtfFleiQDMdzA/R+UlWDzfnHFCxxleFT0PMIrR36XLNQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.8.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-syntax-numeric-separator": {
      "version": "7.10.4",
      "resolved": "https://registry.npmjs.org/@babel/plugin-syntax-numeric-separator/-/plugin-syntax-numeric-separator-7.10.4.tgz",
      "integrity": "sha512-9H6YdfkcK/uOnY/K7/aA2xpzaAgkQn37yzWUMRK7OaPOqOpGS1+n0H5hxT9AUw9EsSjPW8SVyMJwYRtWs3X3ug==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.10.4"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-syntax-object-rest-spread": {
      "version": "7.8.3",
      "resolved": "https://registry.npmjs.org/@babel/plugin-syntax-object-rest-spread/-/plugin-syntax-object-rest-spread-7.8.3.tgz",
      "integrity": "sha512-XoqMijGZb9y3y2XskN+P1wUGiVwWZ5JmoDRwx5+3GmEplNyVM2s2Dg8ILFQm8rWM48orGy5YpI5Bl8U1y7ydlA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.8.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-syntax-optional-catch-binding": {
      "version": "7.8.3",
      "resolved": "https://registry.npmjs.org/@babel/plugin-syntax-optional-catch-binding/-/plugin-syntax-optional-catch-binding-7.8.3.tgz",
      "integrity": "sha512-6VPD0Pc1lpTqw0aKoeRTMiB+kWhAoT24PA+ksWSBrFtl5SIRVpZlwN3NNPQjehA2E/91FV3RjLWoVTglWcSV3Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.8.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-syntax-optional-chaining": {
      "version": "7.8.3",
      "resolved": "https://registry.npmjs.org/@babel/plugin-syntax-optional-chaining/-/plugin-syntax-optional-chaining-7.8.3.tgz",
      "integrity": "sha512-KoK9ErH1MBlCPxV0VANkXW2/dw4vlbGDrFgz8bmUsBGYkFRcbRwMh6cIJubdPrkxRwuGdtCk0v/wPTKbQgBjkg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.8.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-syntax-private-property-in-object": {
      "version": "7.14.5",
      "resolved": "https://registry.npmjs.org/@babel/plugin-syntax-private-property-in-object/-/plugin-syntax-private-property-in-object-7.14.5.tgz",
      "integrity": "sha512-0wVnp9dxJ72ZUJDV27ZfbSj6iHLoytYZmh3rFcxNnvsJF3ktkzLDZPy/mA17HGsaQT3/DQsWYX1f1QGWkCoVUg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.14.5"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-syntax-top-level-await": {
      "version": "7.14.5",
      "resolved": "https://registry.npmjs.org/@babel/plugin-syntax-top-level-await/-/plugin-syntax-top-level-await-7.14.5.tgz",
      "integrity": "sha512-hx++upLv5U1rgYfwe1xBQUhRmU41NEvpUvrp8jkrSCdvGSnM5/qdRMtylJ6PG5OFkBaHkbTAKTnd3/YyESRHFw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.14.5"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-syntax-typescript": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-syntax-typescript/-/plugin-syntax-typescript-7.27.1.tgz",
      "integrity": "sha512-xfYCBMxveHrRMnAWl1ZlPXOZjzkN82THFvLhQhFXFt81Z5HnN+EtUkZhv/zcKpmT3fzmWZB0ywiBrbC3vogbwQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-syntax-unicode-sets-regex": {
      "version": "7.18.6",
      "resolved": "https://registry.npmjs.org/@babel/plugin-syntax-unicode-sets-regex/-/plugin-syntax-unicode-sets-regex-7.18.6.tgz",
      "integrity": "sha512-727YkEAPwSIQTv5im8QHz3upqp92JTWhidIC81Tdx4VJYIte/VndKf1qKrfnnhPLiPghStWfvC/iFaMCQu7Nqg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-create-regexp-features-plugin": "^7.18.6",
        "@babel/helper-plugin-utils": "^7.18.6"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0"
      }
    },
    "node_modules/@babel/plugin-transform-arrow-functions": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-arrow-functions/-/plugin-transform-arrow-functions-7.27.1.tgz",
      "integrity": "sha512-8Z4TGic6xW70FKThA5HYEKKyBpOOsucTOD1DjU3fZxDg+K3zBJcXMFnt/4yQiZnf5+MiOMSXQ9PaEK/Ilh1DeA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-async-generator-functions": {
      "version": "7.28.0",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-async-generator-functions/-/plugin-transform-async-generator-functions-7.28.0.tgz",
      "integrity": "sha512-BEOdvX4+M765icNPZeidyADIvQ1m1gmunXufXxvRESy/jNNyfovIqUyE7MVgGBjWktCoJlzvFA1To2O4ymIO3Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1",
        "@babel/helper-remap-async-to-generator": "^7.27.1",
        "@babel/traverse": "^7.28.0"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-async-to-generator": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-async-to-generator/-/plugin-transform-async-to-generator-7.27.1.tgz",
      "integrity": "sha512-NREkZsZVJS4xmTr8qzE5y8AfIPqsdQfRuUiLRTEzb7Qii8iFWCyDKaUV2c0rCuh4ljDZ98ALHP/PetiBV2nddA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-module-imports": "^7.27.1",
        "@babel/helper-plugin-utils": "^7.27.1",
        "@babel/helper-remap-async-to-generator": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-block-scoped-functions": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-block-scoped-functions/-/plugin-transform-block-scoped-functions-7.27.1.tgz",
      "integrity": "sha512-cnqkuOtZLapWYZUYM5rVIdv1nXYuFVIltZ6ZJ7nIj585QsjKM5dhL2Fu/lICXZ1OyIAFc7Qy+bvDAtTXqGrlhg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-block-scoping": {
      "version": "7.28.4",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-block-scoping/-/plugin-transform-block-scoping-7.28.4.tgz",
      "integrity": "sha512-1yxmvN0MJHOhPVmAsmoW5liWwoILobu/d/ShymZmj867bAdxGbehIrew1DuLpw2Ukv+qDSSPQdYW1dLNE7t11A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-class-properties": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-class-properties/-/plugin-transform-class-properties-7.27.1.tgz",
      "integrity": "sha512-D0VcalChDMtuRvJIu3U/fwWjf8ZMykz5iZsg77Nuj821vCKI3zCyRLwRdWbsuJ/uRwZhZ002QtCqIkwC/ZkvbA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-create-class-features-plugin": "^7.27.1",
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-class-static-block": {
      "version": "7.28.3",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-class-static-block/-/plugin-transform-class-static-block-7.28.3.tgz",
      "integrity": "sha512-LtPXlBbRoc4Njl/oh1CeD/3jC+atytbnf/UqLoqTDcEYGUPj022+rvfkbDYieUrSj3CaV4yHDByPE+T2HwfsJg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-create-class-features-plugin": "^7.28.3",
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.12.0"
      }
    },
    "node_modules/@babel/plugin-transform-classes": {
      "version": "7.28.4",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-classes/-/plugin-transform-classes-7.28.4.tgz",
      "integrity": "sha512-cFOlhIYPBv/iBoc+KS3M6et2XPtbT2HiCRfBXWtfpc9OAyostldxIf9YAYB6ypURBBbx+Qv6nyrLzASfJe+hBA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-annotate-as-pure": "^7.27.3",
        "@babel/helper-compilation-targets": "^7.27.2",
        "@babel/helper-globals": "^7.28.0",
        "@babel/helper-plugin-utils": "^7.27.1",
        "@babel/helper-replace-supers": "^7.27.1",
        "@babel/traverse": "^7.28.4"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-computed-properties": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-computed-properties/-/plugin-transform-computed-properties-7.27.1.tgz",
      "integrity": "sha512-lj9PGWvMTVksbWiDT2tW68zGS/cyo4AkZ/QTp0sQT0mjPopCmrSkzxeXkznjqBxzDI6TclZhOJbBmbBLjuOZUw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1",
        "@babel/template": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-destructuring": {
      "version": "7.28.0",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-destructuring/-/plugin-transform-destructuring-7.28.0.tgz",
      "integrity": "sha512-v1nrSMBiKcodhsyJ4Gf+Z0U/yawmJDBOTpEB3mcQY52r9RIyPneGyAS/yM6seP/8I+mWI3elOMtT5dB8GJVs+A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1",
        "@babel/traverse": "^7.28.0"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-dotall-regex": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-dotall-regex/-/plugin-transform-dotall-regex-7.27.1.tgz",
      "integrity": "sha512-gEbkDVGRvjj7+T1ivxrfgygpT7GUd4vmODtYpbs0gZATdkX8/iSnOtZSxiZnsgm1YjTgjI6VKBGSJJevkrclzw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-create-regexp-features-plugin": "^7.27.1",
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-duplicate-keys": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-duplicate-keys/-/plugin-transform-duplicate-keys-7.27.1.tgz",
      "integrity": "sha512-MTyJk98sHvSs+cvZ4nOauwTTG1JeonDjSGvGGUNHreGQns+Mpt6WX/dVzWBHgg+dYZhkC4X+zTDfkTU+Vy9y7Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-duplicate-named-capturing-groups-regex": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-duplicate-named-capturing-groups-regex/-/plugin-transform-duplicate-named-capturing-groups-regex-7.27.1.tgz",
      "integrity": "sha512-hkGcueTEzuhB30B3eJCbCYeCaaEQOmQR0AdvzpD4LoN0GXMWzzGSuRrxR2xTnCrvNbVwK9N6/jQ92GSLfiZWoQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-create-regexp-features-plugin": "^7.27.1",
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0"
      }
    },
    "node_modules/@babel/plugin-transform-dynamic-import": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-dynamic-import/-/plugin-transform-dynamic-import-7.27.1.tgz",
      "integrity": "sha512-MHzkWQcEmjzzVW9j2q8LGjwGWpG2mjwaaB0BNQwst3FIjqsg8Ct/mIZlvSPJvfi9y2AC8mi/ktxbFVL9pZ1I4A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-explicit-resource-management": {
      "version": "7.28.0",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-explicit-resource-management/-/plugin-transform-explicit-resource-management-7.28.0.tgz",
      "integrity": "sha512-K8nhUcn3f6iB+P3gwCv/no7OdzOZQcKchW6N389V6PD8NUWKZHzndOd9sPDVbMoBsbmjMqlB4L9fm+fEFNVlwQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1",
        "@babel/plugin-transform-destructuring": "^7.28.0"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-exponentiation-operator": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-exponentiation-operator/-/plugin-transform-exponentiation-operator-7.27.1.tgz",
      "integrity": "sha512-uspvXnhHvGKf2r4VVtBpeFnuDWsJLQ6MF6lGJLC89jBR1uoVeqM416AZtTuhTezOfgHicpJQmoD5YUakO/YmXQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-export-namespace-from": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-export-namespace-from/-/plugin-transform-export-namespace-from-7.27.1.tgz",
      "integrity": "sha512-tQvHWSZ3/jH2xuq/vZDy0jNn+ZdXJeM8gHvX4lnJmsc3+50yPlWdZXIc5ay+umX+2/tJIqHqiEqcJvxlmIvRvQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-for-of": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-for-of/-/plugin-transform-for-of-7.27.1.tgz",
      "integrity": "sha512-BfbWFFEJFQzLCQ5N8VocnCtA8J1CLkNTe2Ms2wocj75dd6VpiqS5Z5quTYcUoo4Yq+DN0rtikODccuv7RU81sw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1",
        "@babel/helper-skip-transparent-expression-wrappers": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-function-name": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-function-name/-/plugin-transform-function-name-7.27.1.tgz",
      "integrity": "sha512-1bQeydJF9Nr1eBCMMbC+hdwmRlsv5XYOMu03YSWFwNs0HsAmtSxxF1fyuYPqemVldVyFmlCU7w8UE14LupUSZQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-compilation-targets": "^7.27.1",
        "@babel/helper-plugin-utils": "^7.27.1",
        "@babel/traverse": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-json-strings": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-json-strings/-/plugin-transform-json-strings-7.27.1.tgz",
      "integrity": "sha512-6WVLVJiTjqcQauBhn1LkICsR2H+zm62I3h9faTDKt1qP4jn2o72tSvqMwtGFKGTpojce0gJs+76eZ2uCHRZh0Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-literals": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-literals/-/plugin-transform-literals-7.27.1.tgz",
      "integrity": "sha512-0HCFSepIpLTkLcsi86GG3mTUzxV5jpmbv97hTETW3yzrAij8aqlD36toB1D0daVFJM8NK6GvKO0gslVQmm+zZA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-logical-assignment-operators": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-logical-assignment-operators/-/plugin-transform-logical-assignment-operators-7.27.1.tgz",
      "integrity": "sha512-SJvDs5dXxiae4FbSL1aBJlG4wvl594N6YEVVn9e3JGulwioy6z3oPjx/sQBO3Y4NwUu5HNix6KJ3wBZoewcdbw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-member-expression-literals": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-member-expression-literals/-/plugin-transform-member-expression-literals-7.27.1.tgz",
      "integrity": "sha512-hqoBX4dcZ1I33jCSWcXrP+1Ku7kdqXf1oeah7ooKOIiAdKQ+uqftgCFNOSzA5AMS2XIHEYeGFg4cKRCdpxzVOQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-modules-amd": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-modules-amd/-/plugin-transform-modules-amd-7.27.1.tgz",
      "integrity": "sha512-iCsytMg/N9/oFq6n+gFTvUYDZQOMK5kEdeYxmxt91fcJGycfxVP9CnrxoliM0oumFERba2i8ZtwRUCMhvP1LnA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-module-transforms": "^7.27.1",
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-modules-commonjs": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-modules-commonjs/-/plugin-transform-modules-commonjs-7.27.1.tgz",
      "integrity": "sha512-OJguuwlTYlN0gBZFRPqwOGNWssZjfIUdS7HMYtN8c1KmwpwHFBwTeFZrg9XZa+DFTitWOW5iTAG7tyCUPsCCyw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-module-transforms": "^7.27.1",
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-modules-systemjs": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-modules-systemjs/-/plugin-transform-modules-systemjs-7.27.1.tgz",
      "integrity": "sha512-w5N1XzsRbc0PQStASMksmUeqECuzKuTJer7kFagK8AXgpCMkeDMO5S+aaFb7A51ZYDF7XI34qsTX+fkHiIm5yA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-module-transforms": "^7.27.1",
        "@babel/helper-plugin-utils": "^7.27.1",
        "@babel/helper-validator-identifier": "^7.27.1",
        "@babel/traverse": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-modules-umd": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-modules-umd/-/plugin-transform-modules-umd-7.27.1.tgz",
      "integrity": "sha512-iQBE/xC5BV1OxJbp6WG7jq9IWiD+xxlZhLrdwpPkTX3ydmXdvoCpyfJN7acaIBZaOqTfr76pgzqBJflNbeRK+w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-module-transforms": "^7.27.1",
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-named-capturing-groups-regex": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-named-capturing-groups-regex/-/plugin-transform-named-capturing-groups-regex-7.27.1.tgz",
      "integrity": "sha512-SstR5JYy8ddZvD6MhV0tM/j16Qds4mIpJTOd1Yu9J9pJjH93bxHECF7pgtc28XvkzTD6Pxcm/0Z73Hvk7kb3Ng==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-create-regexp-features-plugin": "^7.27.1",
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0"
      }
    },
    "node_modules/@babel/plugin-transform-new-target": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-new-target/-/plugin-transform-new-target-7.27.1.tgz",
      "integrity": "sha512-f6PiYeqXQ05lYq3TIfIDu/MtliKUbNwkGApPUvyo6+tc7uaR4cPjPe7DFPr15Uyycg2lZU6btZ575CuQoYh7MQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-nullish-coalescing-operator": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-nullish-coalescing-operator/-/plugin-transform-nullish-coalescing-operator-7.27.1.tgz",
      "integrity": "sha512-aGZh6xMo6q9vq1JGcw58lZ1Z0+i0xB2x0XaauNIUXd6O1xXc3RwoWEBlsTQrY4KQ9Jf0s5rgD6SiNkaUdJegTA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-numeric-separator": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-numeric-separator/-/plugin-transform-numeric-separator-7.27.1.tgz",
      "integrity": "sha512-fdPKAcujuvEChxDBJ5c+0BTaS6revLV7CJL08e4m3de8qJfNIuCc2nc7XJYOjBoTMJeqSmwXJ0ypE14RCjLwaw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-object-rest-spread": {
      "version": "7.28.4",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-object-rest-spread/-/plugin-transform-object-rest-spread-7.28.4.tgz",
      "integrity": "sha512-373KA2HQzKhQCYiRVIRr+3MjpCObqzDlyrM6u4I201wL8Mp2wHf7uB8GhDwis03k2ti8Zr65Zyyqs1xOxUF/Ew==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-compilation-targets": "^7.27.2",
        "@babel/helper-plugin-utils": "^7.27.1",
        "@babel/plugin-transform-destructuring": "^7.28.0",
        "@babel/plugin-transform-parameters": "^7.27.7",
        "@babel/traverse": "^7.28.4"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-object-super": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-object-super/-/plugin-transform-object-super-7.27.1.tgz",
      "integrity": "sha512-SFy8S9plRPbIcxlJ8A6mT/CxFdJx/c04JEctz4jf8YZaVS2px34j7NXRrlGlHkN/M2gnpL37ZpGRGVFLd3l8Ng==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1",
        "@babel/helper-replace-supers": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-optional-catch-binding": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-optional-catch-binding/-/plugin-transform-optional-catch-binding-7.27.1.tgz",
      "integrity": "sha512-txEAEKzYrHEX4xSZN4kJ+OfKXFVSWKB2ZxM9dpcE3wT7smwkNmXo5ORRlVzMVdJbD+Q8ILTgSD7959uj+3Dm3Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-optional-chaining": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-optional-chaining/-/plugin-transform-optional-chaining-7.27.1.tgz",
      "integrity": "sha512-BQmKPPIuc8EkZgNKsv0X4bPmOoayeu4F1YCwx2/CfmDSXDbp7GnzlUH+/ul5VGfRg1AoFPsrIThlEBj2xb4CAg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1",
        "@babel/helper-skip-transparent-expression-wrappers": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-parameters": {
      "version": "7.27.7",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-parameters/-/plugin-transform-parameters-7.27.7.tgz",
      "integrity": "sha512-qBkYTYCb76RRxUM6CcZA5KRu8K4SM8ajzVeUgVdMVO9NN9uI/GaVmBg/WKJJGnNokV9SY8FxNOVWGXzqzUidBg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-private-methods": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-private-methods/-/plugin-transform-private-methods-7.27.1.tgz",
      "integrity": "sha512-10FVt+X55AjRAYI9BrdISN9/AQWHqldOeZDUoLyif1Kn05a56xVBXb8ZouL8pZ9jem8QpXaOt8TS7RHUIS+GPA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-create-class-features-plugin": "^7.27.1",
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-private-property-in-object": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-private-property-in-object/-/plugin-transform-private-property-in-object-7.27.1.tgz",
      "integrity": "sha512-5J+IhqTi1XPa0DXF83jYOaARrX+41gOewWbkPyjMNRDqgOCqdffGh8L3f/Ek5utaEBZExjSAzcyjmV9SSAWObQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-annotate-as-pure": "^7.27.1",
        "@babel/helper-create-class-features-plugin": "^7.27.1",
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-property-literals": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-property-literals/-/plugin-transform-property-literals-7.27.1.tgz",
      "integrity": "sha512-oThy3BCuCha8kDZ8ZkgOg2exvPYUlprMukKQXI1r1pJ47NCvxfkEy8vK+r/hT9nF0Aa4H1WUPZZjHTFtAhGfmQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-regenerator": {
      "version": "7.28.4",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-regenerator/-/plugin-transform-regenerator-7.28.4.tgz",
      "integrity": "sha512-+ZEdQlBoRg9m2NnzvEeLgtvBMO4tkFBw5SQIUgLICgTrumLoU7lr+Oghi6km2PFj+dbUt2u1oby2w3BDO9YQnA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-regexp-modifiers": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-regexp-modifiers/-/plugin-transform-regexp-modifiers-7.27.1.tgz",
      "integrity": "sha512-TtEciroaiODtXvLZv4rmfMhkCv8jx3wgKpL68PuiPh2M4fvz5jhsA7697N1gMvkvr/JTF13DrFYyEbY9U7cVPA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-create-regexp-features-plugin": "^7.27.1",
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0"
      }
    },
    "node_modules/@babel/plugin-transform-reserved-words": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-reserved-words/-/plugin-transform-reserved-words-7.27.1.tgz",
      "integrity": "sha512-V2ABPHIJX4kC7HegLkYoDpfg9PVmuWy/i6vUM5eGK22bx4YVFD3M5F0QQnWQoDs6AGsUWTVOopBiMFQgHaSkVw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-shorthand-properties": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-shorthand-properties/-/plugin-transform-shorthand-properties-7.27.1.tgz",
      "integrity": "sha512-N/wH1vcn4oYawbJ13Y/FxcQrWk63jhfNa7jef0ih7PHSIHX2LB7GWE1rkPrOnka9kwMxb6hMl19p7lidA+EHmQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-spread": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-spread/-/plugin-transform-spread-7.27.1.tgz",
      "integrity": "sha512-kpb3HUqaILBJcRFVhFUs6Trdd4mkrzcGXss+6/mxUd273PfbWqSDHRzMT2234gIg2QYfAjvXLSquP1xECSg09Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1",
        "@babel/helper-skip-transparent-expression-wrappers": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-sticky-regex": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-sticky-regex/-/plugin-transform-sticky-regex-7.27.1.tgz",
      "integrity": "sha512-lhInBO5bi/Kowe2/aLdBAawijx+q1pQzicSgnkB6dUPc1+RC8QmJHKf2OjvU+NZWitguJHEaEmbV6VWEouT58g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-template-literals": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-template-literals/-/plugin-transform-template-literals-7.27.1.tgz",
      "integrity": "sha512-fBJKiV7F2DxZUkg5EtHKXQdbsbURW3DZKQUWphDum0uRP6eHGGa/He9mc0mypL680pb+e/lDIthRohlv8NCHkg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-typeof-symbol": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-typeof-symbol/-/plugin-transform-typeof-symbol-7.27.1.tgz",
      "integrity": "sha512-RiSILC+nRJM7FY5srIyc4/fGIwUhyDuuBSdWn4y6yT6gm652DpCHZjIipgn6B7MQ1ITOUnAKWixEUjQRIBIcLw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-unicode-escapes": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-unicode-escapes/-/plugin-transform-unicode-escapes-7.27.1.tgz",
      "integrity": "sha512-Ysg4v6AmF26k9vpfFuTZg8HRfVWzsh1kVfowA23y9j/Gu6dOuahdUVhkLqpObp3JIv27MLSii6noRnuKN8H0Mg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-unicode-property-regex": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-unicode-property-regex/-/plugin-transform-unicode-property-regex-7.27.1.tgz",
      "integrity": "sha512-uW20S39PnaTImxp39O5qFlHLS9LJEmANjMG7SxIhap8rCHqu0Ik+tLEPX5DKmHn6CsWQ7j3lix2tFOa5YtL12Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-create-regexp-features-plugin": "^7.27.1",
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-unicode-regex": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-unicode-regex/-/plugin-transform-unicode-regex-7.27.1.tgz",
      "integrity": "sha512-xvINq24TRojDuyt6JGtHmkVkrfVV3FPT16uytxImLeBZqW3/H52yN+kM1MGuyPkIQxrzKwPHs5U/MP3qKyzkGw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-create-regexp-features-plugin": "^7.27.1",
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-unicode-sets-regex": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-unicode-sets-regex/-/plugin-transform-unicode-sets-regex-7.27.1.tgz",
      "integrity": "sha512-EtkOujbc4cgvb0mlpQefi4NTPBzhSIevblFevACNLUspmrALgmEBdL/XfnyyITfd8fKBZrZys92zOWcik7j9Tw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-create-regexp-features-plugin": "^7.27.1",
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0"
      }
    },
    "node_modules/@babel/preset-env": {
      "version": "7.28.3",
      "resolved": "https://registry.npmjs.org/@babel/preset-env/-/preset-env-7.28.3.tgz",
      "integrity": "sha512-ROiDcM+GbYVPYBOeCR6uBXKkQpBExLl8k9HO1ygXEyds39j+vCCsjmj7S8GOniZQlEs81QlkdJZe76IpLSiqpg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/compat-data": "^7.28.0",
        "@babel/helper-compilation-targets": "^7.27.2",
        "@babel/helper-plugin-utils": "^7.27.1",
        "@babel/helper-validator-option": "^7.27.1",
        "@babel/plugin-bugfix-firefox-class-in-computed-class-key": "^7.27.1",
        "@babel/plugin-bugfix-safari-class-field-initializer-scope": "^7.27.1",
        "@babel/plugin-bugfix-safari-id-destructuring-collision-in-function-expression": "^7.27.1",
        "@babel/plugin-bugfix-v8-spread-parameters-in-optional-chaining": "^7.27.1",
        "@babel/plugin-bugfix-v8-static-class-fields-redefine-readonly": "^7.28.3",
        "@babel/plugin-proposal-private-property-in-object": "7.21.0-placeholder-for-preset-env.2",
        "@babel/plugin-syntax-import-assertions": "^7.27.1",
        "@babel/plugin-syntax-import-attributes": "^7.27.1",
        "@babel/plugin-syntax-unicode-sets-regex": "^7.18.6",
        "@babel/plugin-transform-arrow-functions": "^7.27.1",
        "@babel/plugin-transform-async-generator-functions": "^7.28.0",
        "@babel/plugin-transform-async-to-generator": "^7.27.1",
        "@babel/plugin-transform-block-scoped-functions": "^7.27.1",
        "@babel/plugin-transform-block-scoping": "^7.28.0",
        "@babel/plugin-transform-class-properties": "^7.27.1",
        "@babel/plugin-transform-class-static-block": "^7.28.3",
        "@babel/plugin-transform-classes": "^7.28.3",
        "@babel/plugin-transform-computed-properties": "^7.27.1",
        "@babel/plugin-transform-destructuring": "^7.28.0",
        "@babel/plugin-transform-dotall-regex": "^7.27.1",
        "@babel/plugin-transform-duplicate-keys": "^7.27.1",
        "@babel/plugin-transform-duplicate-named-capturing-groups-regex": "^7.27.1",
        "@babel/plugin-transform-dynamic-import": "^7.27.1",
        "@babel/plugin-transform-explicit-resource-management": "^7.28.0",
        "@babel/plugin-transform-exponentiation-operator": "^7.27.1",
        "@babel/plugin-transform-export-namespace-from": "^7.27.1",
        "@babel/plugin-transform-for-of": "^7.27.1",
        "@babel/plugin-transform-function-name": "^7.27.1",
        "@babel/plugin-transform-json-strings": "^7.27.1",
        "@babel/plugin-transform-literals": "^7.27.1",
        "@babel/plugin-transform-logical-assignment-operators": "^7.27.1",
        "@babel/plugin-transform-member-expression-literals": "^7.27.1",
        "@babel/plugin-transform-modules-amd": "^7.27.1",
        "@babel/plugin-transform-modules-commonjs": "^7.27.1",
        "@babel/plugin-transform-modules-systemjs": "^7.27.1",
        "@babel/plugin-transform-modules-umd": "^7.27.1",
        "@babel/plugin-transform-named-capturing-groups-regex": "^7.27.1",
        "@babel/plugin-transform-new-target": "^7.27.1",
        "@babel/plugin-transform-nullish-coalescing-operator": "^7.27.1",
        "@babel/plugin-transform-numeric-separator": "^7.27.1",
        "@babel/plugin-transform-object-rest-spread": "^7.28.0",
        "@babel/plugin-transform-object-super": "^7.27.1",
        "@babel/plugin-transform-optional-catch-binding": "^7.27.1",
        "@babel/plugin-transform-optional-chaining": "^7.27.1",
        "@babel/plugin-transform-parameters": "^7.27.7",
        "@babel/plugin-transform-private-methods": "^7.27.1",
        "@babel/plugin-transform-private-property-in-object": "^7.27.1",
        "@babel/plugin-transform-property-literals": "^7.27.1",
        "@babel/plugin-transform-regenerator": "^7.28.3",
        "@babel/plugin-transform-regexp-modifiers": "^7.27.1",
        "@babel/plugin-transform-reserved-words": "^7.27.1",
        "@babel/plugin-transform-shorthand-properties": "^7.27.1",
        "@babel/plugin-transform-spread": "^7.27.1",
        "@babel/plugin-transform-sticky-regex": "^7.27.1",
        "@babel/plugin-transform-template-literals": "^7.27.1",
        "@babel/plugin-transform-typeof-symbol": "^7.27.1",
        "@babel/plugin-transform-unicode-escapes": "^7.27.1",
        "@babel/plugin-transform-unicode-property-regex": "^7.27.1",
        "@babel/plugin-transform-unicode-regex": "^7.27.1",
        "@babel/plugin-transform-unicode-sets-regex": "^7.27.1",
        "@babel/preset-modules": "0.1.6-no-external-plugins",
        "babel-plugin-polyfill-corejs2": "^0.4.14",
        "babel-plugin-polyfill-corejs3": "^0.13.0",
        "babel-plugin-polyfill-regenerator": "^0.6.5",
        "core-js-compat": "^3.43.0",
        "semver": "^6.3.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/preset-modules": {
      "version": "0.1.6-no-external-plugins",
      "resolved": "https://registry.npmjs.org/@babel/preset-modules/-/preset-modules-0.1.6-no-external-plugins.tgz",
      "integrity": "sha512-HrcgcIESLm9aIR842yhJ5RWan/gebQUJ6E/E5+rf0y9o6oj7w0Br+sWuL6kEQ/o/AdfvR1Je9jG18/gnpwjEyA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.0.0",
        "@babel/types": "^7.4.4",
        "esutils": "^2.0.2"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0 || ^8.0.0-0 <8.0.0"
      }
    },
    "node_modules/@babel/template": {
      "version": "7.27.2",
      "resolved": "https://registry.npmjs.org/@babel/template/-/template-7.27.2.tgz",
      "integrity": "sha512-LPDZ85aEJyYSd18/DkjNh4/y1ntkE5KwUHWTiqgRxruuZL2F1yuHligVHLvcHY2vMHXttKFpJn6LwfI7cw7ODw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/code-frame": "^7.27.1",
        "@babel/parser": "^7.27.2",
        "@babel/types": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/traverse": {
      "version": "7.28.4",
      "resolved": "https://registry.npmjs.org/@babel/traverse/-/traverse-7.28.4.tgz",
      "integrity": "sha512-YEzuboP2qvQavAcjgQNVgsvHIDv6ZpwXvcvjmyySP2DIMuByS/6ioU5G9pYrWHM6T2YDfc7xga9iNzYOs12CFQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/code-frame": "^7.27.1",
        "@babel/generator": "^7.28.3",
        "@babel/helper-globals": "^7.28.0",
        "@babel/parser": "^7.28.4",
        "@babel/template": "^7.27.2",
        "@babel/types": "^7.28.4",
        "debug": "^4.3.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/types": {
      "version": "7.28.4",
      "resolved": "https://registry.npmjs.org/@babel/types/-/types-7.28.4.tgz",
      "integrity": "sha512-bkFqkLhh3pMBUQQkpVgWDWq/lqzc2678eUyDlTBhRqhCHFguYYGM0Efga7tYk4TogG/3x0EEl66/OQ+WGbWB/Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-string-parser": "^7.27.1",
        "@babel/helper-validator-identifier": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@bcoe/v8-coverage": {
      "version": "0.2.3",
      "resolved": "https://registry.npmjs.org/@bcoe/v8-coverage/-/v8-coverage-0.2.3.tgz",
      "integrity": "sha512-0hYQ8SB4Db5zvZB4axdMHGwEaQjkZzFjQiN9LVYvIFB2nSUHW9tYpxWriPrWDASIxiaXax83REcLxuSdnGPZtw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@eslint-community/eslint-utils": {
      "version": "4.9.0",
      "resolved": "https://registry.npmjs.org/@eslint-community/eslint-utils/-/eslint-utils-4.9.0.tgz",
      "integrity": "sha512-ayVFHdtZ+hsq1t2Dy24wCmGXGe4q9Gu3smhLYALJrr473ZH27MsnSL+LKUlimp4BWJqMDMLmPpx/Q9R3OAlL4g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "eslint-visitor-keys": "^3.4.3"
      },
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      },
      "peerDependencies": {
        "eslint": "^6.0.0 || ^7.0.0 || >=8.0.0"
      }
    },
    "node_modules/@eslint-community/regexpp": {
      "version": "4.12.1",
      "resolved": "https://registry.npmjs.org/@eslint-community/regexpp/-/regexpp-4.12.1.tgz",
      "integrity": "sha512-CCZCDJuduB9OUkFkY2IgppNZMi2lBQgD2qzwXkEia16cge2pijY/aXi96CJMquDMn3nJdlPV1A5KrJEXwfLNzQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^12.0.0 || ^14.0.0 || >=16.0.0"
      }
    },
    "node_modules/@eslint/eslintrc": {
      "version": "2.1.4",
      "resolved": "https://registry.npmjs.org/@eslint/eslintrc/-/eslintrc-2.1.4.tgz",
      "integrity": "sha512-269Z39MS6wVJtsoUl10L60WdkhJVdPG24Q4eZTH3nnF6lpvSShEK3wQjDX9JRWAUPvPh7COouPpU9IrqaZFvtQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ajv": "^6.12.4",
        "debug": "^4.3.2",
        "espree": "^9.6.0",
        "globals": "^13.19.0",
        "ignore": "^5.2.0",
        "import-fresh": "^3.2.1",
        "js-yaml": "^4.1.0",
        "minimatch": "^3.1.2",
        "strip-json-comments": "^3.1.1"
      },
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/@eslint/eslintrc/node_modules/argparse": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/argparse/-/argparse-2.0.1.tgz",
      "integrity": "sha512-8+9WqebbFzpX9OR+Wa6O29asIogeRMzcGtAINdpMHHyAg10f05aSFVBbcEqGf/PXw1EjAZ+q2/bEBg3DvurK3Q==",
      "dev": true,
      "license": "Python-2.0"
    },
    "node_modules/@eslint/eslintrc/node_modules/js-yaml": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/js-yaml/-/js-yaml-4.1.0.tgz",
      "integrity": "sha512-wpxZs9NoxZaJESJGIZTyDEaYpl0FKSA+FB9aJiyemKhMwkxQg63h4T1KJgUGHpTqPDNRcmmYLugrRjJlBtWvRA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "argparse": "^2.0.1"
      },
      "bin": {
        "js-yaml": "bin/js-yaml.js"
      }
    },
    "node_modules/@eslint/js": {
      "version": "8.57.1",
      "resolved": "https://registry.npmjs.org/@eslint/js/-/js-8.57.1.tgz",
      "integrity": "sha512-d9zaMRSTIKDLhctzH12MtXvJKSSUhaHcjV+2Z+GK+EEY7XKpP5yR4x+N3TAcHTcu963nIr+TMcCb4DBCYX1z6Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      }
    },
    "node_modules/@humanwhocodes/config-array": {
      "version": "0.13.0",
      "resolved": "https://registry.npmjs.org/@humanwhocodes/config-array/-/config-array-0.13.0.tgz",
      "integrity": "sha512-DZLEEqFWQFiyK6h5YIeynKx7JlvCYWL0cImfSRXZ9l4Sg2efkFGTuFf6vzXjK1cq6IYkU+Eg/JizXw+TD2vRNw==",
      "deprecated": "Use @eslint/config-array instead",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@humanwhocodes/object-schema": "^2.0.3",
        "debug": "^4.3.1",
        "minimatch": "^3.0.5"
      },
      "engines": {
        "node": ">=10.10.0"
      }
    },
    "node_modules/@humanwhocodes/module-importer": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/@humanwhocodes/module-importer/-/module-importer-1.0.1.tgz",
      "integrity": "sha512-bxveV4V8v5Yb4ncFTT3rPSgZBOpCkjfK0y4oVVVJwIuDVBRMDXrPyXRL988i5ap9m9bnyEEjWfm5WkBmtffLfA==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": ">=12.22"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/nzakas"
      }
    },
    "node_modules/@humanwhocodes/object-schema": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/@humanwhocodes/object-schema/-/object-schema-2.0.3.tgz",
      "integrity": "sha512-93zYdMES/c1D69yZiKDBj0V24vqNzB/koF26KPaagAfd3P/4gUlh3Dys5ogAK+Exi9QyzlD8x/08Zt7wIKcDcA==",
      "deprecated": "Use @eslint/object-schema instead",
      "dev": true,
      "license": "BSD-3-Clause"
    },
    "node_modules/@istanbuljs/load-nyc-config": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/@istanbuljs/load-nyc-config/-/load-nyc-config-1.1.0.tgz",
      "integrity": "sha512-VjeHSlIzpv/NyD3N0YuHfXOPDIixcA1q2ZV98wsMqcYlPmv2n3Yb2lYP9XMElnaFVXg5A7YLTeLu6V84uQDjmQ==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "camelcase": "^5.3.1",
        "find-up": "^4.1.0",
        "get-package-type": "^0.1.0",
        "js-yaml": "^3.13.1",
        "resolve-from": "^5.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/@istanbuljs/schema": {
      "version": "0.1.3",
      "resolved": "https://registry.npmjs.org/@istanbuljs/schema/-/schema-0.1.3.tgz",
      "integrity": "sha512-ZXRY4jNvVgSVQ8DL3LTcakaAtXwTVUxE81hslsyD2AtoXW/wVob10HkOJ1X/pAlcI7D+2YoZKg5do8G/w6RYgA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/@jest/console": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/@jest/console/-/console-29.7.0.tgz",
      "integrity": "sha512-5Ni4CU7XHQi32IJ398EEP4RrB8eV09sXP2ROqD4bksHrnTree52PsxvX8tpL8LvTZ3pFzXyPbNQReSN41CAhOg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/types": "^29.6.3",
        "@types/node": "*",
        "chalk": "^4.0.0",
        "jest-message-util": "^29.7.0",
        "jest-util": "^29.7.0",
        "slash": "^3.0.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/@jest/core": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/@jest/core/-/core-29.7.0.tgz",
      "integrity": "sha512-n7aeXWKMnGtDA48y8TLWJPJmLmmZ642Ceo78cYWEpiD7FzDgmNDV/GCVRorPABdXLJZ/9wzzgZAlHjXjxDHGsg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/console": "^29.7.0",
        "@jest/reporters": "^29.7.0",
        "@jest/test-result": "^29.7.0",
        "@jest/transform": "^29.7.0",
        "@jest/types": "^29.6.3",
        "@types/node": "*",
        "ansi-escapes": "^4.2.1",
        "chalk": "^4.0.0",
        "ci-info": "^3.2.0",
        "exit": "^0.1.2",
        "graceful-fs": "^4.2.9",
        "jest-changed-files": "^29.7.0",
        "jest-config": "^29.7.0",
        "jest-haste-map": "^29.7.0",
        "jest-message-util": "^29.7.0",
        "jest-regex-util": "^29.6.3",
        "jest-resolve": "^29.7.0",
        "jest-resolve-dependencies": "^29.7.0",
        "jest-runner": "^29.7.0",
        "jest-runtime": "^29.7.0",
        "jest-snapshot": "^29.7.0",
        "jest-util": "^29.7.0",
        "jest-validate": "^29.7.0",
        "jest-watcher": "^29.7.0",
        "micromatch": "^4.0.4",
        "pretty-format": "^29.7.0",
        "slash": "^3.0.0",
        "strip-ansi": "^6.0.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      },
      "peerDependencies": {
        "node-notifier": "^8.0.1 || ^9.0.0 || ^10.0.0"
      },
      "peerDependenciesMeta": {
        "node-notifier": {
          "optional": true
        }
      }
    },
    "node_modules/@jest/environment": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/@jest/environment/-/environment-29.7.0.tgz",
      "integrity": "sha512-aQIfHDq33ExsN4jP1NWGXhxgQ/wixs60gDiKO+XVMd8Mn0NWPWgc34ZQDTb2jKaUWQ7MuwoitXAsN2XVXNMpAw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/fake-timers": "^29.7.0",
        "@jest/types": "^29.6.3",
        "@types/node": "*",
        "jest-mock": "^29.7.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/@jest/expect": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/@jest/expect/-/expect-29.7.0.tgz",
      "integrity": "sha512-8uMeAMycttpva3P1lBHB8VciS9V0XAr3GymPpipdyQXbBcuhkLQOSe8E/p92RyAdToS6ZD1tFkX+CkhoECE0dQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "expect": "^29.7.0",
        "jest-snapshot": "^29.7.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/@jest/expect-utils": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/@jest/expect-utils/-/expect-utils-29.7.0.tgz",
      "integrity": "sha512-GlsNBWiFQFCVi9QVSx7f5AgMeLxe9YCCs5PuP2O2LdjDAA8Jh9eX7lA1Jq/xdXw3Wb3hyvlFNfZIfcRetSzYcA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "jest-get-type": "^29.6.3"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/@jest/fake-timers": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/@jest/fake-timers/-/fake-timers-29.7.0.tgz",
      "integrity": "sha512-q4DH1Ha4TTFPdxLsqDXK1d3+ioSL7yL5oCMJZgDYm6i+6CygW5E5xVr/D1HdsGxjt1ZWSfUAs9OxSB/BNelWrQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/types": "^29.6.3",
        "@sinonjs/fake-timers": "^10.0.2",
        "@types/node": "*",
        "jest-message-util": "^29.7.0",
        "jest-mock": "^29.7.0",
        "jest-util": "^29.7.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/@jest/globals": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/@jest/globals/-/globals-29.7.0.tgz",
      "integrity": "sha512-mpiz3dutLbkW2MNFubUGUEVLkTGiqW6yLVTA+JbP6fI6J5iL9Y0Nlg8k95pcF8ctKwCS7WVxteBs29hhfAotzQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/environment": "^29.7.0",
        "@jest/expect": "^29.7.0",
        "@jest/types": "^29.6.3",
        "jest-mock": "^29.7.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/@jest/reporters": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/@jest/reporters/-/reporters-29.7.0.tgz",
      "integrity": "sha512-DApq0KJbJOEzAFYjHADNNxAE3KbhxQB1y5Kplb5Waqw6zVbuWatSnMjE5gs8FUgEPmNsnZA3NCWl9NG0ia04Pg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@bcoe/v8-coverage": "^0.2.3",
        "@jest/console": "^29.7.0",
        "@jest/test-result": "^29.7.0",
        "@jest/transform": "^29.7.0",
        "@jest/types": "^29.6.3",
        "@jridgewell/trace-mapping": "^0.3.18",
        "@types/node": "*",
        "chalk": "^4.0.0",
        "collect-v8-coverage": "^1.0.0",
        "exit": "^0.1.2",
        "glob": "^7.1.3",
        "graceful-fs": "^4.2.9",
        "istanbul-lib-coverage": "^3.0.0",
        "istanbul-lib-instrument": "^6.0.0",
        "istanbul-lib-report": "^3.0.0",
        "istanbul-lib-source-maps": "^4.0.0",
        "istanbul-reports": "^3.1.3",
        "jest-message-util": "^29.7.0",
        "jest-util": "^29.7.0",
        "jest-worker": "^29.7.0",
        "slash": "^3.0.0",
        "string-length": "^4.0.1",
        "strip-ansi": "^6.0.0",
        "v8-to-istanbul": "^9.0.1"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      },
      "peerDependencies": {
        "node-notifier": "^8.0.1 || ^9.0.0 || ^10.0.0"
      },
      "peerDependenciesMeta": {
        "node-notifier": {
          "optional": true
        }
      }
    },
    "node_modules/@jest/reporters/node_modules/istanbul-lib-instrument": {
      "version": "6.0.3",
      "resolved": "https://registry.npmjs.org/istanbul-lib-instrument/-/istanbul-lib-instrument-6.0.3.tgz",
      "integrity": "sha512-Vtgk7L/R2JHyyGW07spoFlB8/lpjiOLTjMdms6AFMraYt3BaJauod/NGrfnVG/y4Ix1JEuMRPDPEj2ua+zz1/Q==",
      "dev": true,
      "license": "BSD-3-Clause",
      "dependencies": {
        "@babel/core": "^7.23.9",
        "@babel/parser": "^7.23.9",
        "@istanbuljs/schema": "^0.1.3",
        "istanbul-lib-coverage": "^3.2.0",
        "semver": "^7.5.4"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/@jest/reporters/node_modules/semver": {
      "version": "7.7.3",
      "resolved": "https://registry.npmjs.org/semver/-/semver-7.7.3.tgz",
      "integrity": "sha512-SdsKMrI9TdgjdweUSR9MweHA4EJ8YxHn8DFaDisvhVlUOe4BF1tLD7GAj0lIqWVl+dPb/rExr0Btby5loQm20Q==",
      "dev": true,
      "license": "ISC",
      "bin": {
        "semver": "bin/semver.js"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/@jest/schemas": {
      "version": "29.6.3",
      "resolved": "https://registry.npmjs.org/@jest/schemas/-/schemas-29.6.3.tgz",
      "integrity": "sha512-mo5j5X+jIZmJQveBKeS/clAueipV7KgiX1vMgCxam1RNYiqE1w62n0/tJJnHtjW8ZHcQco5gY85jA3mi0L+nSA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@sinclair/typebox": "^0.27.8"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/@jest/source-map": {
      "version": "29.6.3",
      "resolved": "https://registry.npmjs.org/@jest/source-map/-/source-map-29.6.3.tgz",
      "integrity": "sha512-MHjT95QuipcPrpLM+8JMSzFx6eHp5Bm+4XeFDJlwsvVBjmKNiIAvasGK2fxz2WbGRlnvqehFbh07MMa7n3YJnw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/trace-mapping": "^0.3.18",
        "callsites": "^3.0.0",
        "graceful-fs": "^4.2.9"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/@jest/test-result": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/@jest/test-result/-/test-result-29.7.0.tgz",
      "integrity": "sha512-Fdx+tv6x1zlkJPcWXmMDAG2HBnaR9XPSd5aDWQVsfrZmLVT3lU1cwyxLgRmXR9yrq4NBoEm9BMsfgFzTQAbJYA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/console": "^29.7.0",
        "@jest/types": "^29.6.3",
        "@types/istanbul-lib-coverage": "^2.0.0",
        "collect-v8-coverage": "^1.0.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/@jest/test-sequencer": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/@jest/test-sequencer/-/test-sequencer-29.7.0.tgz",
      "integrity": "sha512-GQwJ5WZVrKnOJuiYiAF52UNUJXgTZx1NHjFSEB0qEMmSZKAkdMoIzw/Cj6x6NF4AvV23AUqDpFzQkN/eYCYTxw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/test-result": "^29.7.0",
        "graceful-fs": "^4.2.9",
        "jest-haste-map": "^29.7.0",
        "slash": "^3.0.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/@jest/transform": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/@jest/transform/-/transform-29.7.0.tgz",
      "integrity": "sha512-ok/BTPFzFKVMwO5eOHRrvnBVHdRy9IrsrW1GpMaQ9MCnilNLXQKmAX8s1YXDFaai9xJpac2ySzV0YeRRECr2Vw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/core": "^7.11.6",
        "@jest/types": "^29.6.3",
        "@jridgewell/trace-mapping": "^0.3.18",
        "babel-plugin-istanbul": "^6.1.1",
        "chalk": "^4.0.0",
        "convert-source-map": "^2.0.0",
        "fast-json-stable-stringify": "^2.1.0",
        "graceful-fs": "^4.2.9",
        "jest-haste-map": "^29.7.0",
        "jest-regex-util": "^29.6.3",
        "jest-util": "^29.7.0",
        "micromatch": "^4.0.4",
        "pirates": "^4.0.4",
        "slash": "^3.0.0",
        "write-file-atomic": "^4.0.2"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/@jest/types": {
      "version": "29.6.3",
      "resolved": "https://registry.npmjs.org/@jest/types/-/types-29.6.3.tgz",
      "integrity": "sha512-u3UPsIilWKOM3F9CXtrG8LEJmNxwoCQC/XVj4IKYXvvpx7QIi/Kg1LI5uDmDpKlac62NUtX7eLjRh+jVZcLOzw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/schemas": "^29.6.3",
        "@types/istanbul-lib-coverage": "^2.0.0",
        "@types/istanbul-reports": "^3.0.0",
        "@types/node": "*",
        "@types/yargs": "^17.0.8",
        "chalk": "^4.0.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/@jridgewell/gen-mapping": {
      "version": "0.3.13",
      "resolved": "https://registry.npmjs.org/@jridgewell/gen-mapping/-/gen-mapping-0.3.13.tgz",
      "integrity": "sha512-2kkt/7niJ6MgEPxF0bYdQ6etZaA+fQvDcLKckhy1yIQOzaoKjBBjSj63/aLVjYE3qhRt5dvM+uUyfCg6UKCBbA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/sourcemap-codec": "^1.5.0",
        "@jridgewell/trace-mapping": "^0.3.24"
      }
    },
    "node_modules/@jridgewell/remapping": {
      "version": "2.3.5",
      "resolved": "https://registry.npmjs.org/@jridgewell/remapping/-/remapping-2.3.5.tgz",
      "integrity": "sha512-LI9u/+laYG4Ds1TDKSJW2YPrIlcVYOwi2fUC6xB43lueCjgxV4lffOCZCtYFiH6TNOX+tQKXx97T4IKHbhyHEQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/gen-mapping": "^0.3.5",
        "@jridgewell/trace-mapping": "^0.3.24"
      }
    },
    "node_modules/@jridgewell/resolve-uri": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/@jridgewell/resolve-uri/-/resolve-uri-3.1.2.tgz",
      "integrity": "sha512-bRISgCIjP20/tbWSPWMEi54QVPRZExkuD9lJL+UIxUKtwVJA8wW1Trb1jMs1RFXo1CBTNZ/5hpC9QvmKWdopKw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.0.0"
      }
    },
    "node_modules/@jridgewell/sourcemap-codec": {
      "version": "1.5.5",
      "resolved": "https://registry.npmjs.org/@jridgewell/sourcemap-codec/-/sourcemap-codec-1.5.5.tgz",
      "integrity": "sha512-cYQ9310grqxueWbl+WuIUIaiUaDcj7WOq5fVhEljNVgRfOUhY9fy2zTvfoqWsnebh8Sl70VScFbICvJnLKB0Og==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@jridgewell/trace-mapping": {
      "version": "0.3.31",
      "resolved": "https://registry.npmjs.org/@jridgewell/trace-mapping/-/trace-mapping-0.3.31.tgz",
      "integrity": "sha512-zzNR+SdQSDJzc8joaeP8QQoCQr8NuYx2dIIytl1QeBEZHJ9uW6hebsrYgbz8hJwUQao3TWCMtmfV8Nu1twOLAw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/resolve-uri": "^3.1.0",
        "@jridgewell/sourcemap-codec": "^1.4.14"
      }
    },
    "node_modules/@nodelib/fs.scandir": {
      "version": "2.1.5",
      "resolved": "https://registry.npmjs.org/@nodelib/fs.scandir/-/fs.scandir-2.1.5.tgz",
      "integrity": "sha512-vq24Bq3ym5HEQm2NKCr3yXDwjc7vTsEThRDnkp2DK9p1uqLR+DHurm/NOTo0KG7HYHU7eppKZj3MyqYuMBf62g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@nodelib/fs.stat": "2.0.5",
        "run-parallel": "^1.1.9"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/@nodelib/fs.stat": {
      "version": "2.0.5",
      "resolved": "https://registry.npmjs.org/@nodelib/fs.stat/-/fs.stat-2.0.5.tgz",
      "integrity": "sha512-RkhPPp2zrqDAQA/2jNhnztcPAlv64XdhIp7a7454A5ovI7Bukxgt7MX7udwAu3zg1DcpPU0rz3VV1SeaqvY4+A==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/@nodelib/fs.walk": {
      "version": "1.2.8",
      "resolved": "https://registry.npmjs.org/@nodelib/fs.walk/-/fs.walk-1.2.8.tgz",
      "integrity": "sha512-oGB+UxlgWcgQkgwo8GcEGwemoTFt3FIO9ababBmaGwXIoBKZ+GTy0pP185beGg7Llih/NSHSV2XAs1lnznocSg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@nodelib/fs.scandir": "2.1.5",
        "fastq": "^1.6.0"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/@sinclair/typebox": {
      "version": "0.27.8",
      "resolved": "https://registry.npmjs.org/@sinclair/typebox/-/typebox-0.27.8.tgz",
      "integrity": "sha512-+Fj43pSMwJs4KRrH/938Uf+uAELIgVBmQzg/q1YG10djyfA3TnrU8N8XzqCh/okZdszqBQTZf96idMfE5lnwTA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@sinonjs/commons": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/@sinonjs/commons/-/commons-3.0.1.tgz",
      "integrity": "sha512-K3mCHKQ9sVh8o1C9cxkwxaOmXoAMlDxC1mYyHrjqOWEcBjYr76t96zL2zlj5dUGZ3HSw240X1qgH3Mjf1yJWpQ==",
      "dev": true,
      "license": "BSD-3-Clause",
      "dependencies": {
        "type-detect": "4.0.8"
      }
    },
    "node_modules/@sinonjs/fake-timers": {
      "version": "10.3.0",
      "resolved": "https://registry.npmjs.org/@sinonjs/fake-timers/-/fake-timers-10.3.0.tgz",
      "integrity": "sha512-V4BG07kuYSUkTCSBHG8G8TNhM+F19jXFWnQtzj+we8DrkpSBCee9Z3Ms8yiGer/dlmhe35/Xdgyo3/0rQKg7YA==",
      "dev": true,
      "license": "BSD-3-Clause",
      "dependencies": {
        "@sinonjs/commons": "^3.0.0"
      }
    },
    "node_modules/@tootallnate/once": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/@tootallnate/once/-/once-2.0.0.tgz",
      "integrity": "sha512-XCuKFP5PS55gnMVu3dty8KPatLqUoy/ZYzDzAGCQ8JNFCkLXzmI7vNHCR+XpbZaMWQK/vQubr7PkYq8g470J/A==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 10"
      }
    },
    "node_modules/@types/babel__core": {
      "version": "7.20.5",
      "resolved": "https://registry.npmjs.org/@types/babel__core/-/babel__core-7.20.5.tgz",
      "integrity": "sha512-qoQprZvz5wQFJwMDqeseRXWv3rqMvhgpbXFfVyWhbx9X47POIA6i/+dXefEmZKoAgOaTdaIgNSMqMIU61yRyzA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/parser": "^7.20.7",
        "@babel/types": "^7.20.7",
        "@types/babel__generator": "*",
        "@types/babel__template": "*",
        "@types/babel__traverse": "*"
      }
    },
    "node_modules/@types/babel__generator": {
      "version": "7.27.0",
      "resolved": "https://registry.npmjs.org/@types/babel__generator/-/babel__generator-7.27.0.tgz",
      "integrity": "sha512-ufFd2Xi92OAVPYsy+P4n7/U7e68fex0+Ee8gSG9KX7eo084CWiQ4sdxktvdl0bOPupXtVJPY19zk6EwWqUQ8lg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/types": "^7.0.0"
      }
    },
    "node_modules/@types/babel__template": {
      "version": "7.4.4",
      "resolved": "https://registry.npmjs.org/@types/babel__template/-/babel__template-7.4.4.tgz",
      "integrity": "sha512-h/NUaSyG5EyxBIp8YRxo4RMe2/qQgvyowRwVMzhYhBCONbW8PUsg4lkFMrhgZhUe5z3L3MiLDuvyJ/CaPa2A8A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/parser": "^7.1.0",
        "@babel/types": "^7.0.0"
      }
    },
    "node_modules/@types/babel__traverse": {
      "version": "7.28.0",
      "resolved": "https://registry.npmjs.org/@types/babel__traverse/-/babel__traverse-7.28.0.tgz",
      "integrity": "sha512-8PvcXf70gTDZBgt9ptxJ8elBeBjcLOAcOtoO/mPJjtji1+CdGbHgm77om1GrsPxsiE+uXIpNSK64UYaIwQXd4Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/types": "^7.28.2"
      }
    },
    "node_modules/@types/graceful-fs": {
      "version": "4.1.9",
      "resolved": "https://registry.npmjs.org/@types/graceful-fs/-/graceful-fs-4.1.9.tgz",
      "integrity": "sha512-olP3sd1qOEe5dXTSaFvQG+02VdRXcdytWLAZsAq1PecU8uqQAhkrnbli7DagjtXKW/Bl7YJbUsa8MPcuc8LHEQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/node": "*"
      }
    },
    "node_modules/@types/istanbul-lib-coverage": {
      "version": "2.0.6",
      "resolved": "https://registry.npmjs.org/@types/istanbul-lib-coverage/-/istanbul-lib-coverage-2.0.6.tgz",
      "integrity": "sha512-2QF/t/auWm0lsy8XtKVPG19v3sSOQlJe/YHZgfjb/KBBHOGSV+J2q/S671rcq9uTBrLAXmZpqJiaQbMT+zNU1w==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/istanbul-lib-report": {
      "version": "3.0.3",
      "resolved": "https://registry.npmjs.org/@types/istanbul-lib-report/-/istanbul-lib-report-3.0.3.tgz",
      "integrity": "sha512-NQn7AHQnk/RSLOxrBbGyJM/aVQ+pjj5HCgasFxc0K/KhoATfQ/47AyUl15I2yBUpihjmas+a+VJBOqecrFH+uA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/istanbul-lib-coverage": "*"
      }
    },
    "node_modules/@types/istanbul-reports": {
      "version": "3.0.4",
      "resolved": "https://registry.npmjs.org/@types/istanbul-reports/-/istanbul-reports-3.0.4.tgz",
      "integrity": "sha512-pk2B1NWalF9toCRu6gjBzR69syFjP4Od8WRAX+0mmf9lAjCRicLOWc+ZrxZHx/0XRjotgkF9t6iaMJ+aXcOdZQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/istanbul-lib-report": "*"
      }
    },
    "node_modules/@types/jsdom": {
      "version": "20.0.1",
      "resolved": "https://registry.npmjs.org/@types/jsdom/-/jsdom-20.0.1.tgz",
      "integrity": "sha512-d0r18sZPmMQr1eG35u12FZfhIXNrnsPU/g5wvRKCUf/tOGilKKwYMYGqh33BNR6ba+2gkHw1EUiHoN3mn7E5IQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/node": "*",
        "@types/tough-cookie": "*",
        "parse5": "^7.0.0"
      }
    },
    "node_modules/@types/node": {
      "version": "24.7.1",
      "resolved": "https://registry.npmjs.org/@types/node/-/node-24.7.1.tgz",
      "integrity": "sha512-CmyhGZanP88uuC5GpWU9q+fI61j2SkhO3UGMUdfYRE6Bcy0ccyzn1Rqj9YAB/ZY4kOXmNf0ocah5GtphmLMP6Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "undici-types": "~7.14.0"
      }
    },
    "node_modules/@types/stack-utils": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/@types/stack-utils/-/stack-utils-2.0.3.tgz",
      "integrity": "sha512-9aEbYZ3TbYMznPdcdr3SmIrLXwC/AKZXQeCf9Pgao5CKb8CyHuEX5jzWPTkvregvhRJHcpRO6BFoGW9ycaOkYw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/tough-cookie": {
      "version": "4.0.5",
      "resolved": "https://registry.npmjs.org/@types/tough-cookie/-/tough-cookie-4.0.5.tgz",
      "integrity": "sha512-/Ad8+nIOV7Rl++6f1BdKxFSMgmoqEoYbHRpPcx3JEfv8VRsQe9Z4mCXeJBzxs7mbHY/XOZZuXlRNfhpVPbs6ZA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/yargs": {
      "version": "17.0.33",
      "resolved": "https://registry.npmjs.org/@types/yargs/-/yargs-17.0.33.tgz",
      "integrity": "sha512-WpxBCKWPLr4xSsHgz511rFJAM+wS28w2zEO1QDNY5zM/S8ok70NNfztH0xwhqKyaK0OHCbN98LDAZuy1ctxDkA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/yargs-parser": "*"
      }
    },
    "node_modules/@types/yargs-parser": {
      "version": "21.0.3",
      "resolved": "https://registry.npmjs.org/@types/yargs-parser/-/yargs-parser-21.0.3.tgz",
      "integrity": "sha512-I4q9QU9MQv4oEOz4tAHJtNz1cwuLxn2F3xcc2iV5WdqLPpUnj30aUuxt1mAxYTG+oe8CZMV/+6rU4S4gRDzqtQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@ungap/structured-clone": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/@ungap/structured-clone/-/structured-clone-1.3.0.tgz",
      "integrity": "sha512-WmoN8qaIAo7WTYWbAZuG8PYEhn5fkz7dZrqTBZ7dtt//lL2Gwms1IcnQ5yHqjDfX8Ft5j4YzDM23f87zBfDe9g==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/abab": {
      "version": "2.0.6",
      "resolved": "https://registry.npmjs.org/abab/-/abab-2.0.6.tgz",
      "integrity": "sha512-j2afSsaIENvHZN2B8GOpF566vZ5WVk5opAiMTvWgaQT8DkbOqsTfvNAvHoRGU2zzP8cPoqys+xHTRDWW8L+/BA==",
      "deprecated": "Use your platform's native atob() and btoa() methods instead",
      "dev": true,
      "license": "BSD-3-Clause"
    },
    "node_modules/acorn": {
      "version": "8.15.0",
      "resolved": "https://registry.npmjs.org/acorn/-/acorn-8.15.0.tgz",
      "integrity": "sha512-NZyJarBfL7nWwIq+FDL6Zp/yHEhePMNnnJ0y3qfieCrmNvYct8uvtiV41UvlSe6apAfk0fY1FbWx+NwfmpvtTg==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "acorn": "bin/acorn"
      },
      "engines": {
        "node": ">=0.4.0"
      }
    },
    "node_modules/acorn-globals": {
      "version": "7.0.1",
      "resolved": "https://registry.npmjs.org/acorn-globals/-/acorn-globals-7.0.1.tgz",
      "integrity": "sha512-umOSDSDrfHbTNPuNpC2NSnnA3LUrqpevPb4T9jRx4MagXNS0rs+gwiTcAvqCRmsD6utzsrzNt+ebm00SNWiC3Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "acorn": "^8.1.0",
        "acorn-walk": "^8.0.2"
      }
    },
    "node_modules/acorn-jsx": {
      "version": "5.3.2",
      "resolved": "https://registry.npmjs.org/acorn-jsx/-/acorn-jsx-5.3.2.tgz",
      "integrity": "sha512-rq9s+JNhf0IChjtDXxllJ7g41oZk5SlXtp0LHwyA5cejwn7vKmKp4pPri6YEePv2PU65sAsegbXtIinmDFDXgQ==",
      "dev": true,
      "license": "MIT",
      "peerDependencies": {
        "acorn": "^6.0.0 || ^7.0.0 || ^8.0.0"
      }
    },
    "node_modules/acorn-walk": {
      "version": "8.3.4",
      "resolved": "https://registry.npmjs.org/acorn-walk/-/acorn-walk-8.3.4.tgz",
      "integrity": "sha512-ueEepnujpqee2o5aIYnvHU6C0A42MNdsIDeqy5BydrkuC5R1ZuUFnm27EeFJGoEHJQgn3uleRvmTXaJgfXbt4g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "acorn": "^8.11.0"
      },
      "engines": {
        "node": ">=0.4.0"
      }
    },
    "node_modules/agent-base": {
      "version": "6.0.2",
      "resolved": "https://registry.npmjs.org/agent-base/-/agent-base-6.0.2.tgz",
      "integrity": "sha512-RZNwNclF7+MS/8bDg70amg32dyeZGZxiDuQmZxKLAlQjr3jGyLx+4Kkk58UO7D2QdgFIQCovuSuZESne6RG6XQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "debug": "4"
      },
      "engines": {
        "node": ">= 6.0.0"
      }
    },
    "node_modules/ajv": {
      "version": "6.12.6",
      "resolved": "https://registry.npmjs.org/ajv/-/ajv-6.12.6.tgz",
      "integrity": "sha512-j3fVLgvTo527anyYyJOGTYJbG+vnnQYvE0m5mmkc1TK+nxAppkCLMIL0aZ4dblVCNoGShhm+kzE4ZUykBoMg4g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "fast-deep-equal": "^3.1.1",
        "fast-json-stable-stringify": "^2.0.0",
        "json-schema-traverse": "^0.4.1",
        "uri-js": "^4.2.2"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/epoberezkin"
      }
    },
    "node_modules/ansi-escapes": {
      "version": "4.3.2",
      "resolved": "https://registry.npmjs.org/ansi-escapes/-/ansi-escapes-4.3.2.tgz",
      "integrity": "sha512-gKXj5ALrKWQLsYG9jlTRmR/xKluxHV+Z9QEwNIgCfM1/uwPMCuzVVnh5mwTd+OuBZcwSIMbqssNWRm1lE51QaQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "type-fest": "^0.21.3"
      },
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/ansi-regex": {
      "version": "5.0.1",
      "resolved": "https://registry.npmjs.org/ansi-regex/-/ansi-regex-5.0.1.tgz",
      "integrity": "sha512-quJQXlTSUGL2LH9SUXo8VwsY4soanhgo6LNSm84E1LBcE8s3O0wpdiRzyR9z/ZZJMlMWv37qOOb9pdJlMUEKFQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/ansi-styles": {
      "version": "4.3.0",
      "resolved": "https://registry.npmjs.org/ansi-styles/-/ansi-styles-4.3.0.tgz",
      "integrity": "sha512-zbB9rCJAT1rbjiVDb2hqKFHNYLxgtk8NURxZ3IZwD3F6NtxbXZQCnnSi1Lkx+IDohdPlFp222wVALIheZJQSEg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "color-convert": "^2.0.1"
      },
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/chalk/ansi-styles?sponsor=1"
      }
    },
    "node_modules/anymatch": {
      "version": "3.1.3",
      "resolved": "https://registry.npmjs.org/anymatch/-/anymatch-3.1.3.tgz",
      "integrity": "sha512-KMReFUr0B4t+D+OBkjR3KYqvocp2XaSzO55UcB6mgQMd3KbcE+mWTyvVV7D/zsdEbNnV6acZUutkiHQXvTr1Rw==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "normalize-path": "^3.0.0",
        "picomatch": "^2.0.4"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/argparse": {
      "version": "1.0.10",
      "resolved": "https://registry.npmjs.org/argparse/-/argparse-1.0.10.tgz",
      "integrity": "sha512-o5Roy6tNG4SL/FOkCAN6RzjiakZS25RLYFrcMttJqbdd8BWrnA+fGz57iN5Pb06pvBGvl5gQ0B48dJlslXvoTg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "sprintf-js": "~1.0.2"
      }
    },
    "node_modules/asynckit": {
      "version": "0.4.0",
      "resolved": "https://registry.npmjs.org/asynckit/-/asynckit-0.4.0.tgz",
      "integrity": "sha512-Oei9OH4tRh0YqU3GxhX79dM/mwVgvbZJaSNaRk+bshkj0S5cfHcgYakreBjrHwatXKbz+IoIdYLxrKim2MjW0Q==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/babel-jest": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/babel-jest/-/babel-jest-29.7.0.tgz",
      "integrity": "sha512-BrvGY3xZSwEcCzKvKsCi2GgHqDqsYkOP4/by5xCgIwGXQxIEh+8ew3gmrE1y7XRR6LHZIj6yLYnUi/mm2KXKBg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/transform": "^29.7.0",
        "@types/babel__core": "^7.1.14",
        "babel-plugin-istanbul": "^6.1.1",
        "babel-preset-jest": "^29.6.3",
        "chalk": "^4.0.0",
        "graceful-fs": "^4.2.9",
        "slash": "^3.0.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.8.0"
      }
    },
    "node_modules/babel-plugin-istanbul": {
      "version": "6.1.1",
      "resolved": "https://registry.npmjs.org/babel-plugin-istanbul/-/babel-plugin-istanbul-6.1.1.tgz",
      "integrity": "sha512-Y1IQok9821cC9onCx5otgFfRm7Lm+I+wwxOx738M/WLPZ9Q42m4IG5W0FNX8WLL2gYMZo3JkuXIH2DOpWM+qwA==",
      "dev": true,
      "license": "BSD-3-Clause",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.0.0",
        "@istanbuljs/load-nyc-config": "^1.0.0",
        "@istanbuljs/schema": "^0.1.2",
        "istanbul-lib-instrument": "^5.0.4",
        "test-exclude": "^6.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/babel-plugin-jest-hoist": {
      "version": "29.6.3",
      "resolved": "https://registry.npmjs.org/babel-plugin-jest-hoist/-/babel-plugin-jest-hoist-29.6.3.tgz",
      "integrity": "sha512-ESAc/RJvGTFEzRwOTT4+lNDk/GNHMkKbNzsvT0qKRfDyyYTskxB5rnU2njIDYVxXCBHHEI1c0YwHob3WaYujOg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/template": "^7.3.3",
        "@babel/types": "^7.3.3",
        "@types/babel__core": "^7.1.14",
        "@types/babel__traverse": "^7.0.6"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/babel-plugin-polyfill-corejs2": {
      "version": "0.4.14",
      "resolved": "https://registry.npmjs.org/babel-plugin-polyfill-corejs2/-/babel-plugin-polyfill-corejs2-0.4.14.tgz",
      "integrity": "sha512-Co2Y9wX854ts6U8gAAPXfn0GmAyctHuK8n0Yhfjd6t30g7yvKjspvvOo9yG+z52PZRgFErt7Ka2pYnXCjLKEpg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/compat-data": "^7.27.7",
        "@babel/helper-define-polyfill-provider": "^0.6.5",
        "semver": "^6.3.1"
      },
      "peerDependencies": {
        "@babel/core": "^7.4.0 || ^8.0.0-0 <8.0.0"
      }
    },
    "node_modules/babel-plugin-polyfill-corejs3": {
      "version": "0.13.0",
      "resolved": "https://registry.npmjs.org/babel-plugin-polyfill-corejs3/-/babel-plugin-polyfill-corejs3-0.13.0.tgz",
      "integrity": "sha512-U+GNwMdSFgzVmfhNm8GJUX88AadB3uo9KpJqS3FaqNIPKgySuvMb+bHPsOmmuWyIcuqZj/pzt1RUIUZns4y2+A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-define-polyfill-provider": "^0.6.5",
        "core-js-compat": "^3.43.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.4.0 || ^8.0.0-0 <8.0.0"
      }
    },
    "node_modules/babel-plugin-polyfill-regenerator": {
      "version": "0.6.5",
      "resolved": "https://registry.npmjs.org/babel-plugin-polyfill-regenerator/-/babel-plugin-polyfill-regenerator-0.6.5.tgz",
      "integrity": "sha512-ISqQ2frbiNU9vIJkzg7dlPpznPZ4jOiUQ1uSmB0fEHeowtN3COYRsXr/xexn64NpU13P06jc/L5TgiJXOgrbEg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-define-polyfill-provider": "^0.6.5"
      },
      "peerDependencies": {
        "@babel/core": "^7.4.0 || ^8.0.0-0 <8.0.0"
      }
    },
    "node_modules/babel-preset-current-node-syntax": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/babel-preset-current-node-syntax/-/babel-preset-current-node-syntax-1.2.0.tgz",
      "integrity": "sha512-E/VlAEzRrsLEb2+dv8yp3bo4scof3l9nR4lrld+Iy5NyVqgVYUJnDAmunkhPMisRI32Qc4iRiz425d8vM++2fg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/plugin-syntax-async-generators": "^7.8.4",
        "@babel/plugin-syntax-bigint": "^7.8.3",
        "@babel/plugin-syntax-class-properties": "^7.12.13",
        "@babel/plugin-syntax-class-static-block": "^7.14.5",
        "@babel/plugin-syntax-import-attributes": "^7.24.7",
        "@babel/plugin-syntax-import-meta": "^7.10.4",
        "@babel/plugin-syntax-json-strings": "^7.8.3",
        "@babel/plugin-syntax-logical-assignment-operators": "^7.10.4",
        "@babel/plugin-syntax-nullish-coalescing-operator": "^7.8.3",
        "@babel/plugin-syntax-numeric-separator": "^7.10.4",
        "@babel/plugin-syntax-object-rest-spread": "^7.8.3",
        "@babel/plugin-syntax-optional-catch-binding": "^7.8.3",
        "@babel/plugin-syntax-optional-chaining": "^7.8.3",
        "@babel/plugin-syntax-private-property-in-object": "^7.14.5",
        "@babel/plugin-syntax-top-level-await": "^7.14.5"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0 || ^8.0.0-0"
      }
    },
    "node_modules/babel-preset-jest": {
      "version": "29.6.3",
      "resolved": "https://registry.npmjs.org/babel-preset-jest/-/babel-preset-jest-29.6.3.tgz",
      "integrity": "sha512-0B3bhxR6snWXJZtR/RliHTDPRgn1sNHOR0yVtq/IiQFyuOVjFS+wuio/R4gSNkyYmKmJB4wGZv2NZanmKmTnNA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "babel-plugin-jest-hoist": "^29.6.3",
        "babel-preset-current-node-syntax": "^1.0.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0"
      }
    },
    "node_modules/balanced-match": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/balanced-match/-/balanced-match-1.0.2.tgz",
      "integrity": "sha512-3oSeUO0TMV67hN1AmbXsK4yaqU7tjiHlbxRDZOpH0KW9+CeX4bRAaX0Anxt0tx2MrpRpWwQaPwIlISEJhYU5Pw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/baseline-browser-mapping": {
      "version": "2.8.15",
      "resolved": "https://registry.npmjs.org/baseline-browser-mapping/-/baseline-browser-mapping-2.8.15.tgz",
      "integrity": "sha512-qsJ8/X+UypqxHXN75M7dF88jNK37dLBRW7LeUzCPz+TNs37G8cfWy9nWzS+LS//g600zrt2le9KuXt0rWfDz5Q==",
      "dev": true,
      "license": "Apache-2.0",
      "bin": {
        "baseline-browser-mapping": "dist/cli.js"
      }
    },
    "node_modules/brace-expansion": {
      "version": "1.1.12",
      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-1.1.12.tgz",
      "integrity": "sha512-9T9UjW3r0UW5c1Q7GTwllptXwhvYmEzFhzMfZ9H7FQWt+uZePjZPjBP/W1ZEyZ1twGWom5/56TF4lPcqjnDHcg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "balanced-match": "^1.0.0",
        "concat-map": "0.0.1"
      }
    },
    "node_modules/braces": {
      "version": "3.0.3",
      "resolved": "https://registry.npmjs.org/braces/-/braces-3.0.3.tgz",
      "integrity": "sha512-yQbXgO/OSZVD2IsiLlro+7Hf6Q18EJrKSEsdoMzKePKXct3gvD8oLcOQdIzGupr5Fj+EDe8gO/lxc1BzfMpxvA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "fill-range": "^7.1.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/browserslist": {
      "version": "4.26.3",
      "resolved": "https://registry.npmjs.org/browserslist/-/browserslist-4.26.3.tgz",
      "integrity": "sha512-lAUU+02RFBuCKQPj/P6NgjlbCnLBMp4UtgTx7vNHd3XSIJF87s9a5rA3aH2yw3GS9DqZAUbOtZdCCiZeVRqt0w==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/browserslist"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/browserslist"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "baseline-browser-mapping": "^2.8.9",
        "caniuse-lite": "^1.0.30001746",
        "electron-to-chromium": "^1.5.227",
        "node-releases": "^2.0.21",
        "update-browserslist-db": "^1.1.3"
      },
      "bin": {
        "browserslist": "cli.js"
      },
      "engines": {
        "node": "^6 || ^7 || ^8 || ^9 || ^10 || ^11 || ^12 || >=13.7"
      }
    },
    "node_modules/bser": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/bser/-/bser-2.1.1.tgz",
      "integrity": "sha512-gQxTNE/GAfIIrmHLUE3oJyp5FO6HRBfhjnw4/wMmA63ZGDJnWBmgY/lyQBpnDUkGmAhbSe39tx2d/iTOAfglwQ==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "node-int64": "^0.4.0"
      }
    },
    "node_modules/buffer-from": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/buffer-from/-/buffer-from-1.1.2.tgz",
      "integrity": "sha512-E+XQCRwSbaaiChtv6k6Dwgc+bx+Bs6vuKJHHl5kox/BaKbhiXzqQOwK4cO22yElGp2OCmjwVhT3HmxgyPGnJfQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/call-bind-apply-helpers": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/call-bind-apply-helpers/-/call-bind-apply-helpers-1.0.2.tgz",
      "integrity": "sha512-Sp1ablJ0ivDkSzjcaJdxEunN5/XvksFJ2sMBFfq6x0ryhQV/2b/KwFe21cMpmHtPOSij8K99/wSfoEuTObmuMQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "function-bind": "^1.1.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/callsites": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/callsites/-/callsites-3.1.0.tgz",
      "integrity": "sha512-P8BjAsXvZS+VIDUI11hHCQEv74YT67YUi5JJFNWIqL235sBmjX4+qx9Muvls5ivyNENctx46xQLQ3aTuE7ssaQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/camelcase": {
      "version": "5.3.1",
      "resolved": "https://registry.npmjs.org/camelcase/-/camelcase-5.3.1.tgz",
      "integrity": "sha512-L28STB170nwWS63UjtlEOE3dldQApaJXZkOI1uMFfzf3rRuPegHaHesyee+YxQ+W6SvRDQV6UrdOdRiR153wJg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/caniuse-lite": {
      "version": "1.0.30001749",
      "resolved": "https://registry.npmjs.org/caniuse-lite/-/caniuse-lite-1.0.30001749.tgz",
      "integrity": "sha512-0rw2fJOmLfnzCRbkm8EyHL8SvI2Apu5UbnQuTsJ0ClgrH8hcwFooJ1s5R0EP8o8aVrFu8++ae29Kt9/gZAZp/Q==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/browserslist"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/caniuse-lite"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "CC-BY-4.0"
    },
    "node_modules/chalk": {
      "version": "4.1.2",
      "resolved": "https://registry.npmjs.org/chalk/-/chalk-4.1.2.tgz",
      "integrity": "sha512-oKnbhFyRIXpUuez8iBMmyEa4nbj4IOQyuhc/wy9kY7/WVPcwIO9VA668Pu8RkO7+0G76SLROeyw9CpQ061i4mA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ansi-styles": "^4.1.0",
        "supports-color": "^7.1.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/chalk/chalk?sponsor=1"
      }
    },
    "node_modules/char-regex": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/char-regex/-/char-regex-1.0.2.tgz",
      "integrity": "sha512-kWWXztvZ5SBQV+eRgKFeh8q5sLuZY2+8WUIzlxWVTg+oGwY14qylx1KbKzHd8P6ZYkAg0xyIDU9JMHhyJMZ1jw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/ci-info": {
      "version": "3.9.0",
      "resolved": "https://registry.npmjs.org/ci-info/-/ci-info-3.9.0.tgz",
      "integrity": "sha512-NIxF55hv4nSqQswkAeiOi1r83xy8JldOFDTWiug55KBu9Jnblncd2U6ViHmYgHf01TPZS77NJBhBMKdWj9HQMQ==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/sibiraj-s"
        }
      ],
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/cjs-module-lexer": {
      "version": "1.4.3",
      "resolved": "https://registry.npmjs.org/cjs-module-lexer/-/cjs-module-lexer-1.4.3.tgz",
      "integrity": "sha512-9z8TZaGM1pfswYeXrUpzPrkx8UnWYdhJclsiYMm6x/w5+nN+8Tf/LnAgfLGQCm59qAOxU8WwHEq2vNwF6i4j+Q==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/cliui": {
      "version": "8.0.1",
      "resolved": "https://registry.npmjs.org/cliui/-/cliui-8.0.1.tgz",
      "integrity": "sha512-BSeNnyus75C4//NQ9gQt1/csTXyo/8Sb+afLAkzAptFuMsod9HFokGNudZpi/oQV73hnVK+sR+5PVRMd+Dr7YQ==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "string-width": "^4.2.0",
        "strip-ansi": "^6.0.1",
        "wrap-ansi": "^7.0.0"
      },
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/co": {
      "version": "4.6.0",
      "resolved": "https://registry.npmjs.org/co/-/co-4.6.0.tgz",
      "integrity": "sha512-QVb0dM5HvG+uaxitm8wONl7jltx8dqhfU33DcqtOZcLSVIKSDDLDi7+0LbAKiyI8hD9u42m2YxXSkMGWThaecQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "iojs": ">= 1.0.0",
        "node": ">= 0.12.0"
      }
    },
    "node_modules/collect-v8-coverage": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/collect-v8-coverage/-/collect-v8-coverage-1.0.2.tgz",
      "integrity": "sha512-lHl4d5/ONEbLlJvaJNtsF/Lz+WvB07u2ycqTYbdrq7UypDXailES4valYb2eWiJFxZlVmpGekfqoxQhzyFdT4Q==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/color-convert": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/color-convert/-/color-convert-2.0.1.tgz",
      "integrity": "sha512-RRECPsj7iu/xb5oKYcsFHSppFNnsj/52OVTRKb4zP5onXwVF3zVmmToNcOfGC+CRDpfK/U584fMg38ZHCaElKQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "color-name": "~1.1.4"
      },
      "engines": {
        "node": ">=7.0.0"
      }
    },
    "node_modules/color-name": {
      "version": "1.1.4",
      "resolved": "https://registry.npmjs.org/color-name/-/color-name-1.1.4.tgz",
      "integrity": "sha512-dOy+3AuW3a2wNbZHIuMZpTcgjGuLU/uBL/ubcZF9OXbDo8ff4O8yVp5Bf0efS8uEoYo5q4Fx7dY9OgQGXgAsQA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/combined-stream": {
      "version": "1.0.8",
      "resolved": "https://registry.npmjs.org/combined-stream/-/combined-stream-1.0.8.tgz",
      "integrity": "sha512-FQN4MRfuJeHf7cBbBMJFXhKSDq+2kAArBlmRBvcvFE5BB1HZKXtSFASDhdlz9zOYwxh8lDdnvmMOe/+5cdoEdg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "delayed-stream": "~1.0.0"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/concat-map": {
      "version": "0.0.1",
      "resolved": "https://registry.npmjs.org/concat-map/-/concat-map-0.0.1.tgz",
      "integrity": "sha512-/Srv4dswyQNBfohGpz9o6Yb3Gz3SrUDqBH5rTuhGR7ahtlbYKnVxw2bCFMRljaA7EXHaXZ8wsHdodFvbkhKmqg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/convert-source-map": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/convert-source-map/-/convert-source-map-2.0.0.tgz",
      "integrity": "sha512-Kvp459HrV2FEJ1CAsi1Ku+MY3kasH19TFykTz2xWmMeq6bk2NU3XXvfJ+Q61m0xktWwt+1HSYf3JZsTms3aRJg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/core-js-compat": {
      "version": "3.46.0",
      "resolved": "https://registry.npmjs.org/core-js-compat/-/core-js-compat-3.46.0.tgz",
      "integrity": "sha512-p9hObIIEENxSV8xIu+V68JjSeARg6UVMG5mR+JEUguG3sI6MsiS1njz2jHmyJDvA+8jX/sytkBHup6kxhM9law==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "browserslist": "^4.26.3"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/core-js"
      }
    },
    "node_modules/create-jest": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/create-jest/-/create-jest-29.7.0.tgz",
      "integrity": "sha512-Adz2bdH0Vq3F53KEMJOoftQFutWCukm6J24wbPWRO4k1kMY7gS7ds/uoJkNuV8wDCtWWnuwGcJwpWcih+zEW1Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/types": "^29.6.3",
        "chalk": "^4.0.0",
        "exit": "^0.1.2",
        "graceful-fs": "^4.2.9",
        "jest-config": "^29.7.0",
        "jest-util": "^29.7.0",
        "prompts": "^2.0.1"
      },
      "bin": {
        "create-jest": "bin/create-jest.js"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/cross-spawn": {
      "version": "7.0.6",
      "resolved": "https://registry.npmjs.org/cross-spawn/-/cross-spawn-7.0.6.tgz",
      "integrity": "sha512-uV2QOWP2nWzsy2aMp8aRibhi9dlzF5Hgh5SHaB9OiTGEyDTiJJyx0uy51QXdyWbtAHNua4XJzUKca3OzKUd3vA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "path-key": "^3.1.0",
        "shebang-command": "^2.0.0",
        "which": "^2.0.1"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/cssom": {
      "version": "0.5.0",
      "resolved": "https://registry.npmjs.org/cssom/-/cssom-0.5.0.tgz",
      "integrity": "sha512-iKuQcq+NdHqlAcwUY0o/HL69XQrUaQdMjmStJ8JFmUaiiQErlhrmuigkg/CU4E2J0IyUKUrMAgl36TvN67MqTw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/cssstyle": {
      "version": "2.3.0",
      "resolved": "https://registry.npmjs.org/cssstyle/-/cssstyle-2.3.0.tgz",
      "integrity": "sha512-AZL67abkUzIuvcHqk7c09cezpGNcxUxU4Ioi/05xHk4DQeTkWmGYftIE6ctU6AEt+Gn4n1lDStOtj7FKycP71A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "cssom": "~0.3.6"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/cssstyle/node_modules/cssom": {
      "version": "0.3.8",
      "resolved": "https://registry.npmjs.org/cssom/-/cssom-0.3.8.tgz",
      "integrity": "sha512-b0tGHbfegbhPJpxpiBPU2sCkigAqtM9O121le6bbOlgyV+NyGyCmVfJ6QW9eRjz8CpNfWEOYBIMIGRYkLwsIYg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/data-urls": {
      "version": "3.0.2",
      "resolved": "https://registry.npmjs.org/data-urls/-/data-urls-3.0.2.tgz",
      "integrity": "sha512-Jy/tj3ldjZJo63sVAvg6LHt2mHvl4V6AgRAmNDtLdm7faqtsx+aJG42rsyCo9JCoRVKwPFzKlIPx3DIibwSIaQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "abab": "^2.0.6",
        "whatwg-mimetype": "^3.0.0",
        "whatwg-url": "^11.0.0"
      },
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/debug": {
      "version": "4.4.3",
      "resolved": "https://registry.npmjs.org/debug/-/debug-4.4.3.tgz",
      "integrity": "sha512-RGwwWnwQvkVfavKVt22FGLw+xYSdzARwm0ru6DhTVA3umU5hZc28V3kO4stgYryrTlLpuvgI9GiijltAjNbcqA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ms": "^2.1.3"
      },
      "engines": {
        "node": ">=6.0"
      },
      "peerDependenciesMeta": {
        "supports-color": {
          "optional": true
        }
      }
    },
    "node_modules/decimal.js": {
      "version": "10.6.0",
      "resolved": "https://registry.npmjs.org/decimal.js/-/decimal.js-10.6.0.tgz",
      "integrity": "sha512-YpgQiITW3JXGntzdUmyUR1V812Hn8T1YVXhCu+wO3OpS4eU9l4YdD3qjyiKdV6mvV29zapkMeD390UVEf2lkUg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/dedent": {
      "version": "1.7.0",
      "resolved": "https://registry.npmjs.org/dedent/-/dedent-1.7.0.tgz",
      "integrity": "sha512-HGFtf8yhuhGhqO07SV79tRp+br4MnbdjeVxotpn1QBl30pcLLCQjX5b2295ll0fv8RKDKsmWYrl05usHM9CewQ==",
      "dev": true,
      "license": "MIT",
      "peerDependencies": {
        "babel-plugin-macros": "^3.1.0"
      },
      "peerDependenciesMeta": {
        "babel-plugin-macros": {
          "optional": true
        }
      }
    },
    "node_modules/deep-is": {
      "version": "0.1.4",
      "resolved": "https://registry.npmjs.org/deep-is/-/deep-is-0.1.4.tgz",
      "integrity": "sha512-oIPzksmTg4/MriiaYGO+okXDT7ztn/w3Eptv/+gSIdMdKsJo0u4CfYNFJPy+4SKMuCqGw2wxnA+URMg3t8a/bQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/deepmerge": {
      "version": "4.3.1",
      "resolved": "https://registry.npmjs.org/deepmerge/-/deepmerge-4.3.1.tgz",
      "integrity": "sha512-3sUqbMEc77XqpdNO7FRyRog+eW3ph+GYCbj+rK+uYyRMuwsVy0rMiVtPn+QJlKFvWP/1PYpapqYn0Me2knFn+A==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/delayed-stream": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/delayed-stream/-/delayed-stream-1.0.0.tgz",
      "integrity": "sha512-ZySD7Nf91aLB0RxL4KGrKHBXl7Eds1DAmEdcoVawXnLD7SDhpNgtuII2aAkg7a7QS41jxPSZ17p4VdGnMHk3MQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.4.0"
      }
    },
    "node_modules/detect-newline": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/detect-newline/-/detect-newline-3.1.0.tgz",
      "integrity": "sha512-TLz+x/vEXm/Y7P7wn1EJFNLxYpUD4TgMosxY6fAVJUnJMbupHBOncxyWUG9OpTaH9EBD7uFI5LfEgmMOc54DsA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/diff-sequences": {
      "version": "29.6.3",
      "resolved": "https://registry.npmjs.org/diff-sequences/-/diff-sequences-29.6.3.tgz",
      "integrity": "sha512-EjePK1srD3P08o2j4f0ExnylqRs5B9tJjcp9t1krH2qRi8CCdsYfwe9JgSLurFBWwq4uOlipzfk5fHNvwFKr8Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/doctrine": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/doctrine/-/doctrine-3.0.0.tgz",
      "integrity": "sha512-yS+Q5i3hBf7GBkd4KG8a7eBNNWNGLTaEwwYWUijIYM7zrlYDM0BFXHjjPWlWZ1Rg7UaddZeIDmi9jF3HmqiQ2w==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "esutils": "^2.0.2"
      },
      "engines": {
        "node": ">=6.0.0"
      }
    },
    "node_modules/domexception": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/domexception/-/domexception-4.0.0.tgz",
      "integrity": "sha512-A2is4PLG+eeSfoTMA95/s4pvAoSo2mKtiM5jlHkAVewmiO8ISFTFKZjH7UAM1Atli/OT/7JHOrJRJiMKUZKYBw==",
      "deprecated": "Use your platform's native DOMException instead",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "webidl-conversions": "^7.0.0"
      },
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/dunder-proto": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/dunder-proto/-/dunder-proto-1.0.1.tgz",
      "integrity": "sha512-KIN/nDJBQRcXw0MLVhZE9iQHmG68qAVIBg9CqmUYjmQIhgij9U5MFvrqkUL5FbtyyzZuOeOt0zdeRe4UY7ct+A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.1",
        "es-errors": "^1.3.0",
        "gopd": "^1.2.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/electron-to-chromium": {
      "version": "1.5.233",
      "resolved": "https://registry.npmjs.org/electron-to-chromium/-/electron-to-chromium-1.5.233.tgz",
      "integrity": "sha512-iUdTQSf7EFXsDdQsp8MwJz5SVk4APEFqXU/S47OtQ0YLqacSwPXdZ5vRlMX3neb07Cy2vgioNuRnWUXFwuslkg==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/emittery": {
      "version": "0.13.1",
      "resolved": "https://registry.npmjs.org/emittery/-/emittery-0.13.1.tgz",
      "integrity": "sha512-DeWwawk6r5yR9jFgnDKYt4sLS0LmHJJi3ZOnb5/JdbYwj3nW+FxQnHIjhBKz8YLC7oRNPVM9NQ47I3CVx34eqQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/sindresorhus/emittery?sponsor=1"
      }
    },
    "node_modules/emoji-regex": {
      "version": "8.0.0",
      "resolved": "https://registry.npmjs.org/emoji-regex/-/emoji-regex-8.0.0.tgz",
      "integrity": "sha512-MSjYzcWNOA0ewAHpz0MxpYFvwg6yjy1NG3xteoqz644VCo/RPgnr1/GGt+ic3iJTzQ8Eu3TdM14SawnVUmGE6A==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/entities": {
      "version": "6.0.1",
      "resolved": "https://registry.npmjs.org/entities/-/entities-6.0.1.tgz",
      "integrity": "sha512-aN97NXWF6AWBTahfVOIrB/NShkzi5H7F9r1s9mD3cDj4Ko5f2qhhVoYMibXF7GlLveb/D2ioWay8lxI97Ven3g==",
      "dev": true,
      "license": "BSD-2-Clause",
      "engines": {
        "node": ">=0.12"
      },
      "funding": {
        "url": "https://github.com/fb55/entities?sponsor=1"
      }
    },
    "node_modules/error-ex": {
      "version": "1.3.4",
      "resolved": "https://registry.npmjs.org/error-ex/-/error-ex-1.3.4.tgz",
      "integrity": "sha512-sqQamAnR14VgCr1A618A3sGrygcpK+HEbenA/HiEAkkUwcZIIB/tgWqHFxWgOyDh4nB4JCRimh79dR5Ywc9MDQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-arrayish": "^0.2.1"
      }
    },
    "node_modules/es-define-property": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/es-define-property/-/es-define-property-1.0.1.tgz",
      "integrity": "sha512-e3nRfgfUZ4rNGL232gUgX06QNyyez04KdjFrF+LTRoOXmrOgFKDg4BCdsjW8EnT69eqdYGmRpJwiPVYNrCaW3g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-errors": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/es-errors/-/es-errors-1.3.0.tgz",
      "integrity": "sha512-Zf5H2Kxt2xjTvbJvP2ZWLEICxA6j+hAmMzIlypy4xcBg1vKVnx89Wy0GbS+kf5cwCVFFzdCFh2XSCFNULS6csw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-object-atoms": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/es-object-atoms/-/es-object-atoms-1.1.1.tgz",
      "integrity": "sha512-FGgH2h8zKNim9ljj7dankFPcICIK9Cp5bm+c2gQSYePhpaG5+esrLODihIorn+Pe6FGJzWhXQotPv73jTaldXA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-set-tostringtag": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/es-set-tostringtag/-/es-set-tostringtag-2.1.0.tgz",
      "integrity": "sha512-j6vWzfrGVfyXxge+O0x5sh6cvxAog0a/4Rdd2K36zCMV5eJ+/+tOAngRO8cODMNWbVRdVlmGZQL2YS3yR8bIUA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "get-intrinsic": "^1.2.6",
        "has-tostringtag": "^1.0.2",
        "hasown": "^2.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/escalade": {
      "version": "3.2.0",
      "resolved": "https://registry.npmjs.org/escalade/-/escalade-3.2.0.tgz",
      "integrity": "sha512-WUj2qlxaQtO4g6Pq5c29GTcWGDyd8itL8zTlipgECz3JesAiiOKotd8JU6otB3PACgG6xkJUyVhboMS+bje/jA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/escape-string-regexp": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/escape-string-regexp/-/escape-string-regexp-2.0.0.tgz",
      "integrity": "sha512-UpzcLCXolUWcNu5HtVMHYdXJjArjsF9C0aNnquZYY4uW/Vu0miy5YoWvbV345HauVvcAUnpRuhMMcqTcGOY2+w==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/escodegen": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/escodegen/-/escodegen-2.1.0.tgz",
      "integrity": "sha512-2NlIDTwUWJN0mRPQOdtQBzbUHvdGY2P1VXSyU83Q3xKxM7WHX2Ql8dKq782Q9TgQUNOLEzEYu9bzLNj1q88I5w==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "esprima": "^4.0.1",
        "estraverse": "^5.2.0",
        "esutils": "^2.0.2"
      },
      "bin": {
        "escodegen": "bin/escodegen.js",
        "esgenerate": "bin/esgenerate.js"
      },
      "engines": {
        "node": ">=6.0"
      },
      "optionalDependencies": {
        "source-map": "~0.6.1"
      }
    },
    "node_modules/eslint": {
      "version": "8.57.1",
      "resolved": "https://registry.npmjs.org/eslint/-/eslint-8.57.1.tgz",
      "integrity": "sha512-ypowyDxpVSYpkXr9WPv2PAZCtNip1Mv5KTW0SCurXv/9iOpcrH9PaqUElksqEB6pChqHGDRCFTyrZlGhnLNGiA==",
      "deprecated": "This version is no longer supported. Please see https://eslint.org/version-support for other options.",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@eslint-community/eslint-utils": "^4.2.0",
        "@eslint-community/regexpp": "^4.6.1",
        "@eslint/eslintrc": "^2.1.4",
        "@eslint/js": "8.57.1",
        "@humanwhocodes/config-array": "^0.13.0",
        "@humanwhocodes/module-importer": "^1.0.1",
        "@nodelib/fs.walk": "^1.2.8",
        "@ungap/structured-clone": "^1.2.0",
        "ajv": "^6.12.4",
        "chalk": "^4.0.0",
        "cross-spawn": "^7.0.2",
        "debug": "^4.3.2",
        "doctrine": "^3.0.0",
        "escape-string-regexp": "^4.0.0",
        "eslint-scope": "^7.2.2",
        "eslint-visitor-keys": "^3.4.3",
        "espree": "^9.6.1",
        "esquery": "^1.4.2",
        "esutils": "^2.0.2",
        "fast-deep-equal": "^3.1.3",
        "file-entry-cache": "^6.0.1",
        "find-up": "^5.0.0",
        "glob-parent": "^6.0.2",
        "globals": "^13.19.0",
        "graphemer": "^1.4.0",
        "ignore": "^5.2.0",
        "imurmurhash": "^0.1.4",
        "is-glob": "^4.0.0",
        "is-path-inside": "^3.0.3",
        "js-yaml": "^4.1.0",
        "json-stable-stringify-without-jsonify": "^1.0.1",
        "levn": "^0.4.1",
        "lodash.merge": "^4.6.2",
        "minimatch": "^3.1.2",
        "natural-compare": "^1.4.0",
        "optionator": "^0.9.3",
        "strip-ansi": "^6.0.1",
        "text-table": "^0.2.0"
      },
      "bin": {
        "eslint": "bin/eslint.js"
      },
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/eslint-config-prettier": {
      "version": "9.1.2",
      "resolved": "https://registry.npmjs.org/eslint-config-prettier/-/eslint-config-prettier-9.1.2.tgz",
      "integrity": "sha512-iI1f+D2ViGn+uvv5HuHVUamg8ll4tN+JRHGc6IJi4TP9Kl976C57fzPXgseXNs8v0iA8aSJpHsTWjDb9QJamGQ==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "eslint-config-prettier": "bin/cli.js"
      },
      "peerDependencies": {
        "eslint": ">=7.0.0"
      }
    },
    "node_modules/eslint-scope": {
      "version": "7.2.2",
      "resolved": "https://registry.npmjs.org/eslint-scope/-/eslint-scope-7.2.2.tgz",
      "integrity": "sha512-dOt21O7lTMhDM+X9mB4GX+DZrZtCUJPL/wlcTqxyrx5IvO0IYtILdtrQGQp+8n5S0gwSVmOf9NQrjMOgfQZlIg==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "esrecurse": "^4.3.0",
        "estraverse": "^5.2.0"
      },
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/eslint-visitor-keys": {
      "version": "3.4.3",
      "resolved": "https://registry.npmjs.org/eslint-visitor-keys/-/eslint-visitor-keys-3.4.3.tgz",
      "integrity": "sha512-wpc+LXeiyiisxPlEkUzU6svyS1frIO3Mgxj1fdy7Pm8Ygzguax2N3Fa/D/ag1WqbOprdI+uY6wMUl8/a2G+iag==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/eslint/node_modules/argparse": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/argparse/-/argparse-2.0.1.tgz",
      "integrity": "sha512-8+9WqebbFzpX9OR+Wa6O29asIogeRMzcGtAINdpMHHyAg10f05aSFVBbcEqGf/PXw1EjAZ+q2/bEBg3DvurK3Q==",
      "dev": true,
      "license": "Python-2.0"
    },
    "node_modules/eslint/node_modules/escape-string-regexp": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/escape-string-regexp/-/escape-string-regexp-4.0.0.tgz",
      "integrity": "sha512-TtpcNJ3XAzx3Gq8sWRzJaVajRs0uVxA2YAkdb1jm2YkPz4G6egUFAyA3n5vtEIZefPk5Wa4UXbKuS5fKkJWdgA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/eslint/node_modules/find-up": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/find-up/-/find-up-5.0.0.tgz",
      "integrity": "sha512-78/PXT1wlLLDgTzDs7sjq9hzz0vXD+zn+7wypEe4fXQxCmdmqfGsEPQxmiCSQI3ajFV91bVSsvNtrJRiW6nGng==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "locate-path": "^6.0.0",
        "path-exists": "^4.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/eslint/node_modules/js-yaml": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/js-yaml/-/js-yaml-4.1.0.tgz",
      "integrity": "sha512-wpxZs9NoxZaJESJGIZTyDEaYpl0FKSA+FB9aJiyemKhMwkxQg63h4T1KJgUGHpTqPDNRcmmYLugrRjJlBtWvRA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "argparse": "^2.0.1"
      },
      "bin": {
        "js-yaml": "bin/js-yaml.js"
      }
    },
    "node_modules/eslint/node_modules/locate-path": {
      "version": "6.0.0",
      "resolved": "https://registry.npmjs.org/locate-path/-/locate-path-6.0.0.tgz",
      "integrity": "sha512-iPZK6eYjbxRu3uB4/WZ3EsEIMJFMqAoopl3R+zuq0UjcAm/MO6KCweDgPfP3elTztoKP3KtnVHxTn2NHBSDVUw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "p-locate": "^5.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/eslint/node_modules/p-locate": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/p-locate/-/p-locate-5.0.0.tgz",
      "integrity": "sha512-LaNjtRWUBY++zB5nE/NwcaoMylSPk+S+ZHNB1TzdbMJMny6dynpAGt7X/tl/QYq3TIeE6nxHppbo2LGymrG5Pw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "p-limit": "^3.0.2"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/espree": {
      "version": "9.6.1",
      "resolved": "https://registry.npmjs.org/espree/-/espree-9.6.1.tgz",
      "integrity": "sha512-oruZaFkjorTpF32kDSI5/75ViwGeZginGGy2NoOSg3Q9bnwlnmDm4HLnkl0RE3n+njDXR037aY1+x58Z/zFdwQ==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "acorn": "^8.9.0",
        "acorn-jsx": "^5.3.2",
        "eslint-visitor-keys": "^3.4.1"
      },
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/esprima": {
      "version": "4.0.1",
      "resolved": "https://registry.npmjs.org/esprima/-/esprima-4.0.1.tgz",
      "integrity": "sha512-eGuFFw7Upda+g4p+QHvnW0RyTX/SVeJBDM/gCtMARO0cLuT2HcEKnTPvhjV6aGeqrCB/sbNop0Kszm0jsaWU4A==",
      "dev": true,
      "license": "BSD-2-Clause",
      "bin": {
        "esparse": "bin/esparse.js",
        "esvalidate": "bin/esvalidate.js"
      },
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/esquery": {
      "version": "1.6.0",
      "resolved": "https://registry.npmjs.org/esquery/-/esquery-1.6.0.tgz",
      "integrity": "sha512-ca9pw9fomFcKPvFLXhBKUK90ZvGibiGOvRJNbjljY7s7uq/5YO4BOzcYtJqExdx99rF6aAcnRxHmcUHcz6sQsg==",
      "dev": true,
      "license": "BSD-3-Clause",
      "dependencies": {
        "estraverse": "^5.1.0"
      },
      "engines": {
        "node": ">=0.10"
      }
    },
    "node_modules/esrecurse": {
      "version": "4.3.0",
      "resolved": "https://registry.npmjs.org/esrecurse/-/esrecurse-4.3.0.tgz",
      "integrity": "sha512-KmfKL3b6G+RXvP8N1vr3Tq1kL/oCFgn2NYXEtqP8/L3pKapUA4G8cFVaoF3SU323CD4XypR/ffioHmkti6/Tag==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "estraverse": "^5.2.0"
      },
      "engines": {
        "node": ">=4.0"
      }
    },
    "node_modules/estraverse": {
      "version": "5.3.0",
      "resolved": "https://registry.npmjs.org/estraverse/-/estraverse-5.3.0.tgz",
      "integrity": "sha512-MMdARuVEQziNTeJD8DgMqmhwR11BRQ/cBP+pLtYdSTnf3MIO8fFeiINEbX36ZdNlfU/7A9f3gUw49B3oQsvwBA==",
      "dev": true,
      "license": "BSD-2-Clause",
      "engines": {
        "node": ">=4.0"
      }
    },
    "node_modules/esutils": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/esutils/-/esutils-2.0.3.tgz",
      "integrity": "sha512-kVscqXk4OCp68SZ0dkgEKVi6/8ij300KBWTJq32P/dYeWTSwK41WyTxalN1eRmA5Z9UU/LX9D7FWSmV9SAYx6g==",
      "dev": true,
      "license": "BSD-2-Clause",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/execa": {
      "version": "5.1.1",
      "resolved": "https://registry.npmjs.org/execa/-/execa-5.1.1.tgz",
      "integrity": "sha512-8uSpZZocAZRBAPIEINJj3Lo9HyGitllczc27Eh5YYojjMFMn8yHMDMaUHE2Jqfq05D/wucwI4JGURyXt1vchyg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "cross-spawn": "^7.0.3",
        "get-stream": "^6.0.0",
        "human-signals": "^2.1.0",
        "is-stream": "^2.0.0",
        "merge-stream": "^2.0.0",
        "npm-run-path": "^4.0.1",
        "onetime": "^5.1.2",
        "signal-exit": "^3.0.3",
        "strip-final-newline": "^2.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sindresorhus/execa?sponsor=1"
      }
    },
    "node_modules/exit": {
      "version": "0.1.2",
      "resolved": "https://registry.npmjs.org/exit/-/exit-0.1.2.tgz",
      "integrity": "sha512-Zk/eNKV2zbjpKzrsQ+n1G6poVbErQxJ0LBOJXaKZ1EViLzH+hrLu9cdXI4zw9dBQJslwBEpbQ2P1oS7nDxs6jQ==",
      "dev": true,
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/expect": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/expect/-/expect-29.7.0.tgz",
      "integrity": "sha512-2Zks0hf1VLFYI1kbh0I5jP3KHHyCHpkfyHBzsSXRFgl/Bg9mWYfMW8oD+PdMPlEwy5HNsR9JutYy6pMeOh61nw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/expect-utils": "^29.7.0",
        "jest-get-type": "^29.6.3",
        "jest-matcher-utils": "^29.7.0",
        "jest-message-util": "^29.7.0",
        "jest-util": "^29.7.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/fast-deep-equal": {
      "version": "3.1.3",
      "resolved": "https://registry.npmjs.org/fast-deep-equal/-/fast-deep-equal-3.1.3.tgz",
      "integrity": "sha512-f3qQ9oQy9j2AhBe/H9VC91wLmKBCCU/gDOnKNAYG5hswO7BLKj09Hc5HYNz9cGI++xlpDCIgDaitVs03ATR84Q==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/fast-json-stable-stringify": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/fast-json-stable-stringify/-/fast-json-stable-stringify-2.1.0.tgz",
      "integrity": "sha512-lhd/wF+Lk98HZoTCtlVraHtfh5XYijIjalXck7saUtuanSDyLMxnHhSXEDJqHxD7msR8D0uCmqlkwjCV8xvwHw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/fast-levenshtein": {
      "version": "2.0.6",
      "resolved": "https://registry.npmjs.org/fast-levenshtein/-/fast-levenshtein-2.0.6.tgz",
      "integrity": "sha512-DCXu6Ifhqcks7TZKY3Hxp3y6qphY5SJZmrWMDrKcERSOXWQdMhU9Ig/PYrzyw/ul9jOIyh0N4M0tbC5hodg8dw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/fastq": {
      "version": "1.19.1",
      "resolved": "https://registry.npmjs.org/fastq/-/fastq-1.19.1.tgz",
      "integrity": "sha512-GwLTyxkCXjXbxqIhTsMI2Nui8huMPtnxg7krajPJAjnEG/iiOS7i+zCtWGZR9G0NBKbXKh6X9m9UIsYX/N6vvQ==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "reusify": "^1.0.4"
      }
    },
    "node_modules/fb-watchman": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/fb-watchman/-/fb-watchman-2.0.2.tgz",
      "integrity": "sha512-p5161BqbuCaSnB8jIbzQHOlpgsPmK5rJVDfDKO91Axs5NC1uu3HRQm6wt9cd9/+GtQQIO53JdGXXoyDpTAsgYA==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "bser": "2.1.1"
      }
    },
    "node_modules/file-entry-cache": {
      "version": "6.0.1",
      "resolved": "https://registry.npmjs.org/file-entry-cache/-/file-entry-cache-6.0.1.tgz",
      "integrity": "sha512-7Gps/XWymbLk2QLYK4NzpMOrYjMhdIxXuIvy2QBsLE6ljuodKvdkWs/cpyJJ3CVIVpH0Oi1Hvg1ovbMzLdFBBg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "flat-cache": "^3.0.4"
      },
      "engines": {
        "node": "^10.12.0 || >=12.0.0"
      }
    },
    "node_modules/fill-range": {
      "version": "7.1.1",
      "resolved": "https://registry.npmjs.org/fill-range/-/fill-range-7.1.1.tgz",
      "integrity": "sha512-YsGpe3WHLK8ZYi4tWDg2Jy3ebRz2rXowDxnld4bkQB00cc/1Zw9AWnC0i9ztDJitivtQvaI9KaLyKrc+hBW0yg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "to-regex-range": "^5.0.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/find-up": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/find-up/-/find-up-4.1.0.tgz",
      "integrity": "sha512-PpOwAdQ/YlXQ2vj8a3h8IipDuYRi3wceVQQGYWxNINccq40Anw7BlsEXCMbt1Zt+OLA6Fq9suIpIWD0OsnISlw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "locate-path": "^5.0.0",
        "path-exists": "^4.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/flat-cache": {
      "version": "3.2.0",
      "resolved": "https://registry.npmjs.org/flat-cache/-/flat-cache-3.2.0.tgz",
      "integrity": "sha512-CYcENa+FtcUKLmhhqyctpclsq7QF38pKjZHsGNiSQF5r4FtoKDWabFDl3hzaEQMvT1LHEysw5twgLvpYYb4vbw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "flatted": "^3.2.9",
        "keyv": "^4.5.3",
        "rimraf": "^3.0.2"
      },
      "engines": {
        "node": "^10.12.0 || >=12.0.0"
      }
    },
    "node_modules/flatted": {
      "version": "3.3.3",
      "resolved": "https://registry.npmjs.org/flatted/-/flatted-3.3.3.tgz",
      "integrity": "sha512-GX+ysw4PBCz0PzosHDepZGANEuFCMLrnRTiEy9McGjmkCQYwRq4A/X786G/fjM/+OjsWSU1ZrY5qyARZmO/uwg==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/form-data": {
      "version": "4.0.4",
      "resolved": "https://registry.npmjs.org/form-data/-/form-data-4.0.4.tgz",
      "integrity": "sha512-KrGhL9Q4zjj0kiUt5OO4Mr/A/jlI2jDYs5eHBpYHPcBEVSiipAvn2Ko2HnPe20rmcuuvMHNdZFp+4IlGTMF0Ow==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "asynckit": "^0.4.0",
        "combined-stream": "^1.0.8",
        "es-set-tostringtag": "^2.1.0",
        "hasown": "^2.0.2",
        "mime-types": "^2.1.12"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/fs.realpath": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/fs.realpath/-/fs.realpath-1.0.0.tgz",
      "integrity": "sha512-OO0pH2lK6a0hZnAdau5ItzHPI6pUlvI7jMVnxUQRtw4owF2wk8lOSabtGDCTP4Ggrg2MbGnWO9X8K1t4+fGMDw==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/fsevents": {
      "version": "2.3.3",
      "resolved": "https://registry.npmjs.org/fsevents/-/fsevents-2.3.3.tgz",
      "integrity": "sha512-5xoDfX+fL7faATnagmWPpbFtwh/R77WmMMqqHGS65C3vvB0YHrgF+B1YmZ3441tMj5n63k0212XNoJwzlhffQw==",
      "dev": true,
      "hasInstallScript": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": "^8.16.0 || ^10.6.0 || >=11.0.0"
      }
    },
    "node_modules/function-bind": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/function-bind/-/function-bind-1.1.2.tgz",
      "integrity": "sha512-7XHNxH7qX9xG5mIwxkhumTox/MIRNcOgDrxWsMt2pAr23WHp6MrRlN7FBSFpCpr+oVO0F744iUgR82nJMfG2SA==",
      "dev": true,
      "license": "MIT",
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/gensync": {
      "version": "1.0.0-beta.2",
      "resolved": "https://registry.npmjs.org/gensync/-/gensync-1.0.0-beta.2.tgz",
      "integrity": "sha512-3hN7NaskYvMDLQY55gnW3NQ+mesEAepTqlg+VEbj7zzqEMBVNhzcGYYeqFo/TlYz6eQiFcp1HcsCZO+nGgS8zg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/get-caller-file": {
      "version": "2.0.5",
      "resolved": "https://registry.npmjs.org/get-caller-file/-/get-caller-file-2.0.5.tgz",
      "integrity": "sha512-DyFP3BM/3YHTQOCUL/w0OZHR0lpKeGrxotcHWcqNEdnltqFwXVfhEBQ94eIo34AfQpo0rGki4cyIiftY06h2Fg==",
      "dev": true,
      "license": "ISC",
      "engines": {
        "node": "6.* || 8.* || >= 10.*"
      }
    },
    "node_modules/get-intrinsic": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/get-intrinsic/-/get-intrinsic-1.3.0.tgz",
      "integrity": "sha512-9fSjSaos/fRIVIp+xSJlE6lfwhES7LNtKaCBIamHsjr2na1BiABJPo0mOjjz8GJDURarmCPGqaiVg5mfjb98CQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.2",
        "es-define-property": "^1.0.1",
        "es-errors": "^1.3.0",
        "es-object-atoms": "^1.1.1",
        "function-bind": "^1.1.2",
        "get-proto": "^1.0.1",
        "gopd": "^1.2.0",
        "has-symbols": "^1.1.0",
        "hasown": "^2.0.2",
        "math-intrinsics": "^1.1.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/get-package-type": {
      "version": "0.1.0",
      "resolved": "https://registry.npmjs.org/get-package-type/-/get-package-type-0.1.0.tgz",
      "integrity": "sha512-pjzuKtY64GYfWizNAJ0fr9VqttZkNiK2iS430LtIHzjBEr6bX8Am2zm4sW4Ro5wjWW5cAlRL1qAMTcXbjNAO2Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8.0.0"
      }
    },
    "node_modules/get-proto": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/get-proto/-/get-proto-1.0.1.tgz",
      "integrity": "sha512-sTSfBjoXBp89JvIKIefqw7U2CCebsc74kiY6awiGogKtoSGbgjYE/G/+l9sF3MWFPNc9IcoOC4ODfKHfxFmp0g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "dunder-proto": "^1.0.1",
        "es-object-atoms": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/get-stream": {
      "version": "6.0.1",
      "resolved": "https://registry.npmjs.org/get-stream/-/get-stream-6.0.1.tgz",
      "integrity": "sha512-ts6Wi+2j3jQjqi70w5AlN8DFnkSwC+MqmxEzdEALB2qXZYV3X/b1CTfgPLGJNMeAWxdPfU8FO1ms3NUfaHCPYg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/glob": {
      "version": "7.2.3",
      "resolved": "https://registry.npmjs.org/glob/-/glob-7.2.3.tgz",
      "integrity": "sha512-nFR0zLpU2YCaRxwoCJvL6UvCH2JFyFVIvwTLsIf21AuHlMskA1hhTdk+LlYJtOlYt9v6dvszD2BGRqBL+iQK9Q==",
      "deprecated": "Glob versions prior to v9 are no longer supported",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "fs.realpath": "^1.0.0",
        "inflight": "^1.0.4",
        "inherits": "2",
        "minimatch": "^3.1.1",
        "once": "^1.3.0",
        "path-is-absolute": "^1.0.0"
      },
      "engines": {
        "node": "*"
      },
      "funding": {
        "url": "https://github.com/sponsors/isaacs"
      }
    },
    "node_modules/glob-parent": {
      "version": "6.0.2",
      "resolved": "https://registry.npmjs.org/glob-parent/-/glob-parent-6.0.2.tgz",
      "integrity": "sha512-XxwI8EOhVQgWp6iDL+3b0r86f4d6AX6zSU55HfB4ydCEuXLXc5FcYeOu+nnGftS4TEju/11rt4KJPTMgbfmv4A==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "is-glob": "^4.0.3"
      },
      "engines": {
        "node": ">=10.13.0"
      }
    },
    "node_modules/globals": {
      "version": "13.24.0",
      "resolved": "https://registry.npmjs.org/globals/-/globals-13.24.0.tgz",
      "integrity": "sha512-AhO5QUcj8llrbG09iWhPU2B204J1xnPeL8kQmVorSsy+Sjj1sk8gIyh6cUocGmH4L0UuhAJy+hJMRA4mgA4mFQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "type-fest": "^0.20.2"
      },
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/globals/node_modules/type-fest": {
      "version": "0.20.2",
      "resolved": "https://registry.npmjs.org/type-fest/-/type-fest-0.20.2.tgz",
      "integrity": "sha512-Ne+eE4r0/iWnpAxD852z3A+N0Bt5RN//NjJwRd2VFHEmrywxf5vsZlh4R6lixl6B+wz/8d+maTSAkN1FIkI3LQ==",
      "dev": true,
      "license": "(MIT OR CC0-1.0)",
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/gopd": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/gopd/-/gopd-1.2.0.tgz",
      "integrity": "sha512-ZUKRh6/kUFoAiTAtTYPZJ3hw9wNxx+BIBOijnlG9PnrJsCcSjs1wyyD6vJpaYtgnzDrKYRSqf3OO6Rfa93xsRg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/graceful-fs": {
      "version": "4.2.11",
      "resolved": "https://registry.npmjs.org/graceful-fs/-/graceful-fs-4.2.11.tgz",
      "integrity": "sha512-RbJ5/jmFcNNCcDV5o9eTnBLJ/HszWV0P73bc+Ff4nS/rJj+YaS6IGyiOL0VoBYX+l1Wrl3k63h/KrH+nhJ0XvQ==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/graphemer": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/graphemer/-/graphemer-1.4.0.tgz",
      "integrity": "sha512-EtKwoO6kxCL9WO5xipiHTZlSzBm7WLT627TqC/uVRd0HKmq8NXyebnNYxDoBi7wt8eTWrUrKXCOVaFq9x1kgag==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/has-flag": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/has-flag/-/has-flag-4.0.0.tgz",
      "integrity": "sha512-EykJT/Q1KjTWctppgIAgfSO0tKVuZUjhgMr17kqTumMl6Afv3EISleU7qZUzoXDFTAHTDC4NOoG/ZxU3EvlMPQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/has-symbols": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/has-symbols/-/has-symbols-1.1.0.tgz",
      "integrity": "sha512-1cDNdwJ2Jaohmb3sg4OmKaMBwuC48sYni5HUw2DvsC8LjGTLK9h+eb1X6RyuOHe4hT0ULCW68iomhjUoKUqlPQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/has-tostringtag": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/has-tostringtag/-/has-tostringtag-1.0.2.tgz",
      "integrity": "sha512-NqADB8VjPFLM2V0VvHUewwwsw0ZWBaIdgo+ieHtK3hasLz4qeCRjYcqfB6AQrBggRKppKF8L52/VqdVsO47Dlw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "has-symbols": "^1.0.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/hasown": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/hasown/-/hasown-2.0.2.tgz",
      "integrity": "sha512-0hJU9SCPvmMzIBdZFqNPXWa6dqh7WdH0cII9y+CyS8rG3nL48Bclra9HmKhVVUHyPWNH5Y7xDwAB7bfgSjkUMQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "function-bind": "^1.1.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/html-encoding-sniffer": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/html-encoding-sniffer/-/html-encoding-sniffer-3.0.0.tgz",
      "integrity": "sha512-oWv4T4yJ52iKrufjnyZPkrN0CH3QnrUqdB6In1g5Fe1mia8GmF36gnfNySxoZtxD5+NmYw1EElVXiBk93UeskA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "whatwg-encoding": "^2.0.0"
      },
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/html-escaper": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/html-escaper/-/html-escaper-2.0.2.tgz",
      "integrity": "sha512-H2iMtd0I4Mt5eYiapRdIDjp+XzelXQ0tFE4JS7YFwFevXXMmOp9myNrUvCg0D6ws8iqkRPBfKHgbwig1SmlLfg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/http-proxy-agent": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/http-proxy-agent/-/http-proxy-agent-5.0.0.tgz",
      "integrity": "sha512-n2hY8YdoRE1i7r6M0w9DIw5GgZN0G25P8zLCRQ8rjXtTU3vsNFBI/vWK/UIeE6g5MUUz6avwAPXmL6Fy9D/90w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@tootallnate/once": "2",
        "agent-base": "6",
        "debug": "4"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/https-proxy-agent": {
      "version": "5.0.1",
      "resolved": "https://registry.npmjs.org/https-proxy-agent/-/https-proxy-agent-5.0.1.tgz",
      "integrity": "sha512-dFcAjpTQFgoLMzC2VwU+C/CbS7uRL0lWmxDITmqm7C+7F0Odmj6s9l6alZc6AELXhrnggM2CeWSXHGOdX2YtwA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "agent-base": "6",
        "debug": "4"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/human-signals": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/human-signals/-/human-signals-2.1.0.tgz",
      "integrity": "sha512-B4FFZ6q/T2jhhksgkbEW3HBvWIfDW85snkQgawt07S7J5QXTk6BkNV+0yAeZrM5QpMAdYlocGoljn0sJ/WQkFw==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": ">=10.17.0"
      }
    },
    "node_modules/iconv-lite": {
      "version": "0.6.3",
      "resolved": "https://registry.npmjs.org/iconv-lite/-/iconv-lite-0.6.3.tgz",
      "integrity": "sha512-4fCk79wshMdzMp2rH06qWrJE4iolqLhCUH+OiuIgU++RB0+94NlDL81atO7GX55uUKueo0txHNtvEyI6D7WdMw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "safer-buffer": ">= 2.1.2 < 3.0.0"
      },
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/ignore": {
      "version": "5.3.2",
      "resolved": "https://registry.npmjs.org/ignore/-/ignore-5.3.2.tgz",
      "integrity": "sha512-hsBTNUqQTDwkWtcdYI2i06Y/nUBEsNEDJKjWdigLvegy8kDuJAS8uRlpkkcQpyEXL0Z/pjDy5HBmMjRCJ2gq+g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 4"
      }
    },
    "node_modules/import-fresh": {
      "version": "3.3.1",
      "resolved": "https://registry.npmjs.org/import-fresh/-/import-fresh-3.3.1.tgz",
      "integrity": "sha512-TR3KfrTZTYLPB6jUjfx6MF9WcWrHL9su5TObK4ZkYgBdWKPOFoSoQIdEuTuR82pmtxH2spWG9h6etwfr1pLBqQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "parent-module": "^1.0.0",
        "resolve-from": "^4.0.0"
      },
      "engines": {
        "node": ">=6"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/import-fresh/node_modules/resolve-from": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/resolve-from/-/resolve-from-4.0.0.tgz",
      "integrity": "sha512-pb/MYmXstAkysRFx8piNI1tGFNQIFA3vkE3Gq4EuA1dF6gHp/+vgZqsCGJapvy8N3Q+4o7FwvquPJcnZ7RYy4g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/import-local": {
      "version": "3.2.0",
      "resolved": "https://registry.npmjs.org/import-local/-/import-local-3.2.0.tgz",
      "integrity": "sha512-2SPlun1JUPWoM6t3F0dw0FkCF/jWY8kttcY4f599GLTSjh2OCuuhdTkJQsEcZzBqbXZGKMK2OqW1oZsjtf/gQA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "pkg-dir": "^4.2.0",
        "resolve-cwd": "^3.0.0"
      },
      "bin": {
        "import-local-fixture": "fixtures/cli.js"
      },
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/imurmurhash": {
      "version": "0.1.4",
      "resolved": "https://registry.npmjs.org/imurmurhash/-/imurmurhash-0.1.4.tgz",
      "integrity": "sha512-JmXMZ6wuvDmLiHEml9ykzqO6lwFbof0GG4IkcGaENdCRDDmMVnny7s5HsIgHCbaq0w2MyPhDqkhTUgS2LU2PHA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.8.19"
      }
    },
    "node_modules/inflight": {
      "version": "1.0.6",
      "resolved": "https://registry.npmjs.org/inflight/-/inflight-1.0.6.tgz",
      "integrity": "sha512-k92I/b08q4wvFscXCLvqfsHCrjrF7yiXsQuIVvVE7N82W3+aqpzuUdBbfhWcy/FZR3/4IgflMgKLOsvPDrGCJA==",
      "deprecated": "This module is not supported, and leaks memory. Do not use it. Check out lru-cache if you want a good and tested way to coalesce async requests by a key value, which is much more comprehensive and powerful.",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "once": "^1.3.0",
        "wrappy": "1"
      }
    },
    "node_modules/inherits": {
      "version": "2.0.4",
      "resolved": "https://registry.npmjs.org/inherits/-/inherits-2.0.4.tgz",
      "integrity": "sha512-k/vGaX4/Yla3WzyMCvTQOXYeIHvqOKtnqBduzTHpzpQZzAskKMhZ2K+EnBiSM9zGSoIFeMpXKxa4dYeZIQqewQ==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/is-arrayish": {
      "version": "0.2.1",
      "resolved": "https://registry.npmjs.org/is-arrayish/-/is-arrayish-0.2.1.tgz",
      "integrity": "sha512-zz06S8t0ozoDXMG+ube26zeCTNXcKIPJZJi8hBrF4idCLms4CG9QtK7qBl1boi5ODzFpjswb5JPmHCbMpjaYzg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/is-core-module": {
      "version": "2.16.1",
      "resolved": "https://registry.npmjs.org/is-core-module/-/is-core-module-2.16.1.tgz",
      "integrity": "sha512-UfoeMA6fIJ8wTYFEUjelnaGI67v6+N7qXJEvQuIGa99l4xsCruSYOVSQ0uPANn4dAzm8lkYPaKLrrijLq7x23w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "hasown": "^2.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-extglob": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/is-extglob/-/is-extglob-2.1.1.tgz",
      "integrity": "sha512-SbKbANkN603Vi4jEZv49LeVJMn4yGwsbzZworEoyEiutsN3nJYdbO36zfhGJ6QEDpOZIFkDtnq5JRxmvl3jsoQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/is-fullwidth-code-point": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/is-fullwidth-code-point/-/is-fullwidth-code-point-3.0.0.tgz",
      "integrity": "sha512-zymm5+u+sCsSWyD9qNaejV3DFvhCKclKdizYaJUuHA83RLjb7nSuGnddCHGv0hk+KY7BMAlsWeK4Ueg6EV6XQg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/is-generator-fn": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/is-generator-fn/-/is-generator-fn-2.1.0.tgz",
      "integrity": "sha512-cTIB4yPYL/Grw0EaSzASzg6bBy9gqCofvWN8okThAYIxKJZC+udlRAmGbM0XLeniEJSs8uEgHPGuHSe1XsOLSQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/is-glob": {
      "version": "4.0.3",
      "resolved": "https://registry.npmjs.org/is-glob/-/is-glob-4.0.3.tgz",
      "integrity": "sha512-xelSayHH36ZgE7ZWhli7pW34hNbNl8Ojv5KVmkJD4hBdD3th8Tfk9vYasLM+mXWOZhFkgZfxhLSnrwRr4elSSg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-extglob": "^2.1.1"
      },
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/is-number": {
      "version": "7.0.0",
      "resolved": "https://registry.npmjs.org/is-number/-/is-number-7.0.0.tgz",
      "integrity": "sha512-41Cifkg6e8TylSpdtTpeLVMqvSBEVzTttHvERD741+pnZ8ANv0004MRL43QKPDlK9cGvNp6NZWZUBlbGXYxxng==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.12.0"
      }
    },
    "node_modules/is-path-inside": {
      "version": "3.0.3",
      "resolved": "https://registry.npmjs.org/is-path-inside/-/is-path-inside-3.0.3.tgz",
      "integrity": "sha512-Fd4gABb+ycGAmKou8eMftCupSir5lRxqf4aD/vd0cD2qc4HL07OjCeuHMr8Ro4CoMaeCKDB0/ECBOVWjTwUvPQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/is-potential-custom-element-name": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/is-potential-custom-element-name/-/is-potential-custom-element-name-1.0.1.tgz",
      "integrity": "sha512-bCYeRA2rVibKZd+s2625gGnGF/t7DSqDs4dP7CrLA1m7jKWz6pps0LpYLJN8Q64HtmPKJ1hrN3nzPNKFEKOUiQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/is-stream": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/is-stream/-/is-stream-2.0.1.tgz",
      "integrity": "sha512-hFoiJiTl63nn+kstHGBtewWSKnQLpyb155KHheA1l39uvtO9nWIop1p3udqPcUd/xbF1VLMO4n7OI6p7RbngDg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/isexe": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/isexe/-/isexe-2.0.0.tgz",
      "integrity": "sha512-RHxMLp9lnKHGHRng9QFhRCMbYAcVpn69smSGcq3f36xjgVVWThj4qqLbTLlq7Ssj8B+fIQ1EuCEGI2lKsyQeIw==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/istanbul-lib-coverage": {
      "version": "3.2.2",
      "resolved": "https://registry.npmjs.org/istanbul-lib-coverage/-/istanbul-lib-coverage-3.2.2.tgz",
      "integrity": "sha512-O8dpsF+r0WV/8MNRKfnmrtCWhuKjxrq2w+jpzBL5UZKTi2LeVWnWOmWRxFlesJONmc+wLAGvKQZEOanko0LFTg==",
      "dev": true,
      "license": "BSD-3-Clause",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/istanbul-lib-instrument": {
      "version": "5.2.1",
      "resolved": "https://registry.npmjs.org/istanbul-lib-instrument/-/istanbul-lib-instrument-5.2.1.tgz",
      "integrity": "sha512-pzqtp31nLv/XFOzXGuvhCb8qhjmTVo5vjVk19XE4CRlSWz0KoeJ3bw9XsA7nOp9YBf4qHjwBxkDzKcME/J29Yg==",
      "dev": true,
      "license": "BSD-3-Clause",
      "dependencies": {
        "@babel/core": "^7.12.3",
        "@babel/parser": "^7.14.7",
        "@istanbuljs/schema": "^0.1.2",
        "istanbul-lib-coverage": "^3.2.0",
        "semver": "^6.3.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/istanbul-lib-report": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/istanbul-lib-report/-/istanbul-lib-report-3.0.1.tgz",
      "integrity": "sha512-GCfE1mtsHGOELCU8e/Z7YWzpmybrx/+dSTfLrvY8qRmaY6zXTKWn6WQIjaAFw069icm6GVMNkgu0NzI4iPZUNw==",
      "dev": true,
      "license": "BSD-3-Clause",
      "dependencies": {
        "istanbul-lib-coverage": "^3.0.0",
        "make-dir": "^4.0.0",
        "supports-color": "^7.1.0"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/istanbul-lib-source-maps": {
      "version": "4.0.1",
      "resolved": "https://registry.npmjs.org/istanbul-lib-source-maps/-/istanbul-lib-source-maps-4.0.1.tgz",
      "integrity": "sha512-n3s8EwkdFIJCG3BPKBYvskgXGoy88ARzvegkitk60NxRdwltLOTaH7CUiMRXvwYorl0Q712iEjcWB+fK/MrWVw==",
      "dev": true,
      "license": "BSD-3-Clause",
      "dependencies": {
        "debug": "^4.1.1",
        "istanbul-lib-coverage": "^3.0.0",
        "source-map": "^0.6.1"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/istanbul-reports": {
      "version": "3.2.0",
      "resolved": "https://registry.npmjs.org/istanbul-reports/-/istanbul-reports-3.2.0.tgz",
      "integrity": "sha512-HGYWWS/ehqTV3xN10i23tkPkpH46MLCIMFNCaaKNavAXTF1RkqxawEPtnjnGZ6XKSInBKkiOA5BKS+aZiY3AvA==",
      "dev": true,
      "license": "BSD-3-Clause",
      "dependencies": {
        "html-escaper": "^2.0.0",
        "istanbul-lib-report": "^3.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/jest": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest/-/jest-29.7.0.tgz",
      "integrity": "sha512-NIy3oAFp9shda19hy4HK0HRTWKtPJmGdnvywu01nOqNC2vZg+Z+fvJDxpMQA88eb2I9EcafcdjYgsDthnYTvGw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/core": "^29.7.0",
        "@jest/types": "^29.6.3",
        "import-local": "^3.0.2",
        "jest-cli": "^29.7.0"
      },
      "bin": {
        "jest": "bin/jest.js"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      },
      "peerDependencies": {
        "node-notifier": "^8.0.1 || ^9.0.0 || ^10.0.0"
      },
      "peerDependenciesMeta": {
        "node-notifier": {
          "optional": true
        }
      }
    },
    "node_modules/jest-changed-files": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-changed-files/-/jest-changed-files-29.7.0.tgz",
      "integrity": "sha512-fEArFiwf1BpQ+4bXSprcDc3/x4HSzL4al2tozwVpDFpsxALjLYdyiIK4e5Vz66GQJIbXJ82+35PtysofptNX2w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "execa": "^5.0.0",
        "jest-util": "^29.7.0",
        "p-limit": "^3.1.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-circus": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-circus/-/jest-circus-29.7.0.tgz",
      "integrity": "sha512-3E1nCMgipcTkCocFwM90XXQab9bS+GMsjdpmPrlelaxwD93Ad8iVEjX/vvHPdLPnFf+L40u+5+iutRdA1N9myw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/environment": "^29.7.0",
        "@jest/expect": "^29.7.0",
        "@jest/test-result": "^29.7.0",
        "@jest/types": "^29.6.3",
        "@types/node": "*",
        "chalk": "^4.0.0",
        "co": "^4.6.0",
        "dedent": "^1.0.0",
        "is-generator-fn": "^2.0.0",
        "jest-each": "^29.7.0",
        "jest-matcher-utils": "^29.7.0",
        "jest-message-util": "^29.7.0",
        "jest-runtime": "^29.7.0",
        "jest-snapshot": "^29.7.0",
        "jest-util": "^29.7.0",
        "p-limit": "^3.1.0",
        "pretty-format": "^29.7.0",
        "pure-rand": "^6.0.0",
        "slash": "^3.0.0",
        "stack-utils": "^2.0.3"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-cli": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-cli/-/jest-cli-29.7.0.tgz",
      "integrity": "sha512-OVVobw2IubN/GSYsxETi+gOe7Ka59EFMR/twOU3Jb2GnKKeMGJB5SGUUrEz3SFVmJASUdZUzy83sLNNQ2gZslg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/core": "^29.7.0",
        "@jest/test-result": "^29.7.0",
        "@jest/types": "^29.6.3",
        "chalk": "^4.0.0",
        "create-jest": "^29.7.0",
        "exit": "^0.1.2",
        "import-local": "^3.0.2",
        "jest-config": "^29.7.0",
        "jest-util": "^29.7.0",
        "jest-validate": "^29.7.0",
        "yargs": "^17.3.1"
      },
      "bin": {
        "jest": "bin/jest.js"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      },
      "peerDependencies": {
        "node-notifier": "^8.0.1 || ^9.0.0 || ^10.0.0"
      },
      "peerDependenciesMeta": {
        "node-notifier": {
          "optional": true
        }
      }
    },
    "node_modules/jest-config": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-config/-/jest-config-29.7.0.tgz",
      "integrity": "sha512-uXbpfeQ7R6TZBqI3/TxCU4q4ttk3u0PJeC+E0zbfSoSjq6bJ7buBPxzQPL0ifrkY4DNu4JUdk0ImlBUYi840eQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/core": "^7.11.6",
        "@jest/test-sequencer": "^29.7.0",
        "@jest/types": "^29.6.3",
        "babel-jest": "^29.7.0",
        "chalk": "^4.0.0",
        "ci-info": "^3.2.0",
        "deepmerge": "^4.2.2",
        "glob": "^7.1.3",
        "graceful-fs": "^4.2.9",
        "jest-circus": "^29.7.0",
        "jest-environment-node": "^29.7.0",
        "jest-get-type": "^29.6.3",
        "jest-regex-util": "^29.6.3",
        "jest-resolve": "^29.7.0",
        "jest-runner": "^29.7.0",
        "jest-util": "^29.7.0",
        "jest-validate": "^29.7.0",
        "micromatch": "^4.0.4",
        "parse-json": "^5.2.0",
        "pretty-format": "^29.7.0",
        "slash": "^3.0.0",
        "strip-json-comments": "^3.1.1"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      },
      "peerDependencies": {
        "@types/node": "*",
        "ts-node": ">=9.0.0"
      },
      "peerDependenciesMeta": {
        "@types/node": {
          "optional": true
        },
        "ts-node": {
          "optional": true
        }
      }
    },
    "node_modules/jest-diff": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-diff/-/jest-diff-29.7.0.tgz",
      "integrity": "sha512-LMIgiIrhigmPrs03JHpxUh2yISK3vLFPkAodPeo0+BuF7wA2FoQbkEg1u8gBYBThncu7e1oEDUfIXVuTqLRUjw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "chalk": "^4.0.0",
        "diff-sequences": "^29.6.3",
        "jest-get-type": "^29.6.3",
        "pretty-format": "^29.7.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-docblock": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-docblock/-/jest-docblock-29.7.0.tgz",
      "integrity": "sha512-q617Auw3A612guyaFgsbFeYpNP5t2aoUNLwBUbc/0kD1R4t9ixDbyFTHd1nok4epoVFpr7PmeWHrhvuV3XaJ4g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "detect-newline": "^3.0.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-each": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-each/-/jest-each-29.7.0.tgz",
      "integrity": "sha512-gns+Er14+ZrEoC5fhOfYCY1LOHHr0TI+rQUHZS8Ttw2l7gl+80eHc/gFf2Ktkw0+SIACDTeWvpFcv3B04VembQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/types": "^29.6.3",
        "chalk": "^4.0.0",
        "jest-get-type": "^29.6.3",
        "jest-util": "^29.7.0",
        "pretty-format": "^29.7.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-environment-jsdom": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-environment-jsdom/-/jest-environment-jsdom-29.7.0.tgz",
      "integrity": "sha512-k9iQbsf9OyOfdzWH8HDmrRT0gSIcX+FLNW7IQq94tFX0gynPwqDTW0Ho6iMVNjGz/nb+l/vW3dWM2bbLLpkbXA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/environment": "^29.7.0",
        "@jest/fake-timers": "^29.7.0",
        "@jest/types": "^29.6.3",
        "@types/jsdom": "^20.0.0",
        "@types/node": "*",
        "jest-mock": "^29.7.0",
        "jest-util": "^29.7.0",
        "jsdom": "^20.0.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      },
      "peerDependencies": {
        "canvas": "^2.5.0"
      },
      "peerDependenciesMeta": {
        "canvas": {
          "optional": true
        }
      }
    },
    "node_modules/jest-environment-node": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-environment-node/-/jest-environment-node-29.7.0.tgz",
      "integrity": "sha512-DOSwCRqXirTOyheM+4d5YZOrWcdu0LNZ87ewUoywbcb2XR4wKgqiG8vNeYwhjFMbEkfju7wx2GYH0P2gevGvFw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/environment": "^29.7.0",
        "@jest/fake-timers": "^29.7.0",
        "@jest/types": "^29.6.3",
        "@types/node": "*",
        "jest-mock": "^29.7.0",
        "jest-util": "^29.7.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-get-type": {
      "version": "29.6.3",
      "resolved": "https://registry.npmjs.org/jest-get-type/-/jest-get-type-29.6.3.tgz",
      "integrity": "sha512-zrteXnqYxfQh7l5FHyL38jL39di8H8rHoecLH3JNxH3BwOrBsNeabdap5e0I23lD4HHI8W5VFBZqG4Eaq5LNcw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-haste-map": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-haste-map/-/jest-haste-map-29.7.0.tgz",
      "integrity": "sha512-fP8u2pyfqx0K1rGn1R9pyE0/KTn+G7PxktWidOBTqFPLYX0b9ksaMFkhK5vrS3DVun09pckLdlx90QthlW7AmA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/types": "^29.6.3",
        "@types/graceful-fs": "^4.1.3",
        "@types/node": "*",
        "anymatch": "^3.0.3",
        "fb-watchman": "^2.0.0",
        "graceful-fs": "^4.2.9",
        "jest-regex-util": "^29.6.3",
        "jest-util": "^29.7.0",
        "jest-worker": "^29.7.0",
        "micromatch": "^4.0.4",
        "walker": "^1.0.8"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      },
      "optionalDependencies": {
        "fsevents": "^2.3.2"
      }
    },
    "node_modules/jest-leak-detector": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-leak-detector/-/jest-leak-detector-29.7.0.tgz",
      "integrity": "sha512-kYA8IJcSYtST2BY9I+SMC32nDpBT3J2NvWJx8+JCuCdl/CR1I4EKUJROiP8XtCcxqgTTBGJNdbB1A8XRKbTetw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "jest-get-type": "^29.6.3",
        "pretty-format": "^29.7.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-matcher-utils": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-matcher-utils/-/jest-matcher-utils-29.7.0.tgz",
      "integrity": "sha512-sBkD+Xi9DtcChsI3L3u0+N0opgPYnCRPtGcQYrgXmR+hmt/fYfWAL0xRXYU8eWOdfuLgBe0YCW3AFtnRLagq/g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "chalk": "^4.0.0",
        "jest-diff": "^29.7.0",
        "jest-get-type": "^29.6.3",
        "pretty-format": "^29.7.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-message-util": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-message-util/-/jest-message-util-29.7.0.tgz",
      "integrity": "sha512-GBEV4GRADeP+qtB2+6u61stea8mGcOT4mCtrYISZwfu9/ISHFJ/5zOMXYbpBE9RsS5+Gb63DW4FgmnKJ79Kf6w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/code-frame": "^7.12.13",
        "@jest/types": "^29.6.3",
        "@types/stack-utils": "^2.0.0",
        "chalk": "^4.0.0",
        "graceful-fs": "^4.2.9",
        "micromatch": "^4.0.4",
        "pretty-format": "^29.7.0",
        "slash": "^3.0.0",
        "stack-utils": "^2.0.3"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-mock": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-mock/-/jest-mock-29.7.0.tgz",
      "integrity": "sha512-ITOMZn+UkYS4ZFh83xYAOzWStloNzJFO2s8DWrE4lhtGD+AorgnbkiKERe4wQVBydIGPx059g6riW5Btp6Llnw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/types": "^29.6.3",
        "@types/node": "*",
        "jest-util": "^29.7.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-pnp-resolver": {
      "version": "1.2.3",
      "resolved": "https://registry.npmjs.org/jest-pnp-resolver/-/jest-pnp-resolver-1.2.3.tgz",
      "integrity": "sha512-+3NpwQEnRoIBtx4fyhblQDPgJI0H1IEIkX7ShLUjPGA7TtUTvI1oiKi3SR4oBR0hQhQR80l4WAe5RrXBwWMA8w==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      },
      "peerDependencies": {
        "jest-resolve": "*"
      },
      "peerDependenciesMeta": {
        "jest-resolve": {
          "optional": true
        }
      }
    },
    "node_modules/jest-regex-util": {
      "version": "29.6.3",
      "resolved": "https://registry.npmjs.org/jest-regex-util/-/jest-regex-util-29.6.3.tgz",
      "integrity": "sha512-KJJBsRCyyLNWCNBOvZyRDnAIfUiRJ8v+hOBQYGn8gDyF3UegwiP4gwRR3/SDa42g1YbVycTidUF3rKjyLFDWbg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-resolve": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-resolve/-/jest-resolve-29.7.0.tgz",
      "integrity": "sha512-IOVhZSrg+UvVAshDSDtHyFCCBUl/Q3AAJv8iZ6ZjnZ74xzvwuzLXid9IIIPgTnY62SJjfuupMKZsZQRsCvxEgA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "chalk": "^4.0.0",
        "graceful-fs": "^4.2.9",
        "jest-haste-map": "^29.7.0",
        "jest-pnp-resolver": "^1.2.2",
        "jest-util": "^29.7.0",
        "jest-validate": "^29.7.0",
        "resolve": "^1.20.0",
        "resolve.exports": "^2.0.0",
        "slash": "^3.0.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-resolve-dependencies": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-resolve-dependencies/-/jest-resolve-dependencies-29.7.0.tgz",
      "integrity": "sha512-un0zD/6qxJ+S0et7WxeI3H5XSe9lTBBR7bOHCHXkKR6luG5mwDDlIzVQ0V5cZCuoTgEdcdwzTghYkTWfubi+nA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "jest-regex-util": "^29.6.3",
        "jest-snapshot": "^29.7.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-runner": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-runner/-/jest-runner-29.7.0.tgz",
      "integrity": "sha512-fsc4N6cPCAahybGBfTRcq5wFR6fpLznMg47sY5aDpsoejOcVYFb07AHuSnR0liMcPTgBsA3ZJL6kFOjPdoNipQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/console": "^29.7.0",
        "@jest/environment": "^29.7.0",
        "@jest/test-result": "^29.7.0",
        "@jest/transform": "^29.7.0",
        "@jest/types": "^29.6.3",
        "@types/node": "*",
        "chalk": "^4.0.0",
        "emittery": "^0.13.1",
        "graceful-fs": "^4.2.9",
        "jest-docblock": "^29.7.0",
        "jest-environment-node": "^29.7.0",
        "jest-haste-map": "^29.7.0",
        "jest-leak-detector": "^29.7.0",
        "jest-message-util": "^29.7.0",
        "jest-resolve": "^29.7.0",
        "jest-runtime": "^29.7.0",
        "jest-util": "^29.7.0",
        "jest-watcher": "^29.7.0",
        "jest-worker": "^29.7.0",
        "p-limit": "^3.1.0",
        "source-map-support": "0.5.13"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-runtime": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-runtime/-/jest-runtime-29.7.0.tgz",
      "integrity": "sha512-gUnLjgwdGqW7B4LvOIkbKs9WGbn+QLqRQQ9juC6HndeDiezIwhDP+mhMwHWCEcfQ5RUXa6OPnFF8BJh5xegwwQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/environment": "^29.7.0",
        "@jest/fake-timers": "^29.7.0",
        "@jest/globals": "^29.7.0",
        "@jest/source-map": "^29.6.3",
        "@jest/test-result": "^29.7.0",
        "@jest/transform": "^29.7.0",
        "@jest/types": "^29.6.3",
        "@types/node": "*",
        "chalk": "^4.0.0",
        "cjs-module-lexer": "^1.0.0",
        "collect-v8-coverage": "^1.0.0",
        "glob": "^7.1.3",
        "graceful-fs": "^4.2.9",
        "jest-haste-map": "^29.7.0",
        "jest-message-util": "^29.7.0",
        "jest-mock": "^29.7.0",
        "jest-regex-util": "^29.6.3",
        "jest-resolve": "^29.7.0",
        "jest-snapshot": "^29.7.0",
        "jest-util": "^29.7.0",
        "slash": "^3.0.0",
        "strip-bom": "^4.0.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-snapshot": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-snapshot/-/jest-snapshot-29.7.0.tgz",
      "integrity": "sha512-Rm0BMWtxBcioHr1/OX5YCP8Uov4riHvKPknOGs804Zg9JGZgmIBkbtlxJC/7Z4msKYVbIJtfU+tKb8xlYNfdkw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/core": "^7.11.6",
        "@babel/generator": "^7.7.2",
        "@babel/plugin-syntax-jsx": "^7.7.2",
        "@babel/plugin-syntax-typescript": "^7.7.2",
        "@babel/types": "^7.3.3",
        "@jest/expect-utils": "^29.7.0",
        "@jest/transform": "^29.7.0",
        "@jest/types": "^29.6.3",
        "babel-preset-current-node-syntax": "^1.0.0",
        "chalk": "^4.0.0",
        "expect": "^29.7.0",
        "graceful-fs": "^4.2.9",
        "jest-diff": "^29.7.0",
        "jest-get-type": "^29.6.3",
        "jest-matcher-utils": "^29.7.0",
        "jest-message-util": "^29.7.0",
        "jest-util": "^29.7.0",
        "natural-compare": "^1.4.0",
        "pretty-format": "^29.7.0",
        "semver": "^7.5.3"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-snapshot/node_modules/semver": {
      "version": "7.7.3",
      "resolved": "https://registry.npmjs.org/semver/-/semver-7.7.3.tgz",
      "integrity": "sha512-SdsKMrI9TdgjdweUSR9MweHA4EJ8YxHn8DFaDisvhVlUOe4BF1tLD7GAj0lIqWVl+dPb/rExr0Btby5loQm20Q==",
      "dev": true,
      "license": "ISC",
      "bin": {
        "semver": "bin/semver.js"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/jest-util": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-util/-/jest-util-29.7.0.tgz",
      "integrity": "sha512-z6EbKajIpqGKU56y5KBUgy1dt1ihhQJgWzUlZHArA/+X2ad7Cb5iF+AK1EWVL/Bo7Rz9uurpqw6SiBCefUbCGA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/types": "^29.6.3",
        "@types/node": "*",
        "chalk": "^4.0.0",
        "ci-info": "^3.2.0",
        "graceful-fs": "^4.2.9",
        "picomatch": "^2.2.3"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-validate": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-validate/-/jest-validate-29.7.0.tgz",
      "integrity": "sha512-ZB7wHqaRGVw/9hST/OuFUReG7M8vKeq0/J2egIGLdvjHCmYqGARhzXmtgi+gVeZ5uXFF219aOc3Ls2yLg27tkw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/types": "^29.6.3",
        "camelcase": "^6.2.0",
        "chalk": "^4.0.0",
        "jest-get-type": "^29.6.3",
        "leven": "^3.1.0",
        "pretty-format": "^29.7.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-validate/node_modules/camelcase": {
      "version": "6.3.0",
      "resolved": "https://registry.npmjs.org/camelcase/-/camelcase-6.3.0.tgz",
      "integrity": "sha512-Gmy6FhYlCY7uOElZUSbxo2UCDH8owEk996gkbrpsgGtrJLM3J7jGxl9Ic7Qwwj4ivOE5AWZWRMecDdF7hqGjFA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/jest-watcher": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-watcher/-/jest-watcher-29.7.0.tgz",
      "integrity": "sha512-49Fg7WXkU3Vl2h6LbLtMQ/HyB6rXSIX7SqvBLQmssRBGN9I0PNvPmAmCWSOY6SOvrjhI/F7/bGAv9RtnsPA03g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/test-result": "^29.7.0",
        "@jest/types": "^29.6.3",
        "@types/node": "*",
        "ansi-escapes": "^4.2.1",
        "chalk": "^4.0.0",
        "emittery": "^0.13.1",
        "jest-util": "^29.7.0",
        "string-length": "^4.0.1"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-worker": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-worker/-/jest-worker-29.7.0.tgz",
      "integrity": "sha512-eIz2msL/EzL9UFTFFx7jBTkeZfku0yUAyZZZmJ93H2TYEiroIx2PQjEXcwYtYl8zXCxb+PAmA2hLIt/6ZEkPHw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/node": "*",
        "jest-util": "^29.7.0",
        "merge-stream": "^2.0.0",
        "supports-color": "^8.0.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-worker/node_modules/supports-color": {
      "version": "8.1.1",
      "resolved": "https://registry.npmjs.org/supports-color/-/supports-color-8.1.1.tgz",
      "integrity": "sha512-MpUEN2OodtUzxvKQl72cUF7RQ5EiHsGvSsVG0ia9c5RbWGL2CI4C7EpPS8UTBIplnlzZiNuV56w+FuNxy3ty2Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "has-flag": "^4.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/chalk/supports-color?sponsor=1"
      }
    },
    "node_modules/js-tokens": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/js-tokens/-/js-tokens-4.0.0.tgz",
      "integrity": "sha512-RdJUflcE3cUzKiMqQgsCu06FPu9UdIJO0beYbPhHN4k6apgJtifcoCtT9bcxOpYBtpD2kCM6Sbzg4CausW/PKQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/js-yaml": {
      "version": "3.14.1",
      "resolved": "https://registry.npmjs.org/js-yaml/-/js-yaml-3.14.1.tgz",
      "integrity": "sha512-okMH7OXXJ7YrN9Ok3/SXrnu4iX9yOk+25nqX4imS2npuvTYDmo/QEZoqwZkYaIDk3jVvBOTOIEgEhaLOynBS9g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "argparse": "^1.0.7",
        "esprima": "^4.0.0"
      },
      "bin": {
        "js-yaml": "bin/js-yaml.js"
      }
    },
    "node_modules/jsdom": {
      "version": "20.0.3",
      "resolved": "https://registry.npmjs.org/jsdom/-/jsdom-20.0.3.tgz",
      "integrity": "sha512-SYhBvTh89tTfCD/CRdSOm13mOBa42iTaTyfyEWBdKcGdPxPtLFBXuHR8XHb33YNYaP+lLbmSvBTsnoesCNJEsQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "abab": "^2.0.6",
        "acorn": "^8.8.1",
        "acorn-globals": "^7.0.0",
        "cssom": "^0.5.0",
        "cssstyle": "^2.3.0",
        "data-urls": "^3.0.2",
        "decimal.js": "^10.4.2",
        "domexception": "^4.0.0",
        "escodegen": "^2.0.0",
        "form-data": "^4.0.0",
        "html-encoding-sniffer": "^3.0.0",
        "http-proxy-agent": "^5.0.0",
        "https-proxy-agent": "^5.0.1",
        "is-potential-custom-element-name": "^1.0.1",
        "nwsapi": "^2.2.2",
        "parse5": "^7.1.1",
        "saxes": "^6.0.0",
        "symbol-tree": "^3.2.4",
        "tough-cookie": "^4.1.2",
        "w3c-xmlserializer": "^4.0.0",
        "webidl-conversions": "^7.0.0",
        "whatwg-encoding": "^2.0.0",
        "whatwg-mimetype": "^3.0.0",
        "whatwg-url": "^11.0.0",
        "ws": "^8.11.0",
        "xml-name-validator": "^4.0.0"
      },
      "engines": {
        "node": ">=14"
      },
      "peerDependencies": {
        "canvas": "^2.5.0"
      },
      "peerDependenciesMeta": {
        "canvas": {
          "optional": true
        }
      }
    },
    "node_modules/jsesc": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/jsesc/-/jsesc-3.1.0.tgz",
      "integrity": "sha512-/sM3dO2FOzXjKQhJuo0Q173wf2KOo8t4I8vHy6lF9poUp7bKT0/NHE8fPX23PwfhnykfqnC2xRxOnVw5XuGIaA==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "jsesc": "bin/jsesc"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/json-buffer": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/json-buffer/-/json-buffer-3.0.1.tgz",
      "integrity": "sha512-4bV5BfR2mqfQTJm+V5tPPdf+ZpuhiIvTuAB5g8kcrXOZpTT/QwwVRWBywX1ozr6lEuPdbHxwaJlm9G6mI2sfSQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/json-parse-even-better-errors": {
      "version": "2.3.1",
      "resolved": "https://registry.npmjs.org/json-parse-even-better-errors/-/json-parse-even-better-errors-2.3.1.tgz",
      "integrity": "sha512-xyFwyhro/JEof6Ghe2iz2NcXoj2sloNsWr/XsERDK/oiPCfaNhl5ONfp+jQdAZRQQ0IJWNzH9zIZF7li91kh2w==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/json-schema-traverse": {
      "version": "0.4.1",
      "resolved": "https://registry.npmjs.org/json-schema-traverse/-/json-schema-traverse-0.4.1.tgz",
      "integrity": "sha512-xbbCH5dCYU5T8LcEhhuh7HJ88HXuW3qsI3Y0zOZFKfZEHcpWiHU/Jxzk629Brsab/mMiHQti9wMP+845RPe3Vg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/json-stable-stringify-without-jsonify": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/json-stable-stringify-without-jsonify/-/json-stable-stringify-without-jsonify-1.0.1.tgz",
      "integrity": "sha512-Bdboy+l7tA3OGW6FjyFHWkP5LuByj1Tk33Ljyq0axyzdk9//JSi2u3fP1QSmd1KNwq6VOKYGlAu87CisVir6Pw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/json5": {
      "version": "2.2.3",
      "resolved": "https://registry.npmjs.org/json5/-/json5-2.2.3.tgz",
      "integrity": "sha512-XmOWe7eyHYH14cLdVPoyg+GOH3rYX++KpzrylJwSW98t3Nk+U8XOl8FWKOgwtzdb8lXGf6zYwDUzeHMWfxasyg==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "json5": "lib/cli.js"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/keyv": {
      "version": "4.5.4",
      "resolved": "https://registry.npmjs.org/keyv/-/keyv-4.5.4.tgz",
      "integrity": "sha512-oxVHkHR/EJf2CNXnWxRLW6mg7JyCCUcG0DtEGmL2ctUo1PNTin1PUil+r/+4r5MpVgC/fn1kjsx7mjSujKqIpw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "json-buffer": "3.0.1"
      }
    },
    "node_modules/kleur": {
      "version": "3.0.3",
      "resolved": "https://registry.npmjs.org/kleur/-/kleur-3.0.3.tgz",
      "integrity": "sha512-eTIzlVOSUR+JxdDFepEYcBMtZ9Qqdef+rnzWdRZuMbOywu5tO2w2N7rqjoANZ5k9vywhL6Br1VRjUIgTQx4E8w==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/leven": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/leven/-/leven-3.1.0.tgz",
      "integrity": "sha512-qsda+H8jTaUaN/x5vzW2rzc+8Rw4TAQ/4KjB46IwK5VH+IlVeeeje/EoZRpiXvIqjFgK84QffqPztGI3VBLG1A==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/levn": {
      "version": "0.4.1",
      "resolved": "https://registry.npmjs.org/levn/-/levn-0.4.1.tgz",
      "integrity": "sha512-+bT2uH4E5LGE7h/n3evcS/sQlJXCpIp6ym8OWJ5eV6+67Dsql/LaaT7qJBAt2rzfoa/5QBGBhxDix1dMt2kQKQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "prelude-ls": "^1.2.1",
        "type-check": "~0.4.0"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/lines-and-columns": {
      "version": "1.2.4",
      "resolved": "https://registry.npmjs.org/lines-and-columns/-/lines-and-columns-1.2.4.tgz",
      "integrity": "sha512-7ylylesZQ/PV29jhEDl3Ufjo6ZX7gCqJr5F7PKrqc93v7fzSymt1BpwEU8nAUXs8qzzvqhbjhK5QZg6Mt/HkBg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/locate-path": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/locate-path/-/locate-path-5.0.0.tgz",
      "integrity": "sha512-t7hw9pI+WvuwNJXwk5zVHpyhIqzg2qTlklJOf0mVxGSbe3Fp2VieZcduNYjaLDoy6p9uGpQEGWG87WpMKlNq8g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "p-locate": "^4.1.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/lodash.debounce": {
      "version": "4.0.8",
      "resolved": "https://registry.npmjs.org/lodash.debounce/-/lodash.debounce-4.0.8.tgz",
      "integrity": "sha512-FT1yDzDYEoYWhnSGnpE/4Kj1fLZkDFyqRb7fNt6FdYOSxlUWAtp42Eh6Wb0rGIv/m9Bgo7x4GhQbm5Ys4SG5ow==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/lodash.merge": {
      "version": "4.6.2",
      "resolved": "https://registry.npmjs.org/lodash.merge/-/lodash.merge-4.6.2.tgz",
      "integrity": "sha512-0KpjqXRVvrYyCsX1swR/XTK0va6VQkQM6MNo7PqW77ByjAhoARA8EfrP1N4+KlKj8YS0ZUCtRT/YUuhyYDujIQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/lru-cache": {
      "version": "5.1.1",
      "resolved": "https://registry.npmjs.org/lru-cache/-/lru-cache-5.1.1.tgz",
      "integrity": "sha512-KpNARQA3Iwv+jTA0utUVVbrh+Jlrr1Fv0e56GGzAFOXN7dk/FviaDW8LHmK52DlcH4WP2n6gI8vN1aesBFgo9w==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "yallist": "^3.0.2"
      }
    },
    "node_modules/make-dir": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/make-dir/-/make-dir-4.0.0.tgz",
      "integrity": "sha512-hXdUTZYIVOt1Ex//jAQi+wTZZpUpwBj/0QsOzqegb3rGMMeJiSEu5xLHnYfBrRV4RH2+OCSOO95Is/7x1WJ4bw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "semver": "^7.5.3"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/make-dir/node_modules/semver": {
      "version": "7.7.3",
      "resolved": "https://registry.npmjs.org/semver/-/semver-7.7.3.tgz",
      "integrity": "sha512-SdsKMrI9TdgjdweUSR9MweHA4EJ8YxHn8DFaDisvhVlUOe4BF1tLD7GAj0lIqWVl+dPb/rExr0Btby5loQm20Q==",
      "dev": true,
      "license": "ISC",
      "bin": {
        "semver": "bin/semver.js"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/makeerror": {
      "version": "1.0.12",
      "resolved": "https://registry.npmjs.org/makeerror/-/makeerror-1.0.12.tgz",
      "integrity": "sha512-JmqCvUhmt43madlpFzG4BQzG2Z3m6tvQDNKdClZnO3VbIudJYmxsT0FNJMeiB2+JTSlTQTSbU8QdesVmwJcmLg==",
      "dev": true,
      "license": "BSD-3-Clause",
      "dependencies": {
        "tmpl": "1.0.5"
      }
    },
    "node_modules/math-intrinsics": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/math-intrinsics/-/math-intrinsics-1.1.0.tgz",
      "integrity": "sha512-/IXtbwEk5HTPyEwyKX6hGkYXxM9nbj64B+ilVJnC/R6B0pH5G4V3b0pVbL7DBj4tkhBAppbQUlf6F6Xl9LHu1g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/merge-stream": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/merge-stream/-/merge-stream-2.0.0.tgz",
      "integrity": "sha512-abv/qOcuPfk3URPfDzmZU1LKmuw8kT+0nIHvKrKgFrwifol/doWcdA4ZqsWQ8ENrFKkd67Mfpo/LovbIUsbt3w==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/micromatch": {
      "version": "4.0.8",
      "resolved": "https://registry.npmjs.org/micromatch/-/micromatch-4.0.8.tgz",
      "integrity": "sha512-PXwfBhYu0hBCPw8Dn0E+WDYb7af3dSLVWKi3HGv84IdF4TyFoC0ysxFd0Goxw7nSv4T/PzEJQxsYsEiFCKo2BA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "braces": "^3.0.3",
        "picomatch": "^2.3.1"
      },
      "engines": {
        "node": ">=8.6"
      }
    },
    "node_modules/mime-db": {
      "version": "1.52.0",
      "resolved": "https://registry.npmjs.org/mime-db/-/mime-db-1.52.0.tgz",
      "integrity": "sha512-sPU4uV7dYlvtWJxwwxHD0PuihVNiE7TyAbQ5SWxDCB9mUYvOgroQOwYQQOKPJ8CIbE+1ETVlOoK1UC2nU3gYvg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/mime-types": {
      "version": "2.1.35",
      "resolved": "https://registry.npmjs.org/mime-types/-/mime-types-2.1.35.tgz",
      "integrity": "sha512-ZDY+bPm5zTTF+YpCrAU9nK0UgICYPT0QtT1NZWFv4s++TNkcgVaT0g6+4R2uI4MjQjzysHB1zxuWL50hzaeXiw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "mime-db": "1.52.0"
      },
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/mimic-fn": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/mimic-fn/-/mimic-fn-2.1.0.tgz",
      "integrity": "sha512-OqbOk5oEQeAZ8WXWydlu9HJjz9WVdEIvamMCcXmuqUYjTknH/sqsWvhQ3vgwKFRR1HpjvNBKQ37nbJgYzGqGcg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/minimatch": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-3.1.2.tgz",
      "integrity": "sha512-J7p63hRiAjw1NDEww1W7i37+ByIrOWO5XQQAzZ3VOcL0PNybwpfmV/N05zFAzwQ9USyEcX6t3UO+K5aqBQOIHw==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "brace-expansion": "^1.1.7"
      },
      "engines": {
        "node": "*"
      }
    },
    "node_modules/ms": {
      "version": "2.1.3",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.1.3.tgz",
      "integrity": "sha512-6FlzubTLZG3J2a/NVCAleEhjzq5oxgHyaCU9yYXvcLsvoVaHJq/s5xXI6/XXP6tz7R9xAOtHnSO/tXtF3WRTlA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/natural-compare": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/natural-compare/-/natural-compare-1.4.0.tgz",
      "integrity": "sha512-OWND8ei3VtNC9h7V60qff3SVobHr996CTwgxubgyQYEpg290h9J0buyECNNJexkFm5sOajh5G116RYA1c8ZMSw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/node-int64": {
      "version": "0.4.0",
      "resolved": "https://registry.npmjs.org/node-int64/-/node-int64-0.4.0.tgz",
      "integrity": "sha512-O5lz91xSOeoXP6DulyHfllpq+Eg00MWitZIbtPfoSEvqIHdl5gfcY6hYzDWnj0qD5tz52PI08u9qUvSVeUBeHw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/node-releases": {
      "version": "2.0.23",
      "resolved": "https://registry.npmjs.org/node-releases/-/node-releases-2.0.23.tgz",
      "integrity": "sha512-cCmFDMSm26S6tQSDpBCg/NR8NENrVPhAJSf+XbxBG4rPFaaonlEoE9wHQmun+cls499TQGSb7ZyPBRlzgKfpeg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/normalize-path": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/normalize-path/-/normalize-path-3.0.0.tgz",
      "integrity": "sha512-6eZs5Ls3WtCisHWp9S2GUy8dqkpGi4BVSz3GaqiE6ezub0512ESztXUwUB6C6IKbQkY2Pnb/mD4WYojCRwcwLA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/npm-run-path": {
      "version": "4.0.1",
      "resolved": "https://registry.npmjs.org/npm-run-path/-/npm-run-path-4.0.1.tgz",
      "integrity": "sha512-S48WzZW777zhNIrn7gxOlISNAqi9ZC/uQFnRdbeIHhZhCA6UqpkOT8T1G7BvfdgP4Er8gF4sUbaS0i7QvIfCWw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "path-key": "^3.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/nwsapi": {
      "version": "2.2.22",
      "resolved": "https://registry.npmjs.org/nwsapi/-/nwsapi-2.2.22.tgz",
      "integrity": "sha512-ujSMe1OWVn55euT1ihwCI1ZcAaAU3nxUiDwfDQldc51ZXaB9m2AyOn6/jh1BLe2t/G8xd6uKG1UBF2aZJeg2SQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/once": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/once/-/once-1.4.0.tgz",
      "integrity": "sha512-lNaJgI+2Q5URQBkccEKHTQOPaXdUxnZZElQTZY0MFUAuaEqe1E+Nyvgdz/aIyNi6Z9MzO5dv1H8n58/GELp3+w==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "wrappy": "1"
      }
    },
    "node_modules/onetime": {
      "version": "5.1.2",
      "resolved": "https://registry.npmjs.org/onetime/-/onetime-5.1.2.tgz",
      "integrity": "sha512-kbpaSSGJTWdAY5KPVeMOKXSrPtr8C8C7wodJbcsd51jRnmD+GZu8Y0VoU6Dm5Z4vWr0Ig/1NKuWRKf7j5aaYSg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "mimic-fn": "^2.1.0"
      },
      "engines": {
        "node": ">=6"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/optionator": {
      "version": "0.9.4",
      "resolved": "https://registry.npmjs.org/optionator/-/optionator-0.9.4.tgz",
      "integrity": "sha512-6IpQ7mKUxRcZNLIObR0hz7lxsapSSIYNZJwXPGeF0mTVqGKFIXj1DQcMoT22S3ROcLyY/rz0PWaWZ9ayWmad9g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "deep-is": "^0.1.3",
        "fast-levenshtein": "^2.0.6",
        "levn": "^0.4.1",
        "prelude-ls": "^1.2.1",
        "type-check": "^0.4.0",
        "word-wrap": "^1.2.5"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/p-limit": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/p-limit/-/p-limit-3.1.0.tgz",
      "integrity": "sha512-TYOanM3wGwNGsZN2cVTYPArw454xnXj5qmWF1bEoAc4+cU/ol7GVh7odevjp1FNHduHc3KZMcFduxU5Xc6uJRQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "yocto-queue": "^0.1.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/p-locate": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/p-locate/-/p-locate-4.1.0.tgz",
      "integrity": "sha512-R79ZZ/0wAxKGu3oYMlz8jy/kbhsNrS7SKZ7PxEHBgJ5+F2mtFW2fK2cOtBh1cHYkQsbzFV7I+EoRKe6Yt0oK7A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "p-limit": "^2.2.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/p-locate/node_modules/p-limit": {
      "version": "2.3.0",
      "resolved": "https://registry.npmjs.org/p-limit/-/p-limit-2.3.0.tgz",
      "integrity": "sha512-//88mFWSJx8lxCzwdAABTJL2MyWB12+eIY7MDL2SqLmAkeKU9qxRvWuSyTjm3FUmpBEMuFfckAIqEaVGUDxb6w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "p-try": "^2.0.0"
      },
      "engines": {
        "node": ">=6"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/p-try": {
      "version": "2.2.0",
      "resolved": "https://registry.npmjs.org/p-try/-/p-try-2.2.0.tgz",
      "integrity": "sha512-R4nPAVTAU0B9D35/Gk3uJf/7XYbQcyohSKdvAxIRSNghFl4e71hVoGnBNQz9cWaXxO2I10KTC+3jMdvvoKw6dQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/parent-module": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/parent-module/-/parent-module-1.0.1.tgz",
      "integrity": "sha512-GQ2EWRpQV8/o+Aw8YqtfZZPfNRWZYkbidE9k5rpl/hC3vtHHBfGm2Ifi6qWV+coDGkrUKZAxE3Lot5kcsRlh+g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "callsites": "^3.0.0"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/parse-json": {
      "version": "5.2.0",
      "resolved": "https://registry.npmjs.org/parse-json/-/parse-json-5.2.0.tgz",
      "integrity": "sha512-ayCKvm/phCGxOkYRSCM82iDwct8/EonSEgCSxWxD7ve6jHggsFl4fZVQBPRNgQoKiuV/odhFrGzQXZwbifC8Rg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/code-frame": "^7.0.0",
        "error-ex": "^1.3.1",
        "json-parse-even-better-errors": "^2.3.0",
        "lines-and-columns": "^1.1.6"
      },
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/parse5": {
      "version": "7.3.0",
      "resolved": "https://registry.npmjs.org/parse5/-/parse5-7.3.0.tgz",
      "integrity": "sha512-IInvU7fabl34qmi9gY8XOVxhYyMyuH2xUNpb2q8/Y+7552KlejkRvqvD19nMoUW/uQGGbqNpA6Tufu5FL5BZgw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "entities": "^6.0.0"
      },
      "funding": {
        "url": "https://github.com/inikulin/parse5?sponsor=1"
      }
    },
    "node_modules/path-exists": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/path-exists/-/path-exists-4.0.0.tgz",
      "integrity": "sha512-ak9Qy5Q7jYb2Wwcey5Fpvg2KoAc/ZIhLSLOSBmRmygPsGwkVVt0fZa0qrtMz+m6tJTAHfZQ8FnmB4MG4LWy7/w==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/path-is-absolute": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/path-is-absolute/-/path-is-absolute-1.0.1.tgz",
      "integrity": "sha512-AVbw3UJ2e9bq64vSaS9Am0fje1Pa8pbGqTTsmXfaIiMpnr5DlDhfJOuLj9Sf95ZPVDAUerDfEk88MPmPe7UCQg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/path-key": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/path-key/-/path-key-3.1.1.tgz",
      "integrity": "sha512-ojmeN0qd+y0jszEtoY48r0Peq5dwMEkIlCOu6Q5f41lfkswXuKtYrhgoTpLnyIcHm24Uhqx+5Tqm2InSwLhE6Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/path-parse": {
      "version": "1.0.7",
      "resolved": "https://registry.npmjs.org/path-parse/-/path-parse-1.0.7.tgz",
      "integrity": "sha512-LDJzPVEEEPR+y48z93A0Ed0yXb8pAByGWo/k5YYdYgpY2/2EsOsksJrq7lOHxryrVOn1ejG6oAp8ahvOIQD8sw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/picocolors": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/picocolors/-/picocolors-1.1.1.tgz",
      "integrity": "sha512-xceH2snhtb5M9liqDsmEw56le376mTZkEX/jEb/RxNFyegNul7eNslCXP9FDj/Lcu0X8KEyMceP2ntpaHrDEVA==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/picomatch": {
      "version": "2.3.1",
      "resolved": "https://registry.npmjs.org/picomatch/-/picomatch-2.3.1.tgz",
      "integrity": "sha512-JU3teHTNjmE2VCGFzuY8EXzCDVwEqB2a8fsIvwaStHhAWJEeVd1o1QD80CU6+ZdEXXSLbSsuLwJjkCBWqRQUVA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8.6"
      },
      "funding": {
        "url": "https://github.com/sponsors/jonschlinkert"
      }
    },
    "node_modules/pirates": {
      "version": "4.0.7",
      "resolved": "https://registry.npmjs.org/pirates/-/pirates-4.0.7.tgz",
      "integrity": "sha512-TfySrs/5nm8fQJDcBDuUng3VOUKsd7S+zqvbOTiGXHfxX4wK31ard+hoNuvkicM/2YFzlpDgABOevKSsB4G/FA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/pkg-dir": {
      "version": "4.2.0",
      "resolved": "https://registry.npmjs.org/pkg-dir/-/pkg-dir-4.2.0.tgz",
      "integrity": "sha512-HRDzbaKjC+AOWVXxAU/x54COGeIv9eb+6CkDSQoNTt4XyWoIJvuPsXizxu/Fr23EiekbtZwmh1IcIG/l/a10GQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "find-up": "^4.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/prelude-ls": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/prelude-ls/-/prelude-ls-1.2.1.tgz",
      "integrity": "sha512-vkcDPrRZo1QZLbn5RLGPpg/WmIQ65qoWWhcGKf/b5eplkkarX0m9z8ppCat4mlOqUsWpyNuYgO3VRyrYHSzX5g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/prettier": {
      "version": "3.6.2",
      "resolved": "https://registry.npmjs.org/prettier/-/prettier-3.6.2.tgz",
      "integrity": "sha512-I7AIg5boAr5R0FFtJ6rCfD+LFsWHp81dolrFD8S79U9tb8Az2nGrJncnMSnys+bpQJfRUzqs9hnA81OAA3hCuQ==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "prettier": "bin/prettier.cjs"
      },
      "engines": {
        "node": ">=14"
      },
      "funding": {
        "url": "https://github.com/prettier/prettier?sponsor=1"
      }
    },
    "node_modules/pretty-format": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/pretty-format/-/pretty-format-29.7.0.tgz",
      "integrity": "sha512-Pdlw/oPxN+aXdmM9R00JVC9WVFoCLTKJvDVLgmJ+qAffBMxsV85l/Lu7sNx4zSzPyoL2euImuEwHhOXdEgNFZQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/schemas": "^29.6.3",
        "ansi-styles": "^5.0.0",
        "react-is": "^18.0.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/pretty-format/node_modules/ansi-styles": {
      "version": "5.2.0",
      "resolved": "https://registry.npmjs.org/ansi-styles/-/ansi-styles-5.2.0.tgz",
      "integrity": "sha512-Cxwpt2SfTzTtXcfOlzGEee8O+c+MmUgGrNiBcXnuWxuFJHe6a5Hz7qwhwe5OgaSYI0IJvkLqWX1ASG+cJOkEiA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/chalk/ansi-styles?sponsor=1"
      }
    },
    "node_modules/prompts": {
      "version": "2.4.2",
      "resolved": "https://registry.npmjs.org/prompts/-/prompts-2.4.2.tgz",
      "integrity": "sha512-NxNv/kLguCA7p3jE8oL2aEBsrJWgAakBpgmgK6lpPWV+WuOmY6r2/zbAVnP+T8bQlA0nzHXSJSJW0Hq7ylaD2Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "kleur": "^3.0.3",
        "sisteransi": "^1.0.5"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/psl": {
      "version": "1.15.0",
      "resolved": "https://registry.npmjs.org/psl/-/psl-1.15.0.tgz",
      "integrity": "sha512-JZd3gMVBAVQkSs6HdNZo9Sdo0LNcQeMNP3CozBJb3JYC/QUYZTnKxP+f8oWRX4rHP5EurWxqAHTSwUCjlNKa1w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "punycode": "^2.3.1"
      },
      "funding": {
        "url": "https://github.com/sponsors/lupomontero"
      }
    },
    "node_modules/punycode": {
      "version": "2.3.1",
      "resolved": "https://registry.npmjs.org/punycode/-/punycode-2.3.1.tgz",
      "integrity": "sha512-vYt7UD1U9Wg6138shLtLOvdAu+8DsC/ilFtEVHcH+wydcSpNE20AfSOduf6MkRFahL5FY7X1oU7nKVZFtfq8Fg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/pure-rand": {
      "version": "6.1.0",
      "resolved": "https://registry.npmjs.org/pure-rand/-/pure-rand-6.1.0.tgz",
      "integrity": "sha512-bVWawvoZoBYpp6yIoQtQXHZjmz35RSVHnUOTefl8Vcjr8snTPY1wnpSPMWekcFwbxI6gtmT7rSYPFvz71ldiOA==",
      "dev": true,
      "funding": [
        {
          "type": "individual",
          "url": "https://github.com/sponsors/dubzzz"
        },
        {
          "type": "opencollective",
          "url": "https://opencollective.com/fast-check"
        }
      ],
      "license": "MIT"
    },
    "node_modules/querystringify": {
      "version": "2.2.0",
      "resolved": "https://registry.npmjs.org/querystringify/-/querystringify-2.2.0.tgz",
      "integrity": "sha512-FIqgj2EUvTa7R50u0rGsyTftzjYmv/a3hO345bZNrqabNqjtgiDMgmo4mkUjd+nzU5oF3dClKqFIPUKybUyqoQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/queue-microtask": {
      "version": "1.2.3",
      "resolved": "https://registry.npmjs.org/queue-microtask/-/queue-microtask-1.2.3.tgz",
      "integrity": "sha512-NuaNSa6flKT5JaSYQzJok04JzTL1CA6aGhv5rfLW3PgqA+M2ChpZQnAC8h8i4ZFkBS8X5RqkDBHA7r4hej3K9A==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/feross"
        },
        {
          "type": "patreon",
          "url": "https://www.patreon.com/feross"
        },
        {
          "type": "consulting",
          "url": "https://feross.org/support"
        }
      ],
      "license": "MIT"
    },
    "node_modules/react-is": {
      "version": "18.3.1",
      "resolved": "https://registry.npmjs.org/react-is/-/react-is-18.3.1.tgz",
      "integrity": "sha512-/LLMVyas0ljjAtoYiPqYiL8VWXzUUdThrmU5+n20DZv+a+ClRoevUzw5JxU+Ieh5/c87ytoTBV9G1FiKfNJdmg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/regenerate": {
      "version": "1.4.2",
      "resolved": "https://registry.npmjs.org/regenerate/-/regenerate-1.4.2.tgz",
      "integrity": "sha512-zrceR/XhGYU/d/opr2EKO7aRHUeiBI8qjtfHqADTwZd6Szfy16la6kqD0MIUs5z5hx6AaKa+PixpPrR289+I0A==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/regenerate-unicode-properties": {
      "version": "10.2.2",
      "resolved": "https://registry.npmjs.org/regenerate-unicode-properties/-/regenerate-unicode-properties-10.2.2.tgz",
      "integrity": "sha512-m03P+zhBeQd1RGnYxrGyDAPpWX/epKirLrp8e3qevZdVkKtnCrjjWczIbYc8+xd6vcTStVlqfycTx1KR4LOr0g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "regenerate": "^1.4.2"
      },
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/regexpu-core": {
      "version": "6.4.0",
      "resolved": "https://registry.npmjs.org/regexpu-core/-/regexpu-core-6.4.0.tgz",
      "integrity": "sha512-0ghuzq67LI9bLXpOX/ISfve/Mq33a4aFRzoQYhnnok1JOFpmE/A2TBGkNVenOGEeSBCjIiWcc6MVOG5HEQv0sA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "regenerate": "^1.4.2",
        "regenerate-unicode-properties": "^10.2.2",
        "regjsgen": "^0.8.0",
        "regjsparser": "^0.13.0",
        "unicode-match-property-ecmascript": "^2.0.0",
        "unicode-match-property-value-ecmascript": "^2.2.1"
      },
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/regjsgen": {
      "version": "0.8.0",
      "resolved": "https://registry.npmjs.org/regjsgen/-/regjsgen-0.8.0.tgz",
      "integrity": "sha512-RvwtGe3d7LvWiDQXeQw8p5asZUmfU1G/l6WbUXeHta7Y2PEIvBTwH6E2EfmYUK8pxcxEdEmaomqyp0vZZ7C+3Q==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/regjsparser": {
      "version": "0.13.0",
      "resolved": "https://registry.npmjs.org/regjsparser/-/regjsparser-0.13.0.tgz",
      "integrity": "sha512-NZQZdC5wOE/H3UT28fVGL+ikOZcEzfMGk/c3iN9UGxzWHMa1op7274oyiUVrAG4B2EuFhus8SvkaYnhvW92p9Q==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "jsesc": "~3.1.0"
      },
      "bin": {
        "regjsparser": "bin/parser"
      }
    },
    "node_modules/require-directory": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/require-directory/-/require-directory-2.1.1.tgz",
      "integrity": "sha512-fGxEI7+wsG9xrvdjsrlmL22OMTTiHRwAMroiEeMgq8gzoLC/PQr7RsRDSTLUg/bZAZtF+TVIkHc6/4RIKrui+Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/requires-port": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/requires-port/-/requires-port-1.0.0.tgz",
      "integrity": "sha512-KigOCHcocU3XODJxsu8i/j8T9tzT4adHiecwORRQ0ZZFcp7ahwXuRU1m+yuO90C5ZUyGeGfocHDI14M3L3yDAQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/resolve": {
      "version": "1.22.10",
      "resolved": "https://registry.npmjs.org/resolve/-/resolve-1.22.10.tgz",
      "integrity": "sha512-NPRy+/ncIMeDlTAsuqwKIiferiawhefFJtkNSW0qZJEqMEb+qBt/77B/jGeeek+F0uOeN05CDa6HXbbIgtVX4w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-core-module": "^2.16.0",
        "path-parse": "^1.0.7",
        "supports-preserve-symlinks-flag": "^1.0.0"
      },
      "bin": {
        "resolve": "bin/resolve"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/resolve-cwd": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/resolve-cwd/-/resolve-cwd-3.0.0.tgz",
      "integrity": "sha512-OrZaX2Mb+rJCpH/6CpSqt9xFVpN++x01XnN2ie9g6P5/3xelLAkXWVADpdz1IHD/KFfEXyE6V0U01OQ3UO2rEg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "resolve-from": "^5.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/resolve-from": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/resolve-from/-/resolve-from-5.0.0.tgz",
      "integrity": "sha512-qYg9KP24dD5qka9J47d0aVky0N+b4fTU89LN9iDnjB5waksiC49rvMB0PrUJQGoTmH50XPiqOvAjDfaijGxYZw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/resolve.exports": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/resolve.exports/-/resolve.exports-2.0.3.tgz",
      "integrity": "sha512-OcXjMsGdhL4XnbShKpAcSqPMzQoYkYyhbEaeSko47MjRP9NfEQMhZkXL1DoFlt9LWQn4YttrdnV6X2OiyzBi+A==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/reusify": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/reusify/-/reusify-1.1.0.tgz",
      "integrity": "sha512-g6QUff04oZpHs0eG5p83rFLhHeV00ug/Yf9nZM6fLeUrPguBTkTQOdpAWWspMh55TZfVQDPaN3NQJfbVRAxdIw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "iojs": ">=1.0.0",
        "node": ">=0.10.0"
      }
    },
    "node_modules/rimraf": {
      "version": "3.0.2",
      "resolved": "https://registry.npmjs.org/rimraf/-/rimraf-3.0.2.tgz",
      "integrity": "sha512-JZkJMZkAGFFPP2YqXZXPbMlMBgsxzE8ILs4lMIX/2o0L9UBw9O/Y3o6wFw/i9YLapcUJWwqbi3kdxIPdC62TIA==",
      "deprecated": "Rimraf versions prior to v4 are no longer supported",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "glob": "^7.1.3"
      },
      "bin": {
        "rimraf": "bin.js"
      },
      "funding": {
        "url": "https://github.com/sponsors/isaacs"
      }
    },
    "node_modules/run-parallel": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/run-parallel/-/run-parallel-1.2.0.tgz",
      "integrity": "sha512-5l4VyZR86LZ/lDxZTR6jqL8AFE2S0IFLMP26AbjsLVADxHdhB/c0GUsH+y39UfCi3dzz8OlQuPmnaJOMoDHQBA==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/feross"
        },
        {
          "type": "patreon",
          "url": "https://www.patreon.com/feross"
        },
        {
          "type": "consulting",
          "url": "https://feross.org/support"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "queue-microtask": "^1.2.2"
      }
    },
    "node_modules/safer-buffer": {
      "version": "2.1.2",
      "resolved": "https://registry.npmjs.org/safer-buffer/-/safer-buffer-2.1.2.tgz",
      "integrity": "sha512-YZo3K82SD7Riyi0E1EQPojLz7kpepnSQI9IyPbHHg1XXXevb5dJI7tpyN2ADxGcQbHG7vcyRHk0cbwqcQriUtg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/saxes": {
      "version": "6.0.0",
      "resolved": "https://registry.npmjs.org/saxes/-/saxes-6.0.0.tgz",
      "integrity": "sha512-xAg7SOnEhrm5zI3puOOKyy1OMcMlIJZYNJY7xLBwSze0UjhPLnWfj2GF2EpT0jmzaJKIWKHLsaSSajf35bcYnA==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "xmlchars": "^2.2.0"
      },
      "engines": {
        "node": ">=v12.22.7"
      }
    },
    "node_modules/semver": {
      "version": "6.3.1",
      "resolved": "https://registry.npmjs.org/semver/-/semver-6.3.1.tgz",
      "integrity": "sha512-BR7VvDCVHO+q2xBEWskxS6DJE1qRnb7DxzUrogb71CWoSficBxYsiAGd+Kl0mmq/MprG9yArRkyrQxTO6XjMzA==",
      "dev": true,
      "license": "ISC",
      "bin": {
        "semver": "bin/semver.js"
      }
    },
    "node_modules/shebang-command": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/shebang-command/-/shebang-command-2.0.0.tgz",
      "integrity": "sha512-kHxr2zZpYtdmrN1qDjrrX/Z1rR1kG8Dx+gkpK1G4eXmvXswmcE1hTWBWYUzlraYw1/yZp6YuDY77YtvbN0dmDA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "shebang-regex": "^3.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/shebang-regex": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/shebang-regex/-/shebang-regex-3.0.0.tgz",
      "integrity": "sha512-7++dFhtcx3353uBaq8DDR4NuxBetBzC7ZQOhmTQInHEd6bSrXdiEyzCvG07Z44UYdLShWUyXt5M/yhz8ekcb1A==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/signal-exit": {
      "version": "3.0.7",
      "resolved": "https://registry.npmjs.org/signal-exit/-/signal-exit-3.0.7.tgz",
      "integrity": "sha512-wnD2ZE+l+SPC/uoS0vXeE9L1+0wuaMqKlfz9AMUo38JsyLSBWSFcHR1Rri62LZc12vLr1gb3jl7iwQhgwpAbGQ==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/sisteransi": {
      "version": "1.0.5",
      "resolved": "https://registry.npmjs.org/sisteransi/-/sisteransi-1.0.5.tgz",
      "integrity": "sha512-bLGGlR1QxBcynn2d5YmDX4MGjlZvy2MRBDRNHLJ8VI6l6+9FUiyTFNJ0IveOSP0bcXgVDPRcfGqA0pjaqUpfVg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/slash": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/slash/-/slash-3.0.0.tgz",
      "integrity": "sha512-g9Q1haeby36OSStwb4ntCGGGaKsaVSjQ68fBxoQcutl5fS1vuY18H3wSt3jFyFtrkx+Kz0V1G85A4MyAdDMi2Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/source-map": {
      "version": "0.6.1",
      "resolved": "https://registry.npmjs.org/source-map/-/source-map-0.6.1.tgz",
      "integrity": "sha512-UjgapumWlbMhkBgzT7Ykc5YXUT46F0iKu8SGXq0bcwP5dz/h0Plj6enJqjz1Zbq2l5WaqYnrVbwWOWMyF3F47g==",
      "dev": true,
      "license": "BSD-3-Clause",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/source-map-support": {
      "version": "0.5.13",
      "resolved": "https://registry.npmjs.org/source-map-support/-/source-map-support-0.5.13.tgz",
      "integrity": "sha512-SHSKFHadjVA5oR4PPqhtAVdcBWwRYVd6g6cAXnIbRiIwc2EhPrTuKUBdSLvlEKyIP3GCf89fltvcZiP9MMFA1w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "buffer-from": "^1.0.0",
        "source-map": "^0.6.0"
      }
    },
    "node_modules/sprintf-js": {
      "version": "1.0.3",
      "resolved": "https://registry.npmjs.org/sprintf-js/-/sprintf-js-1.0.3.tgz",
      "integrity": "sha512-D9cPgkvLlV3t3IzL0D0YLvGA9Ahk4PcvVwUbN0dSGr1aP0Nrt4AEnTUbuGvquEC0mA64Gqt1fzirlRs5ibXx8g==",
      "dev": true,
      "license": "BSD-3-Clause"
    },
    "node_modules/stack-utils": {
      "version": "2.0.6",
      "resolved": "https://registry.npmjs.org/stack-utils/-/stack-utils-2.0.6.tgz",
      "integrity": "sha512-XlkWvfIm6RmsWtNJx+uqtKLS8eqFbxUg0ZzLXqY0caEy9l7hruX8IpiDnjsLavoBgqCCR71TqWO8MaXYheJ3RQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "escape-string-regexp": "^2.0.0"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/string-length": {
      "version": "4.0.2",
      "resolved": "https://registry.npmjs.org/string-length/-/string-length-4.0.2.tgz",
      "integrity": "sha512-+l6rNN5fYHNhZZy41RXsYptCjA2Igmq4EG7kZAYFQI1E1VTXarr6ZPXBg6eq7Y6eK4FEhY6AJlyuFIb/v/S0VQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "char-regex": "^1.0.2",
        "strip-ansi": "^6.0.0"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/string-width": {
      "version": "4.2.3",
      "resolved": "https://registry.npmjs.org/string-width/-/string-width-4.2.3.tgz",
      "integrity": "sha512-wKyQRQpjJ0sIp62ErSZdGsjMJWsap5oRNihHhu6G7JVO/9jIB6UyevL+tXuOqrng8j/cxKTWyWUwvSTriiZz/g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "emoji-regex": "^8.0.0",
        "is-fullwidth-code-point": "^3.0.0",
        "strip-ansi": "^6.0.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/strip-ansi": {
      "version": "6.0.1",
      "resolved": "https://registry.npmjs.org/strip-ansi/-/strip-ansi-6.0.1.tgz",
      "integrity": "sha512-Y38VPSHcqkFrCpFnQ9vuSXmquuv5oXOKpGeT6aGrr3o3Gc9AlVa6JBfUSOCnbxGGZF+/0ooI7KrPuUSztUdU5A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ansi-regex": "^5.0.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/strip-bom": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/strip-bom/-/strip-bom-4.0.0.tgz",
      "integrity": "sha512-3xurFv5tEgii33Zi8Jtp55wEIILR9eh34FAW00PZf+JnSsTmV/ioewSgQl97JHvgjoRGwPShsWm+IdrxB35d0w==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/strip-final-newline": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/strip-final-newline/-/strip-final-newline-2.0.0.tgz",
      "integrity": "sha512-BrpvfNAE3dcvq7ll3xVumzjKjZQ5tI1sEUIKr3Uoks0XUl45St3FlatVqef9prk4jRDzhW6WZg+3bk93y6pLjA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/strip-json-comments": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/strip-json-comments/-/strip-json-comments-3.1.1.tgz",
      "integrity": "sha512-6fPc+R4ihwqP6N/aIv2f1gMH8lOVtWQHoqC4yK6oSDVVocumAsfCqjkXnqiYMhmMwS/mEHLp7Vehlt3ql6lEig==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/supports-color": {
      "version": "7.2.0",
      "resolved": "https://registry.npmjs.org/supports-color/-/supports-color-7.2.0.tgz",
      "integrity": "sha512-qpCAvRl9stuOHveKsn7HncJRvv501qIacKzQlO/+Lwxc9+0q2wLyv4Dfvt80/DPn2pqOBsJdDiogXGR9+OvwRw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "has-flag": "^4.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/supports-preserve-symlinks-flag": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/supports-preserve-symlinks-flag/-/supports-preserve-symlinks-flag-1.0.0.tgz",
      "integrity": "sha512-ot0WnXS9fgdkgIcePe6RHNk1WA8+muPa6cSjeR3V8K27q9BB1rTE3R1p7Hv0z1ZyAc8s6Vvv8DIyWf681MAt0w==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/symbol-tree": {
      "version": "3.2.4",
      "resolved": "https://registry.npmjs.org/symbol-tree/-/symbol-tree-3.2.4.tgz",
      "integrity": "sha512-9QNk5KwDF+Bvz+PyObkmSYjI5ksVUYtjW7AU22r2NKcfLJcXp96hkDWU3+XndOsUb+AQ9QhfzfCT2O+CNWT5Tw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/test-exclude": {
      "version": "6.0.0",
      "resolved": "https://registry.npmjs.org/test-exclude/-/test-exclude-6.0.0.tgz",
      "integrity": "sha512-cAGWPIyOHU6zlmg88jwm7VRyXnMN7iV68OGAbYDk/Mh/xC/pzVPlQtY6ngoIH/5/tciuhGfvESU8GrHrcxD56w==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "@istanbuljs/schema": "^0.1.2",
        "glob": "^7.1.4",
        "minimatch": "^3.0.4"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/text-table": {
      "version": "0.2.0",
      "resolved": "https://registry.npmjs.org/text-table/-/text-table-0.2.0.tgz",
      "integrity": "sha512-N+8UisAXDGk8PFXP4HAzVR9nbfmVJ3zYLAWiTIoqC5v5isinhr+r5uaO8+7r3BMfuNIufIsA7RdpVgacC2cSpw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/tmpl": {
      "version": "1.0.5",
      "resolved": "https://registry.npmjs.org/tmpl/-/tmpl-1.0.5.tgz",
      "integrity": "sha512-3f0uOEAQwIqGuWW2MVzYg8fV/QNnc/IpuJNG837rLuczAaLVHslWHZQj4IGiEl5Hs3kkbhwL9Ab7Hrsmuj+Smw==",
      "dev": true,
      "license": "BSD-3-Clause"
    },
    "node_modules/to-regex-range": {
      "version": "5.0.1",
      "resolved": "https://registry.npmjs.org/to-regex-range/-/to-regex-range-5.0.1.tgz",
      "integrity": "sha512-65P7iz6X5yEr1cwcgvQxbbIw7Uk3gOy5dIdtZ4rDveLqhrdJP+Li/Hx6tyK0NEb+2GCyneCMJiGqrADCSNk8sQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-number": "^7.0.0"
      },
      "engines": {
        "node": ">=8.0"
      }
    },
    "node_modules/tough-cookie": {
      "version": "4.1.4",
      "resolved": "https://registry.npmjs.org/tough-cookie/-/tough-cookie-4.1.4.tgz",
      "integrity": "sha512-Loo5UUvLD9ScZ6jh8beX1T6sO1w2/MpCRpEP7V280GKMVUQ0Jzar2U3UJPsrdbziLEMMhu3Ujnq//rhiFuIeag==",
      "dev": true,
      "license": "BSD-3-Clause",
      "dependencies": {
        "psl": "^1.1.33",
        "punycode": "^2.1.1",
        "universalify": "^0.2.0",
        "url-parse": "^1.5.3"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/tr46": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/tr46/-/tr46-3.0.0.tgz",
      "integrity": "sha512-l7FvfAHlcmulp8kr+flpQZmVwtu7nfRV7NZujtN0OqES8EL4O4e0qqzL0DC5gAvx/ZC/9lk6rhcUwYvkBnBnYA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "punycode": "^2.1.1"
      },
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/type-check": {
      "version": "0.4.0",
      "resolved": "https://registry.npmjs.org/type-check/-/type-check-0.4.0.tgz",
      "integrity": "sha512-XleUoc9uwGXqjWwXaUTZAmzMcFZ5858QA2vvx1Ur5xIcixXIP+8LnFDgRplU30us6teqdlskFfu+ae4K79Ooew==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "prelude-ls": "^1.2.1"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/type-detect": {
      "version": "4.0.8",
      "resolved": "https://registry.npmjs.org/type-detect/-/type-detect-4.0.8.tgz",
      "integrity": "sha512-0fr/mIH1dlO+x7TlcMy+bIDqKPsw/70tVyeHW787goQjhmqaZe10uwLujubK9q9Lg6Fiho1KUKDYz0Z7k7g5/g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/type-fest": {
      "version": "0.21.3",
      "resolved": "https://registry.npmjs.org/type-fest/-/type-fest-0.21.3.tgz",
      "integrity": "sha512-t0rzBq87m3fVcduHDUFhKmyyX+9eo6WQjZvf51Ea/M0Q7+T374Jp1aUiyUl0GKxp8M/OETVHSDvmkyPgvX+X2w==",
      "dev": true,
      "license": "(MIT OR CC0-1.0)",
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/undici-types": {
      "version": "7.14.0",
      "resolved": "https://registry.npmjs.org/undici-types/-/undici-types-7.14.0.tgz",
      "integrity": "sha512-QQiYxHuyZ9gQUIrmPo3IA+hUl4KYk8uSA7cHrcKd/l3p1OTpZcM0Tbp9x7FAtXdAYhlasd60ncPpgu6ihG6TOA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/unicode-canonical-property-names-ecmascript": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/unicode-canonical-property-names-ecmascript/-/unicode-canonical-property-names-ecmascript-2.0.1.tgz",
      "integrity": "sha512-dA8WbNeb2a6oQzAQ55YlT5vQAWGV9WXOsi3SskE3bcCdM0P4SDd+24zS/OCacdRq5BkdsRj9q3Pg6YyQoxIGqg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/unicode-match-property-ecmascript": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/unicode-match-property-ecmascript/-/unicode-match-property-ecmascript-2.0.0.tgz",
      "integrity": "sha512-5kaZCrbp5mmbz5ulBkDkbY0SsPOjKqVS35VpL9ulMPfSl0J0Xsm+9Evphv9CoIZFwre7aJoa94AY6seMKGVN5Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "unicode-canonical-property-names-ecmascript": "^2.0.0",
        "unicode-property-aliases-ecmascript": "^2.0.0"
      },
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/unicode-match-property-value-ecmascript": {
      "version": "2.2.1",
      "resolved": "https://registry.npmjs.org/unicode-match-property-value-ecmascript/-/unicode-match-property-value-ecmascript-2.2.1.tgz",
      "integrity": "sha512-JQ84qTuMg4nVkx8ga4A16a1epI9H6uTXAknqxkGF/aFfRLw1xC/Bp24HNLaZhHSkWd3+84t8iXnp1J0kYcZHhg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/unicode-property-aliases-ecmascript": {
      "version": "2.2.0",
      "resolved": "https://registry.npmjs.org/unicode-property-aliases-ecmascript/-/unicode-property-aliases-ecmascript-2.2.0.tgz",
      "integrity": "sha512-hpbDzxUY9BFwX+UeBnxv3Sh1q7HFxj48DTmXchNgRa46lO8uj3/1iEn3MiNUYTg1g9ctIqXCCERn8gYZhHC5lQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/universalify": {
      "version": "0.2.0",
      "resolved": "https://registry.npmjs.org/universalify/-/universalify-0.2.0.tgz",
      "integrity": "sha512-CJ1QgKmNg3CwvAv/kOFmtnEN05f0D/cn9QntgNOQlQF9dgvVTHj3t+8JPdjqawCHk7V/KA+fbUqzZ9XWhcqPUg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 4.0.0"
      }
    },
    "node_modules/update-browserslist-db": {
      "version": "1.1.3",
      "resolved": "https://registry.npmjs.org/update-browserslist-db/-/update-browserslist-db-1.1.3.tgz",
      "integrity": "sha512-UxhIZQ+QInVdunkDAaiazvvT/+fXL5Osr0JZlJulepYu6Jd7qJtDZjlur0emRlT71EN3ScPoE7gvsuIKKNavKw==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/browserslist"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/browserslist"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "escalade": "^3.2.0",
        "picocolors": "^1.1.1"
      },
      "bin": {
        "update-browserslist-db": "cli.js"
      },
      "peerDependencies": {
        "browserslist": ">= 4.21.0"
      }
    },
    "node_modules/uri-js": {
      "version": "4.4.1",
      "resolved": "https://registry.npmjs.org/uri-js/-/uri-js-4.4.1.tgz",
      "integrity": "sha512-7rKUyy33Q1yc98pQ1DAmLtwX109F7TIfWlW1Ydo8Wl1ii1SeHieeh0HHfPeL2fMXK6z0s8ecKs9frCuLJvndBg==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "punycode": "^2.1.0"
      }
    },
    "node_modules/url-parse": {
      "version": "1.5.10",
      "resolved": "https://registry.npmjs.org/url-parse/-/url-parse-1.5.10.tgz",
      "integrity": "sha512-WypcfiRhfeUP9vvF0j6rw0J3hrWrw6iZv3+22h6iRMJ/8z1Tj6XfLP4DsUix5MhMPnXpiHDoKyoZ/bdCkwBCiQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "querystringify": "^2.1.1",
        "requires-port": "^1.0.0"
      }
    },
    "node_modules/uuid": {
      "version": "9.0.1",
      "resolved": "https://registry.npmjs.org/uuid/-/uuid-9.0.1.tgz",
      "integrity": "sha512-b+1eJOlsR9K8HJpow9Ok3fiWOWSIcIzXodvv0rQjVoOVNpWMpxf1wZNpt4y9h10odCNrqnYp1OBzRktckBe3sA==",
      "funding": [
        "https://github.com/sponsors/broofa",
        "https://github.com/sponsors/ctavan"
      ],
      "license": "MIT",
      "bin": {
        "uuid": "dist/bin/uuid"
      }
    },
    "node_modules/v8-to-istanbul": {
      "version": "9.3.0",
      "resolved": "https://registry.npmjs.org/v8-to-istanbul/-/v8-to-istanbul-9.3.0.tgz",
      "integrity": "sha512-kiGUalWN+rgBJ/1OHZsBtU4rXZOfj/7rKQxULKlIzwzQSvMJUUNgPwJEEh7gU6xEVxC0ahoOBvN2YI8GH6FNgA==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "@jridgewell/trace-mapping": "^0.3.12",
        "@types/istanbul-lib-coverage": "^2.0.1",
        "convert-source-map": "^2.0.0"
      },
      "engines": {
        "node": ">=10.12.0"
      }
    },
    "node_modules/w3c-xmlserializer": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/w3c-xmlserializer/-/w3c-xmlserializer-4.0.0.tgz",
      "integrity": "sha512-d+BFHzbiCx6zGfz0HyQ6Rg69w9k19nviJspaj4yNscGjrHu94sVP+aRm75yEbCh+r2/yR+7q6hux9LVtbuTGBw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "xml-name-validator": "^4.0.0"
      },
      "engines": {
        "node": ">=14"
      }
    },
    "node_modules/walker": {
      "version": "1.0.8",
      "resolved": "https://registry.npmjs.org/walker/-/walker-1.0.8.tgz",
      "integrity": "sha512-ts/8E8l5b7kY0vlWLewOkDXMmPdLcVV4GmOQLyxuSswIJsweeFZtAsMF7k1Nszz+TYBQrlYRmzOnr398y1JemQ==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "makeerror": "1.0.12"
      }
    },
    "node_modules/webidl-conversions": {
      "version": "7.0.0",
      "resolved": "https://registry.npmjs.org/webidl-conversions/-/webidl-conversions-7.0.0.tgz",
      "integrity": "sha512-VwddBukDzu71offAQR975unBIGqfKZpM+8ZX6ySk8nYhVoo5CYaZyzt3YBvYtRtO+aoGlqxPg/B87NGVZ/fu6g==",
      "dev": true,
      "license": "BSD-2-Clause",
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/whatwg-encoding": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/whatwg-encoding/-/whatwg-encoding-2.0.0.tgz",
      "integrity": "sha512-p41ogyeMUrw3jWclHWTQg1k05DSVXPLcVxRTYsXUk+ZooOCZLcoYgPZ/HL/D/N+uQPOtcp1me1WhBEaX02mhWg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "iconv-lite": "0.6.3"
      },
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/whatwg-mimetype": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/whatwg-mimetype/-/whatwg-mimetype-3.0.0.tgz",
      "integrity": "sha512-nt+N2dzIutVRxARx1nghPKGv1xHikU7HKdfafKkLNLindmPU/ch3U31NOCGGA/dmPcmb1VlofO0vnKAcsm0o/Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/whatwg-url": {
      "version": "11.0.0",
      "resolved": "https://registry.npmjs.org/whatwg-url/-/whatwg-url-11.0.0.tgz",
      "integrity": "sha512-RKT8HExMpoYx4igMiVMY83lN6UeITKJlBQ+vR/8ZJ8OCdSiN3RwCq+9gH0+Xzj0+5IrM6i4j/6LuvzbZIQgEcQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "tr46": "^3.0.0",
        "webidl-conversions": "^7.0.0"
      },
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/which": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/which/-/which-2.0.2.tgz",
      "integrity": "sha512-BLI3Tl1TW3Pvl70l3yq3Y64i+awpwXqsGBYWkkqMtnbXgrMD+yj7rhW0kuEDxzJaYXGjEW5ogapKNMEKNMjibA==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "isexe": "^2.0.0"
      },
      "bin": {
        "node-which": "bin/node-which"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/word-wrap": {
      "version": "1.2.5",
      "resolved": "https://registry.npmjs.org/word-wrap/-/word-wrap-1.2.5.tgz",
      "integrity": "sha512-BN22B5eaMMI9UMtjrGd5g5eCYPpCPDUy0FJXbYsaT5zYxjFOckS53SQDE3pWkVoWpHXVb3BrYcEN4Twa55B5cA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/wrap-ansi": {
      "version": "7.0.0",
      "resolved": "https://registry.npmjs.org/wrap-ansi/-/wrap-ansi-7.0.0.tgz",
      "integrity": "sha512-YVGIj2kamLSTxw6NsZjoBxfSwsn0ycdesmc4p+Q21c5zPuZ1pl+NfxVdxPtdHvmNVOQ6XSYG4AUtyt/Fi7D16Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ansi-styles": "^4.0.0",
        "string-width": "^4.1.0",
        "strip-ansi": "^6.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/chalk/wrap-ansi?sponsor=1"
      }
    },
    "node_modules/wrappy": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/wrappy/-/wrappy-1.0.2.tgz",
      "integrity": "sha512-l4Sp/DRseor9wL6EvV2+TuQn63dMkPjZ/sp9XkghTEbV9KlPS1xUsZ3u7/IQO4wxtcFB4bgpQPRcR3QCvezPcQ==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/write-file-atomic": {
      "version": "4.0.2",
      "resolved": "https://registry.npmjs.org/write-file-atomic/-/write-file-atomic-4.0.2.tgz",
      "integrity": "sha512-7KxauUdBmSdWnmpaGFg+ppNjKF8uNLry8LyzjauQDOVONfFLNKrKvQOxZ/VuTIcS/gge/YNahf5RIIQWTSarlg==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "imurmurhash": "^0.1.4",
        "signal-exit": "^3.0.7"
      },
      "engines": {
        "node": "^12.13.0 || ^14.15.0 || >=16.0.0"
      }
    },
    "node_modules/ws": {
      "version": "8.18.3",
      "resolved": "https://registry.npmjs.org/ws/-/ws-8.18.3.tgz",
      "integrity": "sha512-PEIGCY5tSlUt50cqyMXfCzX+oOPqN0vuGqWzbcJ2xvnkzkq46oOpz7dQaTDBdfICb4N14+GARUDw2XV2N4tvzg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10.0.0"
      },
      "peerDependencies": {
        "bufferutil": "^4.0.1",
        "utf-8-validate": ">=5.0.2"
      },
      "peerDependenciesMeta": {
        "bufferutil": {
          "optional": true
        },
        "utf-8-validate": {
          "optional": true
        }
      }
    },
    "node_modules/xml-name-validator": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/xml-name-validator/-/xml-name-validator-4.0.0.tgz",
      "integrity": "sha512-ICP2e+jsHvAj2E2lIHxa5tjXRlKDJo4IdvPvCXbXQGdzSfmSpNVyIKMvoZHjDY9DP0zV17iI85o90vRFXNccRw==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/xmlchars": {
      "version": "2.2.0",
      "resolved": "https://registry.npmjs.org/xmlchars/-/xmlchars-2.2.0.tgz",
      "integrity": "sha512-JZnDKK8B0RCDw84FNdDAIpZK+JuJw+s7Lz8nksI7SIuU3UXJJslUthsi+uWBUYOwPFwW7W7PRLRfUKpxjtjFCw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/y18n": {
      "version": "5.0.8",
      "resolved": "https://registry.npmjs.org/y18n/-/y18n-5.0.8.tgz",
      "integrity": "sha512-0pfFzegeDWJHJIAmTLRP2DwHjdF5s7jo9tuztdQxAhINCdvS+3nGINqPd00AphqJR/0LhANUS6/+7SCb98YOfA==",
      "dev": true,
      "license": "ISC",
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/yallist": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/yallist/-/yallist-3.1.1.tgz",
      "integrity": "sha512-a4UGQaWPH59mOXUYnAG2ewncQS4i4F43Tv3JoAM+s2VDAmS9NsK8GpDMLrCHPksFT7h3K6TOoUNn2pb7RoXx4g==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/yargs": {
      "version": "17.7.2",
      "resolved": "https://registry.npmjs.org/yargs/-/yargs-17.7.2.tgz",
      "integrity": "sha512-7dSzzRQ++CKnNI/krKnYRV7JKKPUXMEh61soaHKg9mrWEhzFWhFnxPxGl+69cD1Ou63C13NUPCnmIcrvqCuM6w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "cliui": "^8.0.1",
        "escalade": "^3.1.1",
        "get-caller-file": "^2.0.5",
        "require-directory": "^2.1.1",
        "string-width": "^4.2.3",
        "y18n": "^5.0.5",
        "yargs-parser": "^21.1.1"
      },
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/yargs-parser": {
      "version": "21.1.1",
      "resolved": "https://registry.npmjs.org/yargs-parser/-/yargs-parser-21.1.1.tgz",
      "integrity": "sha512-tVpsJW7DdjecAiFpbIB1e3qxIQsE6NoPc5/eTdrbbIC4h0LVsWhnoa3g+m2HclBIujHzsxZ4VJVA+GUuc2/LBw==",
      "dev": true,
      "license": "ISC",
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/yocto-queue": {
      "version": "0.1.0",
      "resolved": "https://registry.npmjs.org/yocto-queue/-/yocto-queue-0.1.0.tgz",
      "integrity": "sha512-rVksvsnNCdJ/ohGc6xgPwyN8eheCxsiLM8mxuE/t/mOVqJewPuO1miLpTHQiRgTKCLexL4MeAFVagts7HmNZ2Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    }
  }
}

--- FILE END ---

--- FILE START: index.html ---
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ez Blinds Quotee v0.3 - Spreadsheet Mode</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="data:,">
</head>

<body>
    <div id="app" class="app-container">
        <div class="results-panel">
            <table class="results-table" id="results-table">
                <tbody></tbody>
            </table>
        </div>
        <div class="keyboard-panel" id="numeric-keyboard-panel">

            <div class="top-controls-container">

                <div class="panel-toggle" id="panel-toggle" title="Toggle Keyboard">
                    <svg class="toggle-arrow arrow-down" xmlns="http://www.w3.org/2000/svg" fill="none"
                        viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5" />
                    </svg>
                    <svg class="toggle-arrow arrow-up" xmlns="http://www.w3.org/2000/svg" fill="none"
                        viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 15.75l7.5-7.5 7.5 7.5" />
                    </svg>
                </div>

                <button id="key-m-set">M-SET</button>

                <div class="top-summary-container" id="top-summary-container">
                    <span class="label">SUM</span>
                    <span class="value is-current" id="total-sum-value"></span>
                </div>
            </div>


            <div class="virtual-keyboard" id="numeric-keyboard">
                <button id="key-7">7</button>
                <button id="key-8">8</button>
                <button id="key-9">9</button>
                <button id="key-w">W</button>
                <button id="key-type">Type</button>

                <button id="key-4">4</button>
                <button id="key-5">5</button>
                <button id="key-6">6</button>
                <button id="key-h">H</button>
                <button id="key-price">$</button>

                <button id="key-1">1</button>
                <button id="key-2">2</button>
                <button id="key-3">3</button>
                <button id="key-enter">&#x23CE;</button>

                <button id="key-ins-grid">Ins</button>

                <button id="key-0">0</button>
                <button id="key-del">&#x2B05;</button>
                <button id="key-clear">C</button>
            </div>
        </div>
    </div>

    <div id="function-panel">
    </div>

    <input type="file" id="file-loader" style="display: none;" accept=".json,.csv">
    <div id="toast-container"></div>

    <div id="confirmation-dialog-overlay" class="dialog-overlay is-hidden">
        <div class="dialog-box">
            <p class="dialog-message">The current quote contains unsaved data. What would you like to do?</p>
            <div class="dialog-buttons">
                <button class="dialog-button">Save then Load</button>
                <button class="dialog-button">Load Directly</button>
                <button class="dialog-button secondary">Cancel</button>
            </div>
        </div>
    </div>

    <script type="module" src="./04-core-code/main.js"></script>

    <script>
        // Conditionally load Eruda debugging tool only in development environment
        if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
            var erudaScript = document.createElement('script');
            erudaScript.src = '//cdn.jsdelivr.net/npm/eruda';
            document.body.appendChild(erudaScript);
            erudaScript.onload = function () {
                eruda.init();
            }
        }
    </script>
</body>

</html>
--- FILE END ---

--- FILE START: style.css ---
/* File: style.css */

/* --- [REFACTOR] Import all component style modules --- */
@import url('./04-core-code/ui/partials/left-panel.css');
@import url('./04-core-code/ui/css/dialog.css');
@import url('./04-core-code/ui/css/right-panel.css');
@import url('./04-core-code/ui/css/f3-adjustments.css');
@import url('./04-core-code/ui/css/virtual-keyboard.css');
@import url('./04-core-code/ui/css/results-table.css');
@import url('./04-core-code/ui/css/toast-notification.css');
/* [REMOVED] */

/* --- Global Variables --- */
:root {
    --panel-border-color: #d1d5db;
    --keyboard-bg-color: #f3f4f6;
    --app-bg-color: #ffffff;
    --highlight-color: #a0d3e8;
    --primary-color: #1a237e;
    --medium-blue-color: #1976D2;
    --header-border-color: #696969;
}

/* --- Base Styles --- */
html,
body {
    height: 100%;
    margin: 0;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    background-color: #f0f2f5;
    overflow: hidden;
}

/* --- App Container Layout --- */
.app-container {
    display: flex;
    flex-direction: column;
    height: 100%;
    width: 100%;
    max-width: 1000px;
    margin: 0 auto;
    background-color: var(--app-bg-color);
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
}

.results-panel {
    flex-grow: 1;
    overflow-y: auto;
    position: relative;
    padding: 0 20px 20px 20px;
    box-sizing: border-box;
}

/* [REFACTOR] All component-specific styles below this line have been
    moved to their respective files in the /ui/css/ directory.
    This file now only contains global settings and layout.
*/
--- FILE END ---

--- FILE START: jest.config.js ---
// jest.config.js

export default {
  // ? Jest ????babel-jest ??.js ?
  transform: {
    '^.+\\.js$': 'babel-jest',
  },
  
  // ?? jsdom??????(?window)
  testEnvironment: 'jsdom',

  // ????
  testMatch: [
    '**/__tests__/**/*.js',
    '**/?(*.)+(spec|test).js'
  ],

  // ?? uuid ? URL ?????? npm ? Node.js ?????
  moduleNameMapper: {
    'https://cdn.jsdelivr.net/npm/uuid@9.0.1/dist/esm-browser/index.js': 'uuid',
  },
};
--- FILE END ---

--- FILE START: babel.config.js ---
export default {
  presets: [['@babel/preset-env', {targets: {node: 'current'}}]],
};
--- FILE END ---

--- FILE START: .eslintrc.json ---
{
  "env": {
    "browser": true,
    "es2021": true,
    "jest": true
  },
  "extends": [
    "eslint:recommended",
    "prettier"
  ],
  "parserOptions": {
    "ecmaVersion": "latest",
    "sourceType": "module"
  },
  "rules": {
  }
}
--- FILE END ---

--- FILE START: .prettierrc.json ---
{
  "printWidth": 80,
  "tabWidth": 4,
  "useTabs": false,
  "semi": true,
  "singleQuote": true,
  "trailingComma": "es5",
  "bracketSpacing": true,
  "arrowParens": "always"
}
--- FILE END ---

--- FILE START: 03-data-models/price-matrix-v1.0.json ---
{
  "meta": {
    "supplier": "B WINDOW COVERS PTY LTD",
    "effectiveDate": "2024-12-01",
    "gstIncluded": false,
    "currency": "AUD"
  },
  "fabricTypeSequence": ["B1", "B2", "B3", "B4", "B5", "SN"],
  "matrices": {
    "B1": {
      "name": "UNILINE - SUNSET",
      "drops": [900, 1050, 1200, 1350, 1500, 1650, 1800, 1950, 2100, 2250, 2400, 2550, 2700, 2850, 3000],
      "widths": [630, 830, 1030, 1230, 1430, 1630, 1830, 2030, 2230, 2430, 2630, 2830, 3030],
      "prices": [
        [54, 61, 67, 73, 79, 85, 91, 113, 120, 127, 134, 141, 147],
        [56, 63, 69, 76, 82, 89, 95, 118, 125, 132, 140, 147, 154],
        [57, 64, 71, 79, 86, 93, 100, 122, 130, 138, 146, 154, 161],
        [60, 68, 75, 83, 90, 98, 105, 128, 137, 145, 153, 161, 169],
        [61, 69, 77, 85, 93, 101, 109, 133, 142, 150, 159, 168, 176],
        [64, 73, 81, 89, 98, 106, 115, 139, 148, 157, 166, 176, 185],
        [66, 74, 83, 92, 101, 110, 119, 144, 153, 163, 172, 182, 192],
        [68, 78, 87, 96, 106, 115, 124, 149, 159, 170, 180, 190, 200],
        [70, 79, 89, 99, 109, 119, 129, 154, 165, 175, 186, 196, 207],
        [71, 81, 92, 102, 112, 122, 133, 159, 170, 181, 192, 203, 214],
        [74, 85, 95, 106, 117, 127, 138, 165, 176, 188, 199, 211, 222],
        [75, 86, 98, 109, 120, 131, 142, 169, 181, 193, 205, 217, 229],
        [78, 90, 101, 113, 125, 136, 148, 175, 188, 200, 212, 225, 237],
        [80, 92, 104, 116, 128, 140, 153, 180, 193, 206, 219, 232, 245],
        [81, 94, 106, 119, 132, 144, 157, 185, 198, 212, 225, 238, 252]
      ]
    },
    "B2": {
      "name": "GRACETECH - VALDES, BANES, GEM, ECLIPSE",
      "drops": [900, 1050, 1200, 1350, 1500, 1650, 1800, 1950, 2100, 2250, 2400, 2550, 2700, 2850, 3000],
      "widths": [630, 830, 1030, 1230, 1430, 1630, 1830, 2030, 2230, 2430, 2630, 2830, 3030],
      "prices": [
        [65, 73, 81, 89, 97, 104, 111, 134, 143, 152, 161, 165, null],
        [68, 77, 85, 94, 102, 110, 118, 142, 152, 161, 171, 175, null],
        [70, 80, 89, 99, 108, 116, 125, 149, 160, 170, 181, 185, null],
        [74, 84, 95, 105, 114, 124, 133, 158, 169, 180, 192, 197, null],
        [77, 88, 99, 109, 120, 130, 140, 166, 177, 189, 201, 207, null],
        [80, 92, 104, 115, 126, 137, 148, 174, 187, 200, 212, 218, null],
        [83, 95, 108, 120, 132, 144, 155, 182, 195, 209, 222, 229, null],
        [87, 100, 113, 126, 139, 151, 163, 191, 205, 219, 233, 240, null],
        [89, 103, 117, 131, 144, 157, 170, 198, 213, 228, 243, 250, null],
        [92, 107, 121, 135, 149, 163, 177, 206, 221, 237, 252, 260, null],
        [95, 111, 126, 141, 156, 171, 185, 214, 231, 247, 263, 272, null],
        [98, 114, 130, 146, 162, 177, 192, 222, 239, 256, 273, 282, null],
        [102, 119, 136, 152, 168, 184, 200, 231, 249, 266, 284, 293, null],
        [105, 123, 140, 157, 174, 191, 207, 239, 257, 276, 294, 304, null],
        [107, 126, 144, 162, 180, 197, 214, 246, 266, 285, 304, 314, null]
      ]
    },
    "B3": {
      "name": "SHAW - LE REVE, SKYE",
      "drops": [900, 1050, 1200, 1350, 1500, 1650, 1800, 1950, 2100, 2250, 2400, 2550, 2700, 2850, 3000],
      "widths": [630, 830, 1030, 1230, 1430, 1630, 1830, 2030, 2230, 2430, 2630, 2830, 3030],
      "prices": [
        [70, 79, 89, 98, 107, 115, 124, 148, 157, 167, 177, 187, 194],
        [73, 83, 94, 104, 114, 123, 133, 158, 167, 178, 189, 200, 207],
        [76, 88, 99, 110, 120, 131, 141, 167, 177, 189, 201, 213, 221],
        [81, 93, 105, 117, 128, 140, 151, 178, 189, 202, 215, 228, 236],
        [84, 97, 110, 123, 135, 147, 159, 187, 199, 213, 227, 241, 249],
        [88, 102, 116, 130, 143, 156, 169, 198, 210, 225, 240, 255, 264],
        [91, 106, 121, 136, 150, 164, 178, 207, 221, 236, 252, 268, 278],
        [96, 112, 127, 143, 158, 173, 188, 218, 232, 249, 265, 282, 293],
        [99, 116, 132, 149, 165, 181, 196, 227, 242, 260, 277, 295, 306],
        [102, 120, 137, 155, 172, 188, 205, 236, 253, 271, 289, 308, 320],
        [106, 125, 144, 162, 180, 197, 214, 247, 264, 283, 303, 322, 335],
        [109, 129, 149, 168, 187, 205, 223, 256, 274, 295, 315, 335, 348],
        [114, 135, 155, 175, 195, 214, 233, 267, 286, 307, 328, 349, 363],
        [117, 139, 161, 182, 202, 222, 242, 277, 296, 319, 341, 363, 377],
        [121, 143, 166, 187, 209, 230, 250, 286, 307, 330, 353, 376, 391]
      ]
    },
    "B4": {
      "name": "SHAW - LINESQUE",
      "drops": [900, 1050, 1200, 1350, 1500, 1650, 1800, 1950, 2100, 2250, 2400, 2550, 2700, 2850, 3000],
      "widths": [630, 830, 1030, 1230, 1430, 1630, 1830, 2030, 2230, 2430, 2630, 2830, 3030],
      "prices": [
        [72, 82, 92, 102, 111, 121, 130, 154, 164, 174, 185, 196, 203],
        [75, 86, 97, 108, 119, 129, 139, 165, 175, 187, 199, 211, 218],
        [79, 91, 103, 115, 126, 138, 149, 175, 186, 199, 212, 225, 233],
        [83, 97, 110, 123, 135, 147, 159, 187, 199, 213, 227, 241, 250],
        [87, 101, 115, 129, 143, 156, 169, 197, 210, 225, 240, 255, 265],
        [91, 107, 122, 137, 152, 166, 180, 209, 223, 239, 255, 271, 281],
        [95, 111, 128, 144, 159, 174, 189, 219, 234, 251, 268, 285, 296],
        [100, 117, 134, 151, 168, 184, 200, 231, 247, 265, 283, 301, 312],
        [103, 122, 140, 158, 176, 193, 209, 241, 258, 277, 296, 315, 328],
        [107, 126, 146, 165, 183, 201, 219, 252, 269, 289, 310, 330, 343],
        [111, 132, 152, 172, 192, 211, 230, 264, 282, 303, 324, 345, 359],
        [115, 137, 158, 179, 200, 220, 239, 274, 293, 315, 338, 360, 374],
        [120, 142, 165, 187, 208, 229, 250, 286, 306, 329, 352, 375, 390],
        [124, 147, 171, 194, 216, 238, 260, 297, 318, 342, 366, 390, 406],
        [127, 152, 176, 200, 224, 247, 270, 307, 329, 354, 379, 405, 421]
      ]
    },
    "B5": {
      "name": "SHAW - VIBE",
      "aliasFor": "SN"
    },
    "SN": {
      "name": "UNILINE - UNIVIEW 10%",
      "drops": [900, 1050, 1200, 1350, 1500, 1650, 1800, 1950, 2100, 2250, 2400, 2550, 2700, 2850, 3000],
      "widths": [630, 830, 1030, 1230, 1430, 1630, 1830, 2030, 2230, 2430, 2630, 2830, 3030],
      "prices": [
        [64, 71, 78, 85, 92, 98, 105, 128, 134, 141, 149, 157, 165],
        [66, 74, 81, 89, 96, 103, 110, 134, 141, 148, 157, 165, 174],
        [68, 76, 85, 93, 101, 108, 116, 140, 148, 156, 165, 174, 183],
        [71, 80, 89, 98, 106, 115, 123, 147, 156, 164, 174, 184, 193],
        [73, 83, 92, 102, 111, 120, 129, 154, 163, 171, 182, 192, 202],
        [77, 87, 97, 107, 117, 126, 135, 161, 171, 180, 191, 202, 213],
        [79, 90, 100, 111, 121, 131, 141, 167, 177, 187, 199, 210, 222],
        [82, 94, 105, 116, 127, 138, 148, 175, 185, 196, 208, 220, 232],
        [84, 96, 108, 120, 131, 143, 154, 181, 192, 203, 216, 228, 241],
        [86, 99, 111, 124, 136, 148, 159, 187, 199, 210, 224, 237, 250],
        [90, 103, 116, 129, 142, 154, 166, 195, 207, 219, 233, 247, 261],
        [92, 106, 119, 133, 146, 159, 172, 201, 213, 226, 241, 255, 270],
        [95, 110, 124, 138, 152, 166, 179, 208, 222, 235, 250, 265, 280],
        [98, 113, 128, 143, 157, 171, 185, 215, 229, 242, 258, 274, 289],
        [100, 116, 131, 146, 161, 176, 190, 221, 235, 250, 266, 282, 299]
      ]
    }
  },
  "accessories": {
    "stainlessSteelChain": { "price": 2, "unit": "per meter" },
    "motorRTS": { "price": 130, "unit": "each" },
    "motorBattery": { "price": 160, "unit": "each" },
    "comboBracket": { "price": 10, "unit": "per pair" },
    "slimComboBracket": { "price": 15, "unit": "per pair" },
    "extensionBracket55mm": { "price": 4, "unit": "per pair" },
    "remoteSingleChannel": { "price": 40, "unit": "each" },
    "remoteMultiChannel5to8": { "price": 50, "unit": "each" },
    "remoteMultiChannel16": { "price": 70, "unit": "each" },
    "charger": { "price": 25, "unit": "each" },
    "wifiHub": { "price": 200, "unit": "each", "name": "NEO BOX (WIFI)" },
    "pelmet": { "price": 70, "unit": "per meter" },
    "linkSystem": { "price": 35, "unit": "per link" },
    "winderHD": { "price": 30, "unit": "each" },
    "motorStandard": { "price": 250, "unit": "each" },
    "remoteStandard": { "price": 100, "unit": "each" },
    "chargerStandard": { "price": 50, "unit": "each" },
    "cord3m": { "price": 15, "unit": "each" },

    "cost-winder": { "price": 8 },
    "cost-motor": { "price": 160 },
    "cost-L-1ch-remote": { "price": 40 },
    "cost-L-16ch-remote": { "price": 70 },
    "cost-charger": { "price": 25 },
    "cost-3mcord": { "price": 5 },
    "cost-combo-dual": { "price": 10 },
    "cost-slim-dual": { "price": 15 },
    "cost-A-1ch-remote": { "price": 40 },
    "cost-A-4ch-remote": { "price": 50 },
    "cost-A-16ch-remote": { "price": 70 }
  },
  "businessRules": {
    "validation": {
      "rollerBlind": {
        "minWidth": 250,
        "maxWidth": 3300,
        "minHeight": 300,
        "maxHeight": 3300
      }
    },
    "logic": {
      "hdWinderThresholdArea": 4000000
    },
    "mappings": {
      "accessoryPriceKeyMap": {
        "dual": "comboBracket",
        "winder": "winderHD",
        "motor": "motorStandard",
        "remote": "remoteStandard",
        "charger": "chargerStandard",
        "cord": "cord3m"
      },
      "accessoryMethodNameMap": {
        "dual": "calculateDualPrice",
        "winder": "calculateWinderPrice",
        "motor": "calculateMotorPrice",
        "remote": "calculateRemotePrice",
        "charger": "calculateChargerPrice",
        "cord": "calculateCordPrice"
      }
    }
  }
}
--- FILE END ---

--- FILE START: 04-core-code/app-context.js ---
// 04-core-code/app-context.js

/**
 * @description
 * AppContext ?????DI??????????????
 * ?????
 * 1. ???????Services?Managers?Factories??Views?
 * 2. ?????????????????
 * 3. ? `main.js`????????????
 *
 * ?????
 * - **??**: ????????????
 * - **????**: ???????? AppContext ??????
 * - ****: ???????????mock???
 */
export class AppContext {
    constructor() {
        this.instances = {};
    }

    /**
     * ???
     * @param {string} name - ????
     * @param {object} instance - ?????
     */
    register(name, instance) {
        this.instances[name] = instance;
    }

    /**
     * ????
     * @param {string} name - ??????
     * @returns {object} - ????
     */
    get(name) {
        const instance = this.instances[name];
        if (!instance) {
            throw new Error(`Instance '${name}' not found.`);
        }
        return instance;
    }

    initialize(startingQuoteData = null) {
        // [MODIFIED] This method now only initializes non-UI services and controllers.
        const eventAggregator = new EventAggregator();
        this.register('eventAggregator', eventAggregator);

        const configManager = new ConfigManager(eventAggregator);
        this.register('configManager', configManager);

        const productFactory = new ProductFactory({ configManager });
        this.register('productFactory', productFactory);

        let initialStateWithData = JSON.parse(JSON.stringify(initialState));
        if (startingQuoteData) {
            initialStateWithData.quoteData = startingQuoteData;
        }

        const stateService = new StateService({
            initialState: initialStateWithData,
            eventAggregator,
            productFactory,
            configManager
        });
        this.register('stateService', stateService);

        const calculationService = new CalculationService({
            stateService,
            productFactory,
            configManager
        });
        this.register('calculationService', calculationService);

        const fileService = new FileService({ productFactory });
        this.register('fileService', fileService);

        const focusService = new FocusService({
            stateService
        });
        this.register('focusService', focusService);
    }

    initializeUIComponents() {
        // [NEW] This method initializes all UI-dependent components.
        // It must be called AFTER the HTML partials are loaded.
        const eventAggregator = this.get('eventAggregator');
        const calculationService = this.get('calculationService');
        const stateService = this.get('stateService');
        const configManager = this.get('configManager');
        const productFactory = this.get('productFactory');
        const focusService = this.get('focusService');
        const fileService = this.get('fileService');

        // --- [NEW] Instantiate the new QuoteGeneratorService ---
        const quoteGeneratorService = new QuoteGeneratorService({ calculationService });
        this.register('quoteGeneratorService', quoteGeneratorService);

        // --- Instantiate Right Panel Sub-Views ---
        const rightPanelElement = document.getElementById('function-panel');
        const f1View = new F1CostView({ panelElement: rightPanelElement, eventAggregator, calculationService, stateService });
        const f2View = new F2SummaryView({ panelElement: rightPanelElement, eventAggregator, stateService, calculationService });
        const f3View = new F3QuotePrepView({ panelElement: rightPanelElement, eventAggregator });
        const f4View = new F4ActionsView({ panelElement: rightPanelElement, eventAggregator });

        // --- Instantiate Main RightPanelComponent Manager ---
        const rightPanelComponent = new RightPanelComponent({
            panelElement: rightPanelElement,
            eventAggregator,
            f1View,
            f2View,
            f3View,
            f4View
        });
        this.register('rightPanelComponent', rightPanelComponent);

        // --- [REMOVED] Quote Preview Component instantiation ---

        // --- Instantiate Main Left Panel Views ---
        const k1LocationView = new K1LocationView({ stateService });
        const k2FabricView = new K2FabricView({ stateService, eventAggregator });
        const k3OptionsView = new K3OptionsView({ stateService });
        const dualChainView = new DualChainView({ stateService, calculationService, eventAggregator });
        const driveAccessoriesView = new DriveAccessoriesView({ stateService, calculationService, eventAggregator });

        // --- [MODIFIED] Removed obsolete publishStateChangeCallback from DetailConfigView dependencies ---
        const detailConfigView = new DetailConfigView({
            stateService,
            eventAggregator,
            k1LocationView,
            k2FabricView,
            k3OptionsView,
            dualChainView,
            driveAccessoriesView
        });
        this.register('detailConfigView', detailConfigView);

        const workflowService = new WorkflowService({
            eventAggregator,
            stateService,
            fileService,
            calculationService,
            productFactory,
            detailConfigView,
            quoteGeneratorService // [NEW] Inject the new service
        });
        // [REMOVED]
        this.register('workflowService', workflowService);

        const quickQuoteView = new QuickQuoteView({
            stateService,
            calculationService,
            focusService,
            fileService,
            eventAggregator,
            productFactory,
            configManager
        });
        this.register('quickQuoteView', quickQuoteView);

        const appController = new AppController({
            eventAggregator,
            stateService,
            workflowService,
            quickQuoteView,
            detailConfigView
        });
        this.register('appController', appController);
    }
}

// Import all necessary classes
import { EventAggregator } from './event-aggregator.js';
import { ConfigManager } from './config-manager.js';
import { AppController } from './app-controller.js';
import { ProductFactory } from './strategies/product-factory.js';
import { StateService } from './services/state-service.js';
import { CalculationService } from './services/calculation-service.js';
import { FocusService } from './services/focus-service.js';
import { FileService } from './services/file-service.js';
import { WorkflowService } from './services/workflow-service.js';
import { QuoteGeneratorService } from './services/quote-generator-service.js'; // [NEW]
import { RightPanelComponent } from './ui/right-panel-component.js';
import { QuickQuoteView } from './ui/views/quick-quote-view.js';
import { DetailConfigView } from './ui/views/detail-config-view.js';
import { K1LocationView } from './ui/views/k1-location-view.js';
import { K2FabricView } from './ui/views/k2-fabric-view.js';
import { K3OptionsView } from './ui/views/k3-options-view.js';
import { DualChainView } from './ui/views/dual-chain-view.js';
import { DriveAccessoriesView } from './ui/views/drive-accessories-view.js';
import { initialState } from './config/initial-state.js';
import { F1CostView } from './ui/views/f1-cost-view.js';
import { F2SummaryView } from './ui/views/f2-summary-view.js';
import { F3QuotePrepView } from './ui/views/f3-quote-prep-view.js';
import { F4ActionsView } from './ui/views/f4-actions-view.js';
// [REMOVED]
import { DOM_IDS } from './config/constants.js'; // [NEW]
--- FILE END ---

--- FILE START: 04-core-code/app-controller.js ---
// File: 04-core-code/app-controller.js

import { EVENTS, STORAGE_KEYS } from './config/constants.js';
import * as uiActions from './actions/ui-actions.js';

const AUTOSAVE_INTERVAL_MS = 60000;

export class AppController {
    constructor({ eventAggregator, stateService, quickQuoteView, detailConfigView, workflowService }) {
        this.eventAggregator = eventAggregator;
        this.stateService = stateService; // Still needed for _getFullState and _handleAutoSave
        this.quickQuoteView = quickQuoteView;
        this.detailConfigView = detailConfigView;
        this.workflowService = workflowService;

        this.autoSaveTimerId = null;
        console.log("AppController (Refactored with grouped subscriptions) Initialized.");
        this.initialize();
    }

    initialize() {
        this._subscribeQuickQuoteEvents();
        this._subscribeDetailViewEvents();
        this._subscribeGlobalEvents();
        this._subscribeF1Events();
        this._subscribeF3Events();

        // This is the core of the reactive state update.
        // Any service that updates the state via StateService will trigger this,
        // which in turn re-renders the UI.
        this.eventAggregator.subscribe(EVENTS.INTERNAL_STATE_UPDATED, (newState) => {
            this.eventAggregator.publish(EVENTS.STATE_CHANGED, newState);
        });

        this._startAutoSave();
    }

    _subscribeQuickQuoteEvents() {
        const delegate = (handlerName, ...args) => this.quickQuoteView[handlerName](...args);

        this.eventAggregator.subscribe(EVENTS.NUMERIC_KEY_PRESSED, (data) => delegate('handleNumericKeyPress', data));
        this.eventAggregator.subscribe(EVENTS.USER_REQUESTED_INSERT_ROW, () => delegate('handleInsertRow'));
        this.eventAggregator.subscribe(EVENTS.USER_REQUESTED_DELETE_ROW, () => delegate('handleDeleteRow'));
        this.eventAggregator.subscribe(EVENTS.USER_REQUESTED_SAVE, () => delegate('handleSaveToFile'));
        this.eventAggregator.subscribe(EVENTS.USER_REQUESTED_EXPORT_CSV, () => delegate('handleExportCSV'));
        this.eventAggregator.subscribe(EVENTS.USER_REQUESTED_RESET, () => delegate('handleReset'));
        this.eventAggregator.subscribe(EVENTS.USER_REQUESTED_CLEAR_ROW, () => delegate('handleClearRow'));
        this.eventAggregator.subscribe(EVENTS.USER_MOVED_ACTIVE_CELL, (data) => delegate('handleMoveActiveCell', data));
        this.eventAggregator.subscribe(EVENTS.USER_REQUESTED_CYCLE_TYPE, () => delegate('handleCycleType'));
        this.eventAggregator.subscribe(EVENTS.USER_REQUESTED_CALCULATE_AND_SUM, () => delegate('handleCalculateAndSum'));
        this.eventAggregator.subscribe(EVENTS.USER_TOGGLED_MULTI_SELECT_MODE, () => delegate('handleToggleMultiSelectMode'));
        this.eventAggregator.subscribe(EVENTS.USER_CHOSE_SAVE_THEN_LOAD, () => delegate('handleSaveThenLoad'));
        this.eventAggregator.subscribe(EVENTS.TYPE_CELL_LONG_PRESSED, (data) => delegate('handleTypeCellLongPress', data));
        this.eventAggregator.subscribe(EVENTS.TYPE_BUTTON_LONG_PRESSED, (data) => delegate('handleTypeButtonLongPress', data));
        this.eventAggregator.subscribe(EVENTS.USER_REQUESTED_MULTI_TYPE_SET, () => delegate('handleMultiTypeSet'));
    }

    _subscribeDetailViewEvents() {
        const delegate = (handlerName, data) => {
            const { ui } = this.stateService.getState();
            if (ui.currentView === 'DETAIL_CONFIG') {
                this.detailConfigView[handlerName](data);
            }
        };

        this.eventAggregator.subscribe(EVENTS.TABLE_CELL_CLICKED, (data) => {
            const { ui } = this.stateService.getState();
            if (ui.currentView === 'QUICK_QUOTE') {
                this.quickQuoteView.handleTableCellClick(data);
            } else {
                this.detailConfigView.handleTableCellClick(data);
            }
        });
        this.eventAggregator.subscribe(EVENTS.SEQUENCE_CELL_CLICKED, (data) => {
            const { ui } = this.stateService.getState();
            if (ui.currentView === 'QUICK_QUOTE') {
                this.quickQuoteView.handleSequenceCellClick(data);
            } else {
                this.detailConfigView.handleSequenceCellClick(data);
            }
        });

        // Detail Config View Specific Events
        this.eventAggregator.subscribe(EVENTS.USER_REQUESTED_FOCUS_MODE, (data) => delegate('handleFocusModeRequest', data));
        this.eventAggregator.subscribe(EVENTS.PANEL_INPUT_ENTER_PRESSED, (data) => delegate('handlePanelInputEnter', data));
        this.eventAggregator.subscribe(EVENTS.PANEL_INPUT_BLURRED, (data) => delegate('handlePanelInputBlur', data));
        this.eventAggregator.subscribe(EVENTS.LOCATION_INPUT_ENTER_PRESSED, (data) => delegate('handleLocationInputEnter', data));
        this.eventAggregator.subscribe(EVENTS.USER_REQUESTED_LF_EDIT_MODE, () => delegate('handleLFEditRequest'));
        this.eventAggregator.subscribe(EVENTS.USER_REQUESTED_LF_DELETE_MODE, () => delegate('handleLFDeleteRequest'));
        this.eventAggregator.subscribe(EVENTS.USER_TOGGLED_K3_EDIT_MODE, () => delegate('handleToggleK3EditMode'));
        this.eventAggregator.subscribe(EVENTS.USER_REQUESTED_BATCH_CYCLE, (data) => delegate('handleBatchCycle', data));

        this.eventAggregator.subscribe(EVENTS.DUAL_CHAIN_MODE_CHANGED, (data) => delegate('handleDualChainModeChange', data));
        this.eventAggregator.subscribe(EVENTS.CHAIN_ENTER_PRESSED, (data) => delegate('handleChainEnterPressed', data));
        this.eventAggregator.subscribe(EVENTS.DRIVE_MODE_CHANGED, (data) => delegate('handleDriveModeChange', data));
        this.eventAggregator.subscribe(EVENTS.ACCESSORY_COUNTER_CHANGED, (data) => delegate('handleAccessoryCounterChange', data));
    }

    _subscribeGlobalEvents() {
        this.eventAggregator.subscribe(EVENTS.USER_NAVIGATED_TO_DETAIL_VIEW, () => this.workflowService.handleNavigationToDetailView());
        this.eventAggregator.subscribe(EVENTS.USER_NAVIGATED_TO_QUICK_QUOTE_VIEW, () => this.workflowService.handleNavigationToQuickQuoteView());
        this.eventAggregator.subscribe(EVENTS.USER_SWITCHED_TAB, (data) => this.workflowService.handleTabSwitch(data));
        this.eventAggregator.subscribe(EVENTS.USER_REQUESTED_LOAD, () => this.workflowService.handleUserRequestedLoad());
        this.eventAggregator.subscribe(EVENTS.USER_CHOSE_LOAD_DIRECTLY, () => this.workflowService.handleLoadDirectly());
        this.eventAggregator.subscribe(EVENTS.FILE_LOADED, (data) => this.workflowService.handleFileLoad(data));
    }

    _subscribeF1Events() {
        this.eventAggregator.subscribe(EVENTS.F1_TAB_ACTIVATED, () => this.workflowService.handleF1TabActivation());
        this.eventAggregator.subscribe(EVENTS.F1_DISCOUNT_CHANGED, (data) => this.workflowService.handleF1DiscountChange(data));
    }

    _subscribeF3Events() {
        this.eventAggregator.subscribe(EVENTS.USER_REQUESTED_PRINTABLE_QUOTE, () => this.workflowService.handlePrintableQuoteRequest());
    }

    // This is a special method used by AppContext to publish state, it needs access to stateService.
    _getFullState() {
        return this.stateService.getState();
    }

    publishInitialState() {
        const initialState = this._getFullState();
        this.eventAggregator.publish(EVENTS.STATE_CHANGED, initialState);

        // [NEW] Sync inputValue with the active cell's data after initial load/restore.
        const { ui, quoteData } = initialState;
        const { activeCell } = ui;
        const currentProductKey = quoteData.currentProduct;
        const items = quoteData.products[currentProductKey].items;

        if (activeCell && items[activeCell.rowIndex]) {
            const item = items[activeCell.rowIndex];
            const value = item[activeCell.column] || '';
            // Dispatch an action to update the inputValue in the UI state
            this.stateService.dispatch(uiActions.setInputValue(value));
        }
    }

    _startAutoSave() {
        if (this.autoSaveTimerId) { clearInterval(this.autoSaveTimerId); }
        this.autoSaveTimerId = setInterval(() => this._handleAutoSave(), AUTOSAVE_INTERVAL_MS);
    }

    _handleAutoSave() {
        try {
            const { quoteData } = this.stateService.getState();
            const items = quoteData.products[quoteData.currentProduct].items;
            if (!items) return;
            const hasContent = items.length > 1 || (items.length === 1 && (items[0].width || items[0].height));
            if (hasContent) {
                const dataToSave = JSON.stringify(quoteData);
                localStorage.setItem(STORAGE_KEYS.AUTOSAVE, dataToSave);
            }
        } catch (error) {
            console.error('Auto-save failed:', error);
        }
    }
}
--- FILE END ---

--- FILE START: 04-core-code/config-manager.js ---
// /04-core-code/config-manager.js
import { f2Config } from './config/f2-config.js';
import { paths } from './config/paths.js';
import { EVENTS } from './config/constants.js';

export class ConfigManager {
    constructor(eventAggregator) {
        this.eventAggregator = eventAggregator;
        this.priceMatrices = null;
        this.accessories = null;
        this.f2Config = f2Config || {};
        this.fabricTypeSequence = null;
        this.businessRules = null; // [ADDED] Initialize property for business rules
        this.isInitialized = false;
    }

    async initialize() {
        if (this.isInitialized) return;

        try {
            const response = await fetch(paths.data.priceMatrix);
            
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            const data = await response.json();
            this.priceMatrices = data.matrices;
            this.accessories = data.accessories;
            this.fabricTypeSequence = data.fabricTypeSequence || [];
            this.businessRules = data.businessRules || {}; // [ADDED] Load business rules from JSON
            this.isInitialized = true;
            console.log("ConfigManager initialized and price matrices loaded successfully.");

        } catch (error) {
            console.error("Failed to load price matrices:", error);
            this.eventAggregator.publish(EVENTS.SHOW_NOTIFICATION, { message: 'Error: Could not load the price list file!', type: 'error'});
        }
    }

    getPriceMatrix(fabricType) {
        if (!this.isInitialized || !this.priceMatrices) {
            console.error("ConfigManager not initialized or matrices not loaded.");
            return null;
        }
        
        const matrix = this.priceMatrices[fabricType];

        if (matrix && matrix.aliasFor) {
            const aliasTargetMatrix = this.priceMatrices[matrix.aliasFor];
            if (aliasTargetMatrix) {
                return { ...aliasTargetMatrix, name: matrix.name };
            } else {
                console.error(`Alias target '${matrix.aliasFor}' not found for fabric type '${fabricType}'.`);
                return null;
            }
        }
        
        return matrix || null;
    }

    getAccessoryPrice(accessoryKey) {
        if (!this.isInitialized || !this.accessories) {
            console.error("ConfigManager not initialized or accessories not loaded.");
            return null;
        }
        const accessory = this.accessories[accessoryKey];
        if (accessory && typeof accessory.price === 'number') {
            return accessory.price;
        }
        console.error(`Accessory price for '${accessoryKey}' not found.`);
        return null;
    }

    getFabricTypeSequence() {
        if (!this.isInitialized || !this.fabricTypeSequence) {
            console.error("ConfigManager not initialized or fabricTypeSequence not loaded.");
            return [];
        }
        return this.fabricTypeSequence;
    }

    getF2Config() {
        return this.f2Config;
    }

    // [ADDED] New getter method for validation rules.
    getValidationRules(productType) {
        if (!this.isInitialized || !this.businessRules) return null;
        return this.businessRules.validation?.[productType] || null;
    }

    // [ADDED] New getter method for logic thresholds.
    getLogicThresholds() {
        if (!this.isInitialized || !this.businessRules) return null;
        return this.businessRules.logic || null;
    }

    // [ADDED] New getter method for accessory mappings.
    getAccessoryMappings() {
        if (!this.isInitialized || !this.businessRules) return { accessoryPriceKeyMap: {}, accessoryMethodNameMap: {} };
        return this.businessRules.mappings || { accessoryPriceKeyMap: {}, accessoryMethodNameMap: {} };
    }
}
--- FILE END ---

--- FILE START: 04-core-code/event-aggregator.js ---
// /04_CoreCode/EventAggregator.js

/**
 * EventAggregator (?/ ?)
 * ??????????????? */
export class EventAggregator {
    constructor() {
        this.events = {};
    }

    /**
     * ???     * @param {string} eventName - ?
     * @param {Function} callback - ???????     */
    subscribe(eventName, callback) {
        if (!this.events[eventName]) {
            this.events[eventName] = [];
        }
        this.events[eventName].push(callback);
    }

    /**
     * ?????     * @param {string} eventName - ?
     * @param {*} data - ?????
     */
    publish(eventName, data) {
        if (this.events[eventName]) {
            this.events[eventName].forEach(callback => callback(data));
        }
    }
}
--- FILE END ---

--- FILE START: 04-core-code/main.js ---
// File: 04-core-code/main.js

import { AppContext } from './app-context.js';
import { MigrationService } from './services/migration-service.js';
import { UIManager } from './ui/ui-manager.js';
import { InputHandler } from './ui/input-handler.js';
import { paths } from './config/paths.js';
import { EVENTS, DOM_IDS } from './config/constants.js';
// [REMOVED]

class App {
    constructor() {
        this.appContext = new AppContext();
        const migrationService = new MigrationService();

        const restoredData = migrationService.loadAndMigrateData();

        // [MODIFIED] Initialize only non-UI services first.
        this.appContext.initialize(restoredData);
    }

    async _loadPartials() {
        const eventAggregator = this.appContext.get('eventAggregator');
        const loadPartial = async (url, targetElement, injectionMethod = 'append') => {
            try {
                const response = await fetch(url);
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status} for ${url}`);
                }
                const html = await response.text();
                if (injectionMethod === 'innerHTML') {
                    targetElement.innerHTML = html;
                } else {
                    targetElement.insertAdjacentHTML('beforeend', html);
                }
            } catch (error) {
                console.error(`Failed to load HTML partial from ${url}:`, error);
                eventAggregator.publish(EVENTS.SHOW_NOTIFICATION, { message: `Error: Could not load UI component from ${url}!`, type: 'error' });
            }
        };

        await loadPartial(paths.partials.leftPanel, document.body);

        const functionPanel = document.getElementById(DOM_IDS.FUNCTION_PANEL);
        if (functionPanel) {
            await loadPartial(paths.partials.rightPanel, functionPanel, 'innerHTML');
        }
    }

    async run() {
        console.log("Application starting...");

        // Step 1: Load all HTML templates into the DOM.
        await this._loadPartials();

        // Step 2: [NEW] Initialize all UI components now that their DOM elements exist.
        this.appContext.initializeUIComponents();

        // Step 3: Get all fully initialized instances from the context.
        const eventAggregator = this.appContext.get('eventAggregator');
        const calculationService = this.appContext.get('calculationService');
        const configManager = this.appContext.get('configManager');
        const appController = this.appContext.get('appController');
        const rightPanelComponent = this.appContext.get('rightPanelComponent');

        // [REMOVED]

        // Step 4: Initialize the main UI manager.
        this.uiManager = new UIManager({
            appElement: document.getElementById(DOM_IDS.APP),
            eventAggregator,
            calculationService,
            rightPanelComponent,
            // [REMOVED]
        });

        // Step 5: Continue with the rest of the application startup.
        await configManager.initialize();

        eventAggregator.subscribe(EVENTS.STATE_CHANGED, (state) => {
            this.uiManager.render(state);
        });

        appController.publishInitialState();

        this.inputHandler = new InputHandler(eventAggregator);
        this.inputHandler.initialize();

        eventAggregator.subscribe(EVENTS.APP_READY, () => {
            setTimeout(() => {
                eventAggregator.publish(EVENTS.FOCUS_CELL, { rowIndex: 0, column: 'width' });
            }, 100);
        });

        eventAggregator.publish(EVENTS.APP_READY);

        console.log("Application running and interactive.");

        document.body.classList.add('app-is-ready');
    }
}

document.addEventListener('DOMContentLoaded', async () => {
    const app = new App();
    await app.run();
});
--- FILE END ---

--- FILE START: 04-core-code/actions/quote-actions.js ---
// File: 04-core-code/actions/quote-actions.js

/**
 * @fileoverview Action creators for all quoteData-related state changes.
 */

import { QUOTE_ACTION_TYPES } from '../config/action-types.js';

// --- Quote Data Root ---
export const setQuoteData = (newQuoteData) => ({
    type: QUOTE_ACTION_TYPES.SET_QUOTE_DATA,
    payload: { newQuoteData },
});

export const resetQuoteData = () => ({
    type: QUOTE_ACTION_TYPES.RESET_QUOTE_DATA,
});

// --- Item Array Operations ---
export const insertRow = (selectedIndex) => ({
    type: QUOTE_ACTION_TYPES.INSERT_ROW,
    payload: { selectedIndex },
});

export const deleteRow = (selectedIndex) => ({
    type: QUOTE_ACTION_TYPES.DELETE_ROW,
    payload: { selectedIndex },
});

export const clearRow = (selectedIndex) => ({
    type: QUOTE_ACTION_TYPES.CLEAR_ROW,
    payload: { selectedIndex },
});

export const deleteMultipleRows = (indexesToDelete) => ({
    type: QUOTE_ACTION_TYPES.DELETE_MULTIPLE_ROWS,
    payload: { indexesToDelete },
});

// --- Individual Item Properties ---
export const updateItemValue = (rowIndex, column, value) => ({
    type: QUOTE_ACTION_TYPES.UPDATE_ITEM_VALUE,
    payload: { rowIndex, column, value },
});

export const updateItemProperty = (rowIndex, property, value) => ({
    type: QUOTE_ACTION_TYPES.UPDATE_ITEM_PROPERTY,
    payload: { rowIndex, property, value },
});

export const updateWinderMotorProperty = (rowIndex, property, value) => ({
    type: QUOTE_ACTION_TYPES.UPDATE_WINDER_MOTOR_PROPERTY,
    payload: { rowIndex, property, value },
});

export const cycleK3Property = (rowIndex, column) => ({
    type: QUOTE_ACTION_TYPES.CYCLE_K3_PROPERTY,
    payload: { rowIndex, column },
});

// [FIX] Add missing action creator
export const cycleItemType = (rowIndex) => ({
    type: QUOTE_ACTION_TYPES.CYCLE_ITEM_TYPE,
    payload: { rowIndex },
});

export const setItemType = (rowIndex, newType) => ({
    type: QUOTE_ACTION_TYPES.SET_ITEM_TYPE,
    payload: { rowIndex, newType },
});

// --- Batch Item Updates ---
export const batchUpdateProperty = (property, value) => ({
    type: QUOTE_ACTION_TYPES.BATCH_UPDATE_PROPERTY,
    payload: { property, value },
});

export const batchUpdatePropertyByType = (type, property, value, indexesToExclude) => ({
    type: QUOTE_ACTION_TYPES.BATCH_UPDATE_PROPERTY_BY_TYPE,
    payload: { type, property, value, indexesToExclude },
});

export const batchUpdateFabricType = (newType) => ({
    type: QUOTE_ACTION_TYPES.BATCH_UPDATE_FABRIC_TYPE,
    payload: { newType },
});

export const batchUpdateFabricTypeForSelection = (selectedIndexes, newType) => ({
    type: QUOTE_ACTION_TYPES.BATCH_UPDATE_FABRIC_TYPE_FOR_SELECTION,
    payload: { selectedIndexes, newType },
});

export const batchUpdateLFProperties = (rowIndexes, fabricName, fabricColor) => ({
    type: QUOTE_ACTION_TYPES.BATCH_UPDATE_LF_PROPERTIES,
    payload: { rowIndexes, fabricName, fabricColor },
});

export const removeLFProperties = (rowIndexes) => ({
    type: QUOTE_ACTION_TYPES.REMOVE_LF_PROPERTIES,
    payload: { rowIndexes },
});

// --- Summary & Metadata ---
export const updateAccessorySummary = (data) => ({
    type: QUOTE_ACTION_TYPES.UPDATE_ACCESSORY_SUMMARY,
    payload: { data },
});

export const addLFModifiedRows = (rowIndexes) => ({
    type: QUOTE_ACTION_TYPES.ADD_LF_MODIFIED_ROWS,
    payload: { rowIndexes },
});

export const removeLFModifiedRows = (rowIndexes) => ({
    type: QUOTE_ACTION_TYPES.REMOVE_LF_MODIFIED_ROWS,
    payload: { rowIndexes },
});
--- FILE END ---

--- FILE START: 04-core-code/actions/ui-actions.js ---
// File: 04-core-code/actions/ui-actions.js

/**
 * @fileoverview Action creators for all UI-related state changes.
 */

import { UI_ACTION_TYPES } from '../config/action-types.js';

// --- View & Navigation ---
export const setCurrentView = (viewName) => ({
    type: UI_ACTION_TYPES.SET_CURRENT_VIEW,
    payload: { viewName },
});

export const setVisibleColumns = (columns) => ({
    type: UI_ACTION_TYPES.SET_VISIBLE_COLUMNS,
    payload: { columns },
});

export const setActiveTab = (tabId) => ({
    type: UI_ACTION_TYPES.SET_ACTIVE_TAB,
    payload: { tabId },
});

// --- Input & Selection ---
export const setActiveCell = (rowIndex, column) => ({
    type: UI_ACTION_TYPES.SET_ACTIVE_CELL,
    payload: { rowIndex, column },
});

export const setInputValue = (value) => ({
    type: UI_ACTION_TYPES.SET_INPUT_VALUE,
    payload: { value },
});

export const appendInputValue = (key) => ({
    type: UI_ACTION_TYPES.APPEND_INPUT_VALUE,
    payload: { key },
});

export const deleteLastInputChar = () => ({
    type: UI_ACTION_TYPES.DELETE_LAST_INPUT_CHAR,
});

export const clearInputValue = () => ({
    type: UI_ACTION_TYPES.CLEAR_INPUT_VALUE,
});

export const toggleMultiSelectMode = () => ({
    type: UI_ACTION_TYPES.TOGGLE_MULTI_SELECT_MODE,
});

export const toggleMultiSelectSelection = (rowIndex) => ({
    type: UI_ACTION_TYPES.TOGGLE_MULTI_SELECT_SELECTION,
    payload: { rowIndex },
});

export const clearMultiSelectSelection = () => ({
    type: UI_ACTION_TYPES.CLEAR_MULTI_SELECT_SELECTION,
});


// --- Left Panel Edit Modes ---
export const setActiveEditMode = (mode) => ({
    type: UI_ACTION_TYPES.SET_ACTIVE_EDIT_MODE,
    payload: { mode },
});

export const setTargetCell = (cell) => ({
    type: UI_ACTION_TYPES.SET_TARGET_CELL,
    payload: { cell },
});

export const setLocationInputValue = (value) => ({
    type: UI_ACTION_TYPES.SET_LOCATION_INPUT_VALUE,
    payload: { value },
});

// --- K2 (Fabric/LF) State ---
export const toggleLFSelection = (rowIndex) => ({
    type: UI_ACTION_TYPES.TOGGLE_LF_SELECTION,
    payload: { rowIndex },
});

export const clearLFSelection = () => ({
    type: UI_ACTION_TYPES.CLEAR_LF_SELECTION,
});

// --- K4 & K5 State ---
export const setDualChainMode = (mode) => ({
    type: UI_ACTION_TYPES.SET_DUAL_CHAIN_MODE,
    payload: { mode },
});

export const setDriveAccessoryMode = (mode) => ({
    type: UI_ACTION_TYPES.SET_DRIVE_ACCESSORY_MODE,
    payload: { mode },
});

export const setDriveAccessoryCount = (accessory, count) => ({
    type: UI_ACTION_TYPES.SET_DRIVE_ACCESSORY_COUNT,
    payload: { accessory, count },
});

export const setDriveAccessoryTotalPrice = (accessory, price) => ({
    type: UI_ACTION_TYPES.SET_DRIVE_ACCESSORY_TOTAL_PRICE,
    payload: { accessory, price },
});

export const setDriveGrandTotal = (price) => ({
    type: UI_ACTION_TYPES.SET_DRIVE_GRAND_TOTAL,
    payload: { price },
});

// --- [FIX] Add new action creators for K5 view ---
export const setDualPrice = (price) => ({
    type: UI_ACTION_TYPES.SET_DUAL_PRICE,
    payload: { price },
});

export const clearDualChainInputValue = () => ({
    type: UI_ACTION_TYPES.CLEAR_DUAL_CHAIN_INPUT_VALUE,
});

export const setSummaryWinderPrice = (price) => ({
    type: UI_ACTION_TYPES.SET_SUMMARY_WINDER_PRICE,
    payload: { price },
});

export const setSummaryMotorPrice = (price) => ({
    type: UI_ACTION_TYPES.SET_SUMMARY_MOTOR_PRICE,
    payload: { price },
});

export const setSummaryRemotePrice = (price) => ({
    type: UI_ACTION_TYPES.SET_SUMMARY_REMOTE_PRICE,
    payload: { price },
});

export const setSummaryChargerPrice = (price) => ({
    type: UI_ACTION_TYPES.SET_SUMMARY_CHARGER_PRICE,
    payload: { price },
});

export const setSummaryCordPrice = (price) => ({
    type: UI_ACTION_TYPES.SET_SUMMARY_CORD_PRICE,
    payload: { price },
});

export const setSummaryAccessoriesTotal = (price) => ({
    type: UI_ACTION_TYPES.SET_SUMMARY_ACCESSORIES_TOTAL,
    payload: { price },
});


// --- F1/F2 State ---
export const setF1RemoteDistribution = (qty1, qty16) => ({
    type: UI_ACTION_TYPES.SET_F1_REMOTE_DISTRIBUTION,
    payload: { qty1, qty16 },
});

export const setF1DualDistribution = (comboQty, slimQty) => ({
    type: UI_ACTION_TYPES.SET_F1_DUAL_DISTRIBUTION,
    payload: { comboQty, slimQty },
});

export const setF1DiscountPercentage = (percentage) => ({
    type: UI_ACTION_TYPES.SET_F1_DISCOUNT_PERCENTAGE,
    payload: { percentage },
});

export const setF2Value = (key, value) => ({
    type: UI_ACTION_TYPES.SET_F2_VALUE,
    payload: { key, value },
});

export const toggleF2FeeExclusion = (feeType) => ({
    type: UI_ACTION_TYPES.TOGGLE_F2_FEE_EXCLUSION,
    payload: { feeType },
});

// --- Global UI State ---
export const setSumOutdated = (isOutdated) => ({
    type: UI_ACTION_TYPES.SET_SUM_OUTDATED,
    payload: { isOutdated },
});

export const resetUi = () => ({
    type: UI_ACTION_TYPES.RESET_UI,
});
--- FILE END ---

--- FILE START: 04-core-code/config/action-types.js ---
// File: 04-core-code/config/action-types.js

/**
 * @fileoverview Defines all action types for the strict state management pattern.
 * This centralizes the "vocabulary" of possible state changes.
 */

export const UI_ACTION_TYPES = {
    // View & Navigation
    SET_CURRENT_VIEW: 'ui/setCurrentView',
    SET_VISIBLE_COLUMNS: 'ui/setVisibleColumns',
    SET_ACTIVE_TAB: 'ui/setActiveTab',
    
    // Input & Selection
    SET_ACTIVE_CELL: 'ui/setActiveCell',
    SET_INPUT_VALUE: 'ui/setInputValue',
    APPEND_INPUT_VALUE: 'ui/appendInputValue',
    DELETE_LAST_INPUT_CHAR: 'ui/deleteLastInputChar',
    CLEAR_INPUT_VALUE: 'ui/clearInputValue',
    TOGGLE_MULTI_SELECT_MODE: 'ui/toggleMultiSelectMode',
    TOGGLE_MULTI_SELECT_SELECTION: 'ui/toggleMultiSelectSelection',
    CLEAR_MULTI_SELECT_SELECTION: 'ui/clearMultiSelectSelection',

    // Left Panel Edit Modes
    SET_ACTIVE_EDIT_MODE: 'ui/setActiveEditMode',
    SET_TARGET_CELL: 'ui/setTargetCell',
    SET_LOCATION_INPUT_VALUE: 'ui/setLocationInputValue',

    // K2 (Fabric/LF) State
    TOGGLE_LF_SELECTION: 'ui/toggleLFSelection',
    CLEAR_LF_SELECTION: 'ui/clearLFSelection',

    // K4 (Drive/Accessories) & K5 (Dual/Chain) State
    SET_DUAL_CHAIN_MODE: 'ui/setDualChainMode',
    SET_DRIVE_ACCESSORY_MODE: 'ui/setDriveAccessoryMode',
    SET_DRIVE_ACCESSORY_COUNT: 'ui/setDriveAccessoryCount',
    SET_DRIVE_ACCESSORY_TOTAL_PRICE: 'ui/setDriveAccessoryTotalPrice',
    SET_DRIVE_GRAND_TOTAL: 'ui/setDriveGrandTotal',
    
    // --- [FIX] Add new action types for K5 view ---
    SET_DUAL_PRICE: 'ui/setDualPrice',
    CLEAR_DUAL_CHAIN_INPUT_VALUE: 'ui/clearDualChainInputValue',
    SET_SUMMARY_WINDER_PRICE: 'ui/setSummaryWinderPrice',
    SET_SUMMARY_MOTOR_PRICE: 'ui/setSummaryMotorPrice',
    SET_SUMMARY_REMOTE_PRICE: 'ui/setSummaryRemotePrice',
    SET_SUMMARY_CHARGER_PRICE: 'ui/setSummaryChargerPrice',
    SET_SUMMARY_CORD_PRICE: 'ui/setSummaryCordPrice',
    SET_SUMMARY_ACCESSORIES_TOTAL: 'ui/setSummaryAccessoriesTotal',
    
    // F1 Financial Overview State
    SET_F1_REMOTE_DISTRIBUTION: 'ui/setF1RemoteDistribution',
    SET_F1_DUAL_DISTRIBUTION: 'ui/setF1DualDistribution',
    SET_F1_DISCOUNT_PERCENTAGE: 'ui/setF1DiscountPercentage',

    // F2 Financial Summary State
    SET_F2_VALUE: 'ui/setF2Value',
    TOGGLE_F2_FEE_EXCLUSION: 'ui/toggleF2FeeExclusion',

    // Global UI State
    SET_SUM_OUTDATED: 'ui/setSumOutdated',
    RESET_UI: 'ui/reset',
};

export const QUOTE_ACTION_TYPES = {
    // Quote Data Root
    SET_QUOTE_DATA: 'quote/setQuoteData',
    RESET_QUOTE_DATA: 'quote/resetQuoteData',

    // Item Array Operations
    INSERT_ROW: 'quote/insertRow',
    DELETE_ROW: 'quote/deleteRow',
    CLEAR_ROW: 'quote/clearRow',
    DELETE_MULTIPLE_ROWS: 'quote/deleteMultipleRows',

    // Individual Item Properties
    UPDATE_ITEM_VALUE: 'quote/updateItemValue',
    UPDATE_ITEM_PROPERTY: 'quote/updateItemProperty',
    UPDATE_WINDER_MOTOR_PROPERTY: 'quote/updateWinderMotorProperty',
    CYCLE_K3_PROPERTY: 'quote/cycleK3Property',
    CYCLE_ITEM_TYPE: 'quote/cycleItemType',
    SET_ITEM_TYPE: 'quote/setItemType',

    // Batch Item Updates
    BATCH_UPDATE_PROPERTY: 'quote/batchUpdateProperty',
    BATCH_UPDATE_PROPERTY_BY_TYPE: 'quote/batchUpdatePropertyByType',
    BATCH_UPDATE_FABRIC_TYPE: 'quote/batchUpdateFabricType',
    BATCH_UPDATE_FABRIC_TYPE_FOR_SELECTION: 'quote/batchUpdateFabricTypeForSelection',
    BATCH_UPDATE_LF_PROPERTIES: 'quote/batchUpdateLFProperties',
    REMOVE_LF_PROPERTIES: 'quote/removeLFProperties',
    
    // Summary & Metadata
    UPDATE_ACCESSORY_SUMMARY: 'quote/updateAccessorySummary',
    ADD_LF_MODIFIED_ROWS: 'quote/addLFModifiedRows',
    REMOVE_LF_MODIFIED_ROWS: 'quote/removeLFModifiedRows',
};
--- FILE END ---

--- FILE START: 04-core-code/config/constants.js ---
// File: 04-core-code/config/constants.js

/**
 * @fileoverview Centralized constants for the application.
 * This file eliminates "magic strings" and provides a single source of truth
 * for event names, DOM IDs, storage keys, etc.
 */

export const EVENTS = {
    // --- App Lifecycle & Global ---
    APP_READY: 'appReady',
    STATE_CHANGED: 'stateChanged',
    INTERNAL_STATE_UPDATED: '_internalStateUpdated',
    OPERATION_SUCCESSFUL_AUTO_HIDE_PANEL: 'operationSuccessfulAutoHidePanel',

    // --- UI Notifications & Dialogs ---
    SHOW_NOTIFICATION: 'showNotification',
    SHOW_LOAD_CONFIRMATION_DIALOG: 'showLoadConfirmationDialog',
    SHOW_CONFIRMATION_DIALOG: 'showConfirmationDialog',
    FOCUS_ELEMENT: 'focusElement',

    // --- [NEW] Quote Preview Workflow ---
    USER_REQUESTED_PRINTABLE_QUOTE: 'userRequestedPrintableQuote',
    SHOW_QUOTE_PREVIEW: 'showQuotePreview',

    // --- User Actions: Quick Quote View ---
    NUMERIC_KEY_PRESSED: 'numericKeyPressed',
    USER_REQUESTED_INSERT_ROW: 'userRequestedInsertRow',
    USER_REQUESTED_DELETE_ROW: 'userRequestedDeleteRow',
    USER_REQUESTED_CLEAR_ROW: 'userRequestedClearRow',
    USER_MOVED_ACTIVE_CELL: 'userMovedActiveCell',
    USER_REQUESTED_CYCLE_TYPE: 'userRequestedCycleType',
    USER_REQUESTED_CALCULATE_AND_SUM: 'userRequestedCalculateAndSum',
    USER_TOGGLED_MULTI_SELECT_MODE: 'userToggledMultiSelectMode',
    USER_REQUESTED_MULTI_TYPE_SET: 'userRequestedMultiTypeSet',
    TYPE_CELL_LONG_PRESSED: 'typeCellLongPressed',
    TYPE_BUTTON_LONG_PRESSED: 'typeButtonLongPressed',

    // --- User Actions: Detail View ---
    USER_REQUESTED_FOCUS_MODE: 'userRequestedFocusMode',
    PANEL_INPUT_ENTER_PRESSED: 'panelInputEnterPressed',
    PANEL_INPUT_BLURRED: 'panelInputBlurred',
    LOCATION_INPUT_ENTER_PRESSED: 'locationInputEnterPressed',
    USER_REQUESTED_LF_EDIT_MODE: 'userRequestedLFEditMode',
    USER_REQUESTED_LF_DELETE_MODE: 'userRequestedLFDeleteMode',
    USER_TOGGLED_K3_EDIT_MODE: 'userToggledK3EditMode',
    USER_REQUESTED_BATCH_CYCLE: 'userRequestedBatchCycle',
    DUAL_CHAIN_MODE_CHANGED: 'dualChainModeChanged',
    CHAIN_ENTER_PRESSED: 'chainEnterPressed',
    DRIVE_MODE_CHANGED: 'driveModeChanged',
    ACCESSORY_COUNTER_CHANGED: 'accessoryCounterChanged',

    // --- User Actions: Panels & Navigation ---
    USER_TOGGLED_NUMERIC_KEYBOARD: 'userToggledNumericKeyboard',
    USER_NAVIGATED_TO_DETAIL_VIEW: 'userNavigatedToDetailView',
    USER_NAVIGATED_TO_QUICK_QUOTE_VIEW: 'userNavigatedToQuickQuoteView',
    USER_SWITCHED_TAB: 'userSwitchedTab',

    // --- User Actions: File Operations ---
    USER_REQUESTED_SAVE: 'userRequestedSave',
    USER_REQUESTED_EXPORT_CSV: 'userRequestedExportCSV',
    USER_REQUESTED_RESET: 'userRequestedReset',
    USER_REQUESTED_LOAD: 'userRequestedLoad',
    USER_CHOSE_SAVE_THEN_LOAD: 'userChoseSaveThenLoad',
    USER_CHOSE_LOAD_DIRECTLY: 'userChoseLoadDirectly',
    TRIGGER_FILE_LOAD: 'triggerFileLoad',
    FILE_LOADED: 'fileLoaded',

    // --- User Actions: F1/F2 Panels ---
    F1_TAB_ACTIVATED: 'f1TabActivated',
    F1_DISCOUNT_CHANGED: 'f1DiscountChanged',
    USER_REQUESTED_REMOTE_DISTRIBUTION: 'userRequestedRemoteDistribution',
    USER_REQUESTED_DUAL_DISTRIBUTION: 'userRequestedDualDistribution',
    F2_TAB_ACTIVATED: 'f2TabActivated',
    F2_VALUE_CHANGED: 'f2ValueChanged',
    F2_INPUT_ENTER_PRESSED: 'f2InputEnterPressed',
    TOGGLE_FEE_EXCLUSION: 'toggleFeeExclusion',

    // --- Cell/Row Interactions ---
    TABLE_CELL_CLICKED: 'tableCellClicked',
    SEQUENCE_CELL_CLICKED: 'sequenceCellClicked',
    FOCUS_CELL: 'focusCell',
};

export const DOM_IDS = {
    // --- App & Core Containers ---
    APP: 'app',
    RESULTS_TABLE: 'results-table',
    NUMERIC_KEYBOARD_PANEL: 'numeric-keyboard-panel',
    FUNCTION_PANEL: 'function-panel',
    LEFT_PANEL: 'left-panel',
    TOAST_CONTAINER: 'toast-container',
    CONFIRMATION_DIALOG_OVERLAY: 'confirmation-dialog-overlay',
    FILE_LOADER: 'file-loader',
    QUOTE_PREVIEW_OVERLAY: 'quote-preview-overlay', // [NEW]

    // --- Numeric Keyboard & Top Controls ---
    NUMERIC_KEYBOARD: 'numeric-keyboard',
    PANEL_TOGGLE: 'panel-toggle',
    KEY_M_SET: 'key-m-set',
    TOTAL_SUM_VALUE: 'total-sum-value',
    KEY_INS_GRID: 'key-ins-grid',

    // --- Left Panel & Tabs ---
    LEFT_PANEL_TOGGLE: 'left-panel-toggle',
    LOCATION_INPUT_BOX: 'location-input-box',
    FABRIC_BATCH_TABLE: 'fabric-batch-table',

    // --- Right Panel & Tabs ---
    FUNCTION_PANEL_TOGGLE: 'function-panel-toggle',

    // --- F1 Panel Elements ---
    F1_QTY_WINDER: 'f1-qty-winder',
    F1_PRICE_WINDER: 'f1-price-winder',
    F1_QTY_MOTOR: 'f1-qty-motor',
    F1_PRICE_MOTOR: 'f1-price-motor',
    F1_QTY_REMOTE_1CH: 'f1-qty-remote-1ch',
    F1_PRICE_REMOTE_1CH: 'f1-price-remote-1ch',
    F1_QTY_REMOTE_16CH: 'f1-qty-remote-16ch',
    F1_PRICE_REMOTE_16CH: 'f1-price-remote-16ch',
    F1_QTY_CHARGER: 'f1-qty-charger',
    F1_PRICE_CHARGER: 'f1-price-charger',
    F1_QTY_3M_CORD: 'f1-qty-3m-cord',
    F1_PRICE_3M_CORD: 'f1-price-3m-cord',
    F1_QTY_DUAL_COMBO: 'f1-qty-dual-combo',
    F1_PRICE_DUAL_COMBO: 'f1-price-dual-combo',
    F1_QTY_SLIM: 'f1-qty-slim',
    F1_PRICE_SLIM: 'f1-price-slim',
    F1_PRICE_TOTAL: 'f1-price-total',
    F1_RB_RETAIL: 'f1-rb-retail',
    F1_RB_DISCOUNT_INPUT: 'f1-rb-discount-input',
    F1_RB_PRICE: 'f1-rb-price',
    F1_SUB_TOTAL: 'f1-sub-total',
    F1_GST: 'f1-gst',
    F1_FINAL_TOTAL: 'f1-final-total',

    // --- F3 Panel Elements ---
    BTN_ADD_QUOTE: 'btn-add-quote', // [NEW]

    // --- Dialog-specific Elements ---
    DIALOG_INPUT_1CH: 'dialog-input-1ch',
    DIALOG_INPUT_16CH: 'dialog-input-16ch',
    DIALOG_INPUT_COMBO: 'dialog-input-combo',
    DIALOG_INPUT_SLIM: 'dialog-input-slim',
};

export const STORAGE_KEYS = {
    AUTOSAVE: 'quoteAutoSaveData',
};
--- FILE END ---

--- FILE START: 04-core-code/config/f2-config.js ---
// /04-core-code/config/f2-config.js

/**
 * @fileoverview Configuration for F2 summary panel, including unit prices for various fees.
 */
export const f2Config = {
    unitPrices: {
        wifi: 200,
        delivery: 100,
        install: 20,
        removal: 20
    }
};
--- FILE END ---

--- FILE START: 04-core-code/config/initial-state.js ---
// File: 04-core-code/config/initial-state.js

/**
 * @fileoverview Defines the initial state of the application.
 * This structure serves as the default blueprint for the entire app's data.
 */

export const initialState = {
    ui: {
        // --- SPA View Management ---
        currentView: 'QUICK_QUOTE', 
        visibleColumns: ['sequence', 'width', 'height', 'TYPE', 'Price'],
        activeTabId: 'k1-tab',

        // --- Input & Selection State ---
        inputValue: '',
        inputMode: 'width',
        activeCell: { rowIndex: 0, column: 'width' },
        selectedRowIndex: null,
        isMultiSelectMode: false,
        multiSelectSelectedIndexes: [],

        // --- Left Panel Edit Modes & States ---
        activeEditMode: null,
        targetCell: null,
        locationInputValue: '',
        
        // --- K2 (Fabric/LF) State ---
        lfSelectedRowIndexes: [],
        // [REMOVED] lfModifiedRowIndexes is moved to quoteData.uiMetadata for persistence.

        // --- K5 (Dual/Chain) State ---
        dualChainMode: null,
        dualChainInputValue: '',
        dualPrice: null,

        // --- K4 (Drive/Accessories) State ---
        driveAccessoryMode: null,
        driveRemoteCount: 0,
        driveChargerCount: 0,
        driveCordCount: 0,
        driveWinderTotalPrice: null,
        driveMotorTotalPrice: null,
        driveRemoteTotalPrice: null,
        driveChargerTotalPrice: null,
        driveCordTotalPrice: null,
        driveGrandTotal: null,

        // --- K5 Summary Display State ---
        summaryWinderPrice: null,
        summaryMotorPrice: null,
        summaryRemotePrice: null,
        summaryChargerPrice: null,
        summaryCordPrice: null,
        summaryAccessoriesTotal: null,

        // [RESTRUCTURED] --- F1 Financial Overview State ---
        f1: {
            discountPercentage: 0,
            remote_1ch_qty: 0,
            remote_16ch_qty: null,
            dual_combo_qty: null,
            dual_slim_qty: null,
        },
        
        // --- F2 Financial Summary State ---
        f2: {
            wifiQty: null, deliveryQty: null, installQty: null, removalQty: null,
            mulTimes: null, discount: null, wifiSum: null, deliveryFee: null,
            installFee: null, removalFee: null, deliveryFeeExcluded: false,
            installFeeExcluded: false, removalFeeExcluded: false, acceSum: null,
            eAcceSum: null, surchargeFee: null, totalSumForRbTime: null,
            firstRbPrice: null, disRbPrice: null, singleprofit: null,
            rbProfit: null, sumPrice: null, sumProfit: null, gst: null, netProfit: null
        },

        // --- Global UI State ---
        isSumOutdated: false,
        welcomeDialogShown: false
    },
    quoteData: {
        currentProduct: 'rollerBlind',
        products: {
            rollerBlind: {
                items: [
                    { 
                        itemId: `item-${Date.now()}`, 
                        width: null, height: null, fabricType: null, linePrice: null,
                        location: '', fabric: '', color: '', over: '',
                        oi: '', lr: '', dual: '', chain: null, winder: '', motor: ''
                    }
                ],
                summary: { 
                    totalSum: null,
                    accessories: {
                        winder: { count: 0, price: 0 },
                        motor: { count: 0, price: 0 },
                        remote: { type: 'standard', count: 0, price: 0 },
                        charger: { count: 0, price: 0 },
                        cord3m: { count: 0, price: 0 },
                        remoteCostSum: null,
                        winderCostSum: null,
                        motorCostSum: null,
                        chargerCostSum: null,
                        cordCostSum: null,
                    }
                }
            }
        },
        // [ADDED] A new container for UI-related metadata that needs to be saved.
        uiMetadata: {
            lfModifiedRowIndexes: []
        },
        quoteId: null,
        issueDate: null,
        dueDate: null,
        status: "Configuring",
        costDiscountPercentage: 0,
        customer: { 
            name: "",
            address: "",
            phone: "",
            email: ""
        }
    }
};
--- FILE END ---

--- FILE START: 04-core-code/config/paths.js ---
export const paths = {
    partials: {
        leftPanel: './04-core-code/ui/partials/left-panel.html',
        rightPanel: './04-core-code/ui/partials/right-panel.html',
        quoteTemplate: './04-core-code/ui/partials/quote-template-final.html', // [NEW]
        detailedItemList: './04-core-code/ui/partials/detailed-item-list-final.html' // [NEW]
    },
    data: {
        priceMatrix: './03-data-models/price-matrix-v1.0.json'
    }
};
--- FILE END ---

--- FILE START: 04-core-code/reducers/quote-reducer.js ---
// File: 04-core-code/reducers/quote-reducer.js

import { QUOTE_ACTION_TYPES } from '../config/action-types.js';
import { initialState } from '../config/initial-state.js';

function _consolidateEmptyRows(items, productFactory, productKey) {
    let newItems = [...items];
    if (!newItems || newItems.length === 0) return [];

    while (newItems.length > 1) {
        const lastItem = newItems[newItems.length - 1];
        const secondLastItem = newItems[newItems.length - 2];
        const isLastItemEmpty = !lastItem.width && !lastItem.height && !lastItem.fabricType;
        const isSecondLastItemEmpty = !secondLastItem.width && !secondLastItem.height && !secondLastItem.fabricType;

        if (isLastItemEmpty && isSecondLastItemEmpty) {
            newItems.pop();
        } else {
            break;
        }
    }

    const lastItem = newItems[newItems.length - 1];
    if (lastItem && (lastItem.width || lastItem.height)) {
        const productStrategy = productFactory.getProductStrategy(productKey);
        newItems.push(productStrategy.getInitialItemData());
    }
    
    return newItems;
}

export function quoteReducer(state, action, { productFactory, configManager }) {
    const productKey = state.currentProduct;
    let productData = state.products[productKey];
    let items;

    switch (action.type) {
        case QUOTE_ACTION_TYPES.SET_QUOTE_DATA:
            return action.payload.newQuoteData;

        case QUOTE_ACTION_TYPES.RESET_QUOTE_DATA:
            return JSON.parse(JSON.stringify(initialState.quoteData));
        
        case QUOTE_ACTION_TYPES.INSERT_ROW: {
            items = [...productData.items];
            const productStrategy = productFactory.getProductStrategy(productKey);
            const newItem = productStrategy.getInitialItemData();
            items.splice(action.payload.selectedIndex + 1, 0, newItem);
            productData = { ...productData, items };
            return { ...state, products: { ...state.products, [productKey]: productData } };
        }

        case QUOTE_ACTION_TYPES.DELETE_ROW: {
            items = [...productData.items];
            const { selectedIndex } = action.payload;
            const itemToDelete = items[selectedIndex];
            if (!itemToDelete) return state;

            const isLastPopulatedRow = selectedIndex === items.length - 2 && items.length > 1 && !items[items.length - 1].width && !items[items.length-1].height;

            if (isLastPopulatedRow || items.length === 1) {
                const productStrategy = productFactory.getProductStrategy(productKey);
                const newItem = productStrategy.getInitialItemData();
                newItem.itemId = itemToDelete.itemId;
                items[selectedIndex] = newItem;
            } else {
                items.splice(selectedIndex, 1);
            }
            items = _consolidateEmptyRows(items, productFactory, productKey);
            productData = { ...productData, items };
            return { ...state, products: { ...state.products, [productKey]: productData } };
        }
        
        case QUOTE_ACTION_TYPES.CLEAR_ROW: {
            items = [...productData.items];
            const { selectedIndex } = action.payload;
            const itemToClear = items[selectedIndex];
            if (itemToClear) {
                const productStrategy = productFactory.getProductStrategy(productKey);
                const newItem = productStrategy.getInitialItemData();
                newItem.itemId = itemToClear.itemId;
                items[selectedIndex] = newItem;
                productData = { ...productData, items };
                return { ...state, products: { ...state.products, [productKey]: productData } };
            }
            return state;
        }

        case QUOTE_ACTION_TYPES.UPDATE_ITEM_VALUE: {
            items = [...productData.items];
            const { rowIndex, column, value } = action.payload;
            const targetItem = items[rowIndex];
            if (!targetItem || targetItem[column] === value) return state;
            
            const newItem = { ...targetItem, [column]: value };

            if ((column === 'width' || column === 'height') && newItem.width && newItem.height) {
                const logicThresholds = configManager.getLogicThresholds();
                if (logicThresholds && (newItem.width * newItem.height) > logicThresholds.hdWinderThresholdArea && !newItem.motor) {
                    newItem.winder = 'HD';
                }
            }
            items[rowIndex] = newItem;
            items = _consolidateEmptyRows(items, productFactory, productKey);
            productData = { ...productData, items };
            return { ...state, products: { ...state.products, [productKey]: productData } };
        }
        
        case QUOTE_ACTION_TYPES.BATCH_UPDATE_PROPERTY: {
            items = productData.items.map((item, index) => {
                if (index === productData.items.length - 1) {
                    return item; // Exclude the last (empty backup) row from batch updates.
                }
                return { ...item, [action.payload.property]: action.payload.value };
            });
            productData = { ...productData, items };
            return { ...state, products: { ...state.products, [productKey]: productData } };
        }

        case QUOTE_ACTION_TYPES.BATCH_UPDATE_PROPERTY_BY_TYPE: {
            items = [...productData.items];
            const { type, property, value, indexesToExclude } = action.payload;
            items = items.map((item, index) => {
                if (!indexesToExclude.has(index) && item.fabricType === type && item[property] !== value) {
                    return { ...item, [property]: value };
                }
                return item;
            });
            productData = { ...productData, items };
            return { ...state, products: { ...state.products, [productKey]: productData } };
        }

        case QUOTE_ACTION_TYPES.UPDATE_ITEM_PROPERTY: {
            items = [...productData.items];
            const { rowIndex, property, value } = action.payload;
            const item = items[rowIndex];
            if (!item || item[property] === value) return state;
            items[rowIndex] = { ...item, [property]: value };
            productData = { ...productData, items };
            return { ...state, products: { ...state.products, [productKey]: productData } };
        }
        
        case QUOTE_ACTION_TYPES.UPDATE_WINDER_MOTOR_PROPERTY: {
            items = [...productData.items];
            const { rowIndex, property, value } = action.payload;
            const item = items[rowIndex];
            if (!item || item[property] === value) return state;

            const newItem = { ...item, [property]: value };
            if (property === 'winder' && value) newItem.motor = '';
            if (property === 'motor' && value) newItem.winder = '';
            
            items[rowIndex] = newItem;
            productData = { ...productData, items };
            return { ...state, products: { ...state.products, [productKey]: productData } };
        }

        case QUOTE_ACTION_TYPES.CYCLE_K3_PROPERTY: {
            items = [...productData.items];
            const { rowIndex, column } = action.payload;
            const item = items[rowIndex];
            if (!item) return state;

            const BATCH_CYCLE_SEQUENCES = {
                over: ['O', ''],
                oi: ['IN', 'OUT'],
                lr: ['L', 'R']
            };
            const sequence = BATCH_CYCLE_SEQUENCES[column];
            if (!sequence) return state;

            const currentValue = item[column] || '';
            const currentIndex = sequence.indexOf(currentValue);
            const nextIndex = (currentIndex + 1) % sequence.length;
            const nextValue = sequence[nextIndex];

            items[rowIndex] = { ...item, [column]: nextValue };
            productData = { ...productData, items };
            return { ...state, products: { ...state.products, [productKey]: productData } };
        }

        case QUOTE_ACTION_TYPES.CYCLE_ITEM_TYPE:
        case QUOTE_ACTION_TYPES.SET_ITEM_TYPE:
        case QUOTE_ACTION_TYPES.BATCH_UPDATE_FABRIC_TYPE:
        case QUOTE_ACTION_TYPES.BATCH_UPDATE_FABRIC_TYPE_FOR_SELECTION: {
            items = [...productData.items];
            const TYPE_SEQUENCE = configManager.getFabricTypeSequence();
            if (TYPE_SEQUENCE.length === 0) return state;

            let changedIndexes = [];
            let newItems;

            if (action.type === QUOTE_ACTION_TYPES.CYCLE_ITEM_TYPE) {
                const { rowIndex } = action.payload;
                const item = items[rowIndex];
                if (item && (item.width || item.height)) {
                    const currentType = item.fabricType || TYPE_SEQUENCE[TYPE_SEQUENCE.length - 1];
                    const currentIndex = TYPE_SEQUENCE.indexOf(currentType);
                    const nextType = TYPE_SEQUENCE[(currentIndex + 1) % TYPE_SEQUENCE.length];
                    items[rowIndex] = { ...item, fabricType: nextType, linePrice: null, fabric: '', color: '' };
                    changedIndexes.push(rowIndex);
                }
                newItems = items;
            } else if (action.type === QUOTE_ACTION_TYPES.SET_ITEM_TYPE) {
                const { rowIndex, newType } = action.payload;
                if (items[rowIndex] && items[rowIndex].fabricType !== newType) {
                    items[rowIndex] = { ...items[rowIndex], fabricType: newType, linePrice: null, fabric: '', color: '' };
                    changedIndexes.push(rowIndex);
                }
                newItems = items;
            } else if (action.type === QUOTE_ACTION_TYPES.BATCH_UPDATE_FABRIC_TYPE) {
                let { newType } = action.payload;
                if (newType === undefined) { 
                    const firstItem = items.find(item => item.width && item.height);
                    const currentType = firstItem ? (firstItem.fabricType || TYPE_SEQUENCE[TYPE_SEQUENCE.length - 1]) : TYPE_SEQUENCE[TYPE_SEQUENCE.length - 1];
                    const currentIndex = TYPE_SEQUENCE.indexOf(currentType);
                    newType = TYPE_SEQUENCE[(currentIndex + 1) % TYPE_SEQUENCE.length];
                }
                newItems = items.map((item, index) => {
                    if (item.width && item.height && item.fabricType !== newType) {
                        changedIndexes.push(index);
                        return { ...item, fabricType: newType, linePrice: null, fabric: '', color: '' };
                    }
                    return item;
                });
            } else if (action.type === QUOTE_ACTION_TYPES.BATCH_UPDATE_FABRIC_TYPE_FOR_SELECTION) {
                const { selectedIndexes, newType } = action.payload;
                newItems = items.map((item, index) => {
                    if (selectedIndexes.includes(index) && item.width && item.height && item.fabricType !== newType) {
                        changedIndexes.push(index);
                        return { ...item, fabricType: newType, linePrice: null, fabric: '', color: '' };
                    }
                    return item;
                });
            }

            if (changedIndexes.length > 0) {
                const modifiedIndexes = new Set(state.uiMetadata.lfModifiedRowIndexes);
                changedIndexes.forEach(index => modifiedIndexes.delete(index));
                const newUiMetadata = { ...state.uiMetadata, lfModifiedRowIndexes: Array.from(modifiedIndexes) };
                productData = { ...productData, items: newItems };
                return { ...state, products: { ...state.products, [productKey]: productData }, uiMetadata: newUiMetadata };
            }
            return state;
        }

        case QUOTE_ACTION_TYPES.BATCH_UPDATE_LF_PROPERTIES: {
            const { rowIndexes, fabricName, fabricColor } = action.payload;
            items = productData.items.map((item, index) => {
                if (rowIndexes.includes(index)) {
                    return { ...item, fabric: fabricName, color: fabricColor };
                }
                return item;
            });
            productData = { ...productData, items };
            return { ...state, products: { ...state.products, [productKey]: productData } };
        }

        case QUOTE_ACTION_TYPES.REMOVE_LF_PROPERTIES: {
            const { rowIndexes } = action.payload;
            items = productData.items.map((item, index) => {
                if (rowIndexes.includes(index)) {
                    return { ...item, fabric: '', color: '' };
                }
                return item;
            });
            productData = { ...productData, items };
            return { ...state, products: { ...state.products, [productKey]: productData } };
        }

        case QUOTE_ACTION_TYPES.ADD_LF_MODIFIED_ROWS: {
            const modifiedIndexes = new Set([...state.uiMetadata.lfModifiedRowIndexes, ...action.payload.rowIndexes]);
            return { ...state, uiMetadata: { ...state.uiMetadata, lfModifiedRowIndexes: Array.from(modifiedIndexes) } };
        }

        case QUOTE_ACTION_TYPES.REMOVE_LF_MODIFIED_ROWS: {
            const indexesToRemove = new Set(action.payload.rowIndexes);
            const newModifiedIndexes = state.uiMetadata.lfModifiedRowIndexes.filter(i => !indexesToRemove.has(i));
            return { ...state, uiMetadata: { ...state.uiMetadata, lfModifiedRowIndexes: newModifiedIndexes } };
        }

        case QUOTE_ACTION_TYPES.UPDATE_ACCESSORY_SUMMARY: {
            const summary = productData.summary;
            const newAccessories = { ...summary.accessories, ...action.payload.data };
            const newSummary = { ...summary, accessories: newAccessories };
            productData = { ...productData, summary: newSummary };
            return { ...state, products: { ...state.products, [productKey]: productData } };
        }
        
        default:
            return state;
    }
}
--- FILE END ---

--- FILE START: 04-core-code/reducers/root-reducer.js ---
// File: 04-core-code/reducers/root-reducer.js

/**
 * @fileoverview This is the single source of truth for all state mutation logic.
 * It has been refactored into a "combiner" that delegates actions to sub-reducers.
 */

import { uiReducer } from './ui-reducer.js';
import { quoteReducer } from './quote-reducer.js';

export function createRootReducer(dependencies) {
    const { productFactory, configManager } = dependencies;

    // This is the combined root reducer.
    return function rootReducer(state, action) {
        // Delegate UI actions to the uiReducer.
        const newUiState = uiReducer(state.ui, action);

        // Delegate quote data actions to the quoteReducer, passing dependencies.
        const newQuoteState = quoteReducer(state.quoteData, action, { productFactory, configManager });

        // If neither sub-reducer changed its part of the state, return the original state.
        if (newUiState === state.ui && newQuoteState === state.quoteData) {
            return state;
        }

        // Otherwise, combine the results into a new state object.
        return {
            ...state,
            ui: newUiState,
            quoteData: newQuoteState,
        };
    };
}
--- FILE END ---

--- FILE START: 04-core-code/reducers/ui-reducer.js ---
// File: 04-core-code/reducers/ui-reducer.js
import { UI_ACTION_TYPES } from '../config/action-types.js';
import { initialState } from '../config/initial-state.js';

export function uiReducer(state, action) {
    switch (action.type) {
        case UI_ACTION_TYPES.SET_CURRENT_VIEW:
            return { ...state, currentView: action.payload.viewName };
        case UI_ACTION_TYPES.SET_VISIBLE_COLUMNS:
            return { ...state, visibleColumns: action.payload.columns };
        case UI_ACTION_TYPES.SET_ACTIVE_TAB:
            return { ...state, activeTabId: action.payload.tabId };
        case UI_ACTION_TYPES.SET_ACTIVE_CELL:
            return { ...state, activeCell: action.payload, inputMode: action.payload.column };
        case UI_ACTION_TYPES.SET_INPUT_VALUE:
            return { ...state, inputValue: String(action.payload.value || '') };
        case UI_ACTION_TYPES.APPEND_INPUT_VALUE:
            return { ...state, inputValue: state.inputValue + action.payload.key };
        case UI_ACTION_TYPES.DELETE_LAST_INPUT_CHAR:
            return { ...state, inputValue: state.inputValue.slice(0, -1) };
        case UI_ACTION_TYPES.CLEAR_INPUT_VALUE:
            return { ...state, inputValue: '' };
        case UI_ACTION_TYPES.TOGGLE_MULTI_SELECT_MODE: {
            const isEnteringMode = !state.isMultiSelectMode;
            const newSelectedIndexes = isEnteringMode && state.selectedRowIndex !== null ? [state.selectedRowIndex] : [];
            return { ...state, isMultiSelectMode: isEnteringMode, multiSelectSelectedIndexes: newSelectedIndexes, selectedRowIndex: null };
        }
        case UI_ACTION_TYPES.TOGGLE_MULTI_SELECT_SELECTION: {
            const selectedIndexes = new Set(state.multiSelectSelectedIndexes);
            if (selectedIndexes.has(action.payload.rowIndex)) {
                selectedIndexes.delete(action.payload.rowIndex);
            } else {
                selectedIndexes.add(action.payload.rowIndex);
            }
            return { ...state, multiSelectSelectedIndexes: Array.from(selectedIndexes) };
        }
        case UI_ACTION_TYPES.CLEAR_MULTI_SELECT_SELECTION:
            return { ...state, multiSelectSelectedIndexes: [] };
        case UI_ACTION_TYPES.SET_ACTIVE_EDIT_MODE:
            return { ...state, activeEditMode: action.payload.mode };
        case UI_ACTION_TYPES.SET_TARGET_CELL:
            return { ...state, targetCell: action.payload.cell };
        case UI_ACTION_TYPES.SET_LOCATION_INPUT_VALUE:
            return { ...state, locationInputValue: action.payload.value };
        case UI_ACTION_TYPES.TOGGLE_LF_SELECTION: {
            const selectedIndexes = new Set(state.lfSelectedRowIndexes);
            if (selectedIndexes.has(action.payload.rowIndex)) {
                selectedIndexes.delete(action.payload.rowIndex);
            } else {
                selectedIndexes.add(action.payload.rowIndex);
            }
            return { ...state, lfSelectedRowIndexes: Array.from(selectedIndexes) };
        }
        case UI_ACTION_TYPES.CLEAR_LF_SELECTION:
            return { ...state, lfSelectedRowIndexes: [] };
        case UI_ACTION_TYPES.SET_DUAL_CHAIN_MODE:
            return { ...state, dualChainMode: action.payload.mode };
        case UI_ACTION_TYPES.SET_DRIVE_ACCESSORY_MODE:
            return { ...state, driveAccessoryMode: action.payload.mode };
        case UI_ACTION_TYPES.SET_DRIVE_ACCESSORY_COUNT: {
            const { accessory, count } = action.payload;
            const newUi = { ...state };
            if (count >= 0) {
                switch (accessory) {
                    case 'remote': newUi.driveRemoteCount = count; break;
                    case 'charger': newUi.driveChargerCount = count; break;
                    case 'cord': newUi.driveCordCount = count; break;
                }
            }
            return newUi;
        }
        case UI_ACTION_TYPES.SET_DRIVE_ACCESSORY_TOTAL_PRICE: {
            const { accessory, price } = action.payload;
            const newUi = { ...state };
            switch(accessory) {
                case 'winder': newUi.driveWinderTotalPrice = price; break;
                case 'motor': newUi.driveMotorTotalPrice = price; break;
                case 'remote': newUi.driveRemoteTotalPrice = price; break;
                case 'charger': newUi.driveChargerTotalPrice = price; break;
                case 'cord': newUi.driveCordTotalPrice = price; break;
            }
            return newUi;
        }
        case UI_ACTION_TYPES.SET_DRIVE_GRAND_TOTAL:
            return { ...state, driveGrandTotal: action.payload.price };
        case UI_ACTION_TYPES.SET_DUAL_PRICE:
            return { ...state, dualPrice: action.payload.price };
        case UI_ACTION_TYPES.CLEAR_DUAL_CHAIN_INPUT_VALUE:
            return { ...state, dualChainInputValue: '' };
        case UI_ACTION_TYPES.SET_SUMMARY_WINDER_PRICE:
            return { ...state, summaryWinderPrice: action.payload.price };
        case UI_ACTION_TYPES.SET_SUMMARY_MOTOR_PRICE:
            return { ...state, summaryMotorPrice: action.payload.price };
        case UI_ACTION_TYPES.SET_SUMMARY_REMOTE_PRICE:
            return { ...state, summaryRemotePrice: action.payload.price };
        case UI_ACTION_TYPES.SET_SUMMARY_CHARGER_PRICE:
            return { ...state, summaryChargerPrice: action.payload.price };
        case UI_ACTION_TYPES.SET_SUMMARY_CORD_PRICE:
            return { ...state, summaryCordPrice: action.payload.price };
        case UI_ACTION_TYPES.SET_SUMMARY_ACCESSORIES_TOTAL:
            return { ...state, summaryAccessoriesTotal: action.payload.price };
        case UI_ACTION_TYPES.SET_F1_REMOTE_DISTRIBUTION:
            return { ...state, f1: { ...state.f1, remote_1ch_qty: action.payload.qty1, remote_16ch_qty: action.payload.qty16 } };
        case UI_ACTION_TYPES.SET_F1_DUAL_DISTRIBUTION:
            return { ...state, f1: { ...state.f1, dual_combo_qty: action.payload.comboQty, dual_slim_qty: action.payload.slimQty } };
        case UI_ACTION_TYPES.SET_F1_DISCOUNT_PERCENTAGE:
            return { ...state, f1: { ...state.f1, discountPercentage: action.payload.percentage } };
        case UI_ACTION_TYPES.SET_F2_VALUE: {
            const { key, value } = action.payload;
            if (state.f2.hasOwnProperty(key)) {
                return { ...state, f2: { ...state.f2, [key]: value } };
            }
            return state;
        }
        case UI_ACTION_TYPES.TOGGLE_F2_FEE_EXCLUSION: {
            const key = `${action.payload.feeType}FeeExcluded`;
            if (state.f2.hasOwnProperty(key)) {
                return { ...state, f2: { ...state.f2, [key]: !state.f2[key] } };
            }
            return state;
        }
        case UI_ACTION_TYPES.SET_SUM_OUTDATED:
            return { ...state, isSumOutdated: action.payload.isOutdated };
        case UI_ACTION_TYPES.RESET_UI:
            return JSON.parse(JSON.stringify(initialState.ui));
        default:
            return state;
    }
}
--- FILE END ---

--- FILE START: 04-core-code/services/calculation-service.js ---
// /04-core-code/services/calculation-service.js

/**
 * @fileoverview Service for handling all price and sum calculations.
 * Acts as a generic executor that delegates product-specific logic to a strategy.
 */
export class CalculationService {
    constructor({ stateService, productFactory, configManager }) {
        this.stateService = stateService;
        this.productFactory = productFactory;
        this.configManager = configManager;
        console.log("CalculationService Initialized.");
    }

    /**
     * Calculates line prices for all valid items and the total sum using a provided product strategy.
     */
    calculateAndSum(quoteData, productStrategy) {
        if (!productStrategy) {
            console.error("CalculationService: productStrategy is required for calculateAndSum.");
            return { quoteData, firstError: { message: "Product strategy not provided." } };
        }

        const currentProductKey = quoteData.currentProduct;
        const currentProductData = quoteData.products[currentProductKey];

        let firstError = null;

        const newItems = currentProductData.items.map((item, index) => {
            const newItem = { ...item, linePrice: null };
            if (item.width && item.height && item.fabricType) {
                const priceMatrix = this.configManager.getPriceMatrix(item.fabricType);
                const result = productStrategy.calculatePrice(item, priceMatrix);

                if (result.price !== null) {
                    newItem.linePrice = result.price;
                } else if (result.error && !firstError) {
                    const errorColumn = result.error.toLowerCase().includes('width') ? 'width' : 'height';
                    firstError = {
                        message: `Row ${index + 1}: ${result.error}`,
                        rowIndex: index,
                        column: errorColumn
                    };
                }
            }
            return newItem;
        });

        const itemsTotal = newItems.reduce((sum, item) => sum + (item.linePrice || 0), 0);

        let accessoriesTotal = 0;
        const currentSummary = currentProductData.summary;
        if (currentSummary && currentSummary.accessories) {
            const acc = currentSummary.accessories;
            accessoriesTotal += acc.winder?.price || 0;
            accessoriesTotal += acc.motor?.price || 0;
            accessoriesTotal += acc.remote?.price || 0;
            accessoriesTotal += acc.charger?.price || 0;
            accessoriesTotal += acc.cord3m?.price || 0;
        }

        const newSummary = {
            ...currentSummary,
            totalSum: itemsTotal + accessoriesTotal
        };

        const newProductData = {
            ...currentProductData,
            items: newItems,
            summary: newSummary
        };

        const updatedQuoteData = {
            ...quoteData,
            products: {
                ...quoteData.products,
                [currentProductKey]: newProductData
            }
        };

        return { updatedQuoteData, firstError };
    }

    /**
     * [NEW] Calculates the SALE PRICE for a given accessory.
     * This method is explicit and should be used for calculating prices for the end customer.
     */
    calculateAccessorySalePrice(productType, accessoryName, data) {
        const productStrategy = this.productFactory.getProductStrategy(productType);
        if (!productStrategy) return 0;

        const { accessoryPriceKeyMap, accessoryMethodNameMap } = this.configManager.getAccessoryMappings();
        const priceKey = accessoryPriceKeyMap[accessoryName];

        if (!priceKey) {
            console.error(`No sale price key found for accessory: ${accessoryName}`);
            return 0;
        }

        const pricePerUnit = this.configManager.getAccessoryPrice(priceKey);
        if (pricePerUnit === null) return 0;

        const methodName = accessoryMethodNameMap[accessoryName];

        if (methodName && productStrategy[methodName]) {
            const args = (data.items) ? [data.items, pricePerUnit] : [data.count, pricePerUnit];
            return productStrategy[methodName](...args);
        }

        return 0;
    }

    /**
     * [NEW] Calculates the COST for a given accessory.
     * This method is explicit and should be used for internal cost calculations.
     */
    calculateAccessoryCost(productType, accessoryName, data) {
        const productStrategy = this.productFactory.getProductStrategy(productType);
        if (!productStrategy) return 0;

        // Cost key must be provided in the data object.
        if (!data || !data.costKey) {
            console.error(`Cost calculation for '${accessoryName}' requires a 'costKey' in the data payload.`);
            return 0;
        }
        const priceKey = data.costKey;

        const pricePerUnit = this.configManager.getAccessoryPrice(priceKey);
        if (pricePerUnit === null) return 0;

        const { accessoryMethodNameMap } = this.configManager.getAccessoryMappings();
        const methodName = accessoryMethodNameMap[accessoryName];

        if (methodName && productStrategy[methodName]) {
            const args = (data.items) ? [data.items, pricePerUnit] : [data.count, pricePerUnit];
            return productStrategy[methodName](...args);
        }

        return 0;
    }

    /**
     * @deprecated since v5.93. Use calculateAccessorySalePrice() or calculateAccessoryCost() instead.
     * [REFACTORED] This method is now deprecated and will be removed in a future version.
     */
    calculateAccessoryPrice(productType, accessoryName, data) {
        console.warn("DEPRECATED: `calculateAccessoryPrice` was called. Please update to use `calculateAccessorySalePrice` or `calculateAccessoryCost`.");
        if (data && data.costKey) {
            return this.calculateAccessoryCost(productType, accessoryName, data);
        } else {
            return this.calculateAccessorySalePrice(productType, accessoryName, data);
        }
    }

    /**
     * [REFACTORED] Calculates the total price for a given F1 panel component based on its quantity.
     * It now fetches mappings from the ConfigManager.
     */
    calculateF1ComponentPrice(componentKey, quantity) {
        if (typeof quantity !== 'number' || quantity < 0) {
            return 0;
        }

        const f1KeyMap = {
            'winder': 'cost-winder',
            'motor': 'cost-motor',
            'remote-1ch': 'remoteSingleChannel',
            'remote-16ch': 'remoteMultiChannel16',
            'charger': 'charger',
            '3m-cord': 'cord3m',
            'dual-combo': 'comboBracket',
            'slim': 'slimComboBracket'
        };

        const accessoryKey = f1KeyMap[componentKey];
        if (!accessoryKey) {
            console.error(`No accessory key found for F1 component: ${componentKey}`);
            return 0;
        }

        const unitPrice = this.configManager.getAccessoryPrice(accessoryKey);
        if (unitPrice === null) {
            return 0;
        }

        return unitPrice * quantity;
    }

    /**
     * Calculates all values for the F2 summary panel.
     */
    calculateF2Summary(quoteData, uiState) {
        const currentProductKey = quoteData.currentProduct;
        const items = quoteData.products[currentProductKey].items;
        const productSummary = quoteData.products[currentProductKey].summary;
        const totalSumFromQuickQuote = productSummary.totalSum || 0;

        const f2Config = this.configManager.getF2Config();
        const UNIT_PRICES = f2Config.unitPrices || {};

        const accessories = productSummary.accessories || {};
        const winderPrice = accessories.winderCostSum || 0;
        const dualPrice = accessories.dualCostSum || 0;
        const motorPrice = accessories.motorCostSum || 0;
        const remotePrice = accessories.remoteCostSum || 0;
        const chargerPrice = accessories.chargerCostSum || 0;
        const cordPrice = accessories.cordCostSum || 0;

        const f1State = uiState.f1;
        const f2State = uiState.f2;

        const wifiQty = f2State.wifiQty || 0;
        const deliveryQty = f2State.deliveryQty || 0;
        const installQty = f2State.installQty || 0;
        const removalQty = f2State.removalQty || 0;
        const mulTimes = f2State.mulTimes || 0;
        const discount = f2State.discount || 0;

        const wifiSum = wifiQty * UNIT_PRICES.wifi;
        const deliveryFee = deliveryQty * UNIT_PRICES.delivery;
        const installFee = installQty * UNIT_PRICES.install;
        const removalFee = removalQty * UNIT_PRICES.removal;

        const acceSum = winderPrice + dualPrice;
        const eAcceSum = motorPrice + remotePrice + chargerPrice + cordPrice + wifiSum;
        const surchargeFee =
            (f2State.deliveryFeeExcluded ? 0 : deliveryFee) +
            (f2State.installFeeExcluded ? 0 : installFee) +
            (f2State.removalFeeExcluded ? 0 : removalFee);

        const firstRbPrice = totalSumFromQuickQuote * mulTimes;
        const disRbPriceValue = firstRbPrice * (1 - (discount / 100));
        const disRbPrice = Math.round(disRbPriceValue * 100) / 100;

        const sumPrice = acceSum + eAcceSum + surchargeFee + disRbPrice;

        // --- Start: Replicate F1 Final Total Calculation ---
        const winderQtyF1 = items.filter(item => item.winder === 'HD').length;
        const motorQtyF1 = items.filter(item => !!item.motor).length;
        const totalRemoteQtyF1 = uiState.driveRemoteCount || 0;
        const remote1chQtyF1 = f1State.remote_1ch_qty;
        const remote16chQtyF1 = (f1State.remote_16ch_qty === null) ? totalRemoteQtyF1 - remote1chQtyF1 : f1State.remote_16ch_qty;
        const chargerQtyF1 = uiState.driveChargerCount || 0;
        const cordQtyF1 = uiState.driveCordCount || 0;
        const totalDualPairsF1 = Math.floor(items.filter(item => item.dual === 'D').length / 2);
        const comboQtyF1 = (f1State.dual_combo_qty === null) ? totalDualPairsF1 : f1State.dual_combo_qty;
        const slimQtyF1 = (f1State.dual_slim_qty === null) ? 0 : f1State.dual_slim_qty;

        const f1ComponentTotal =
            this.calculateF1ComponentPrice('winder', winderQtyF1) +
            this.calculateF1ComponentPrice('motor', motorQtyF1) +
            this.calculateF1ComponentPrice('remote-1ch', remote1chQtyF1) +
            this.calculateF1ComponentPrice('remote-16ch', remote16chQtyF1) +
            this.calculateF1ComponentPrice('charger', chargerQtyF1) +
            this.calculateF1ComponentPrice('3m-cord', cordQtyF1) +
            this.calculateF1ComponentPrice('dual-combo', comboQtyF1) +
            this.calculateF1ComponentPrice('slim', slimQtyF1);

        const f1DiscountPercentage = f1State.discountPercentage || 0;
        const retailTotalFromF1 = quoteData.products.rollerBlind.summary.totalSum || 0;
        const f1_rb_price = retailTotalFromF1 * (1 - (f1DiscountPercentage / 100));

        const f1SubTotal = f1ComponentTotal + f1_rb_price;
        const f1Gst = f1SubTotal * 0.10;
        const f1_final_total = f1SubTotal + f1Gst;
        // --- End: Replicate F1 Final Total Calculation ---

        const rbProfit = disRbPrice - f1_rb_price;
        const validItemCount = items.filter(item => typeof item.linePrice === 'number' && item.linePrice > 0).length;
        const singleprofit = validItemCount > 0 ? rbProfit / validItemCount : 0;

        // [MODIFIED] Corrected sumProfit and netProfit calculation
        const sumProfit = sumPrice - f1SubTotal;
        const gst = sumPrice * 1.1; // Correctly calculate the total including GST
        const netProfit = gst - f1_final_total;

        return {
            totalSumForRbTime: totalSumFromQuickQuote,
            wifiSum,
            deliveryFee,
            installFee,
            removalFee,
            acceSum, // [FIX] Added missing acceSum
            eAcceSum, // [FIX] Added missing eAcceSum
            firstRbPrice,
            disRbPrice,
            sumPrice,
            rbProfit,
            singleprofit,
            sumProfit,
            gst,
            netProfit
        };
    }

    /**
     * [NEW] Gathers all necessary data for the quote template.
     * This method is the new home for the logic previously in QuoteGeneratorService._prepareTemplateData.
     * @param {object} quoteData - The current quote data from the state.
     * @param {object} ui - The current UI state.
     * @param {object} f3Data - Data from the F3 form fields.
     * @returns {object} A comprehensive data object ready for template population.
     */
    getQuoteTemplateData(quoteData, ui, f3Data) {
        const summaryData = this.calculateF2Summary(quoteData, ui);
        const grandTotal = parseFloat(f3Data.finalOfferPrice) || summaryData.gst || 0;
        const items = quoteData.products.rollerBlind.items;
        const formatPrice = (price) => (typeof price === 'number' && price > 0) ? `$${price.toFixed(2)}` : '';

        const motorQty = items.filter(item => !!item.motor).length;
        const motorPrice = (this.configManager.getAccessoryPrice('motorStandard') || 0) * motorQty;

        const totalRemoteQty = ui.driveRemoteCount || 0;
        const remote1chQty = ui.f1.remote_1ch_qty;
        const remote16chQty = (ui.f1.remote_1ch_qty === null) ? totalRemoteQty : (totalRemoteQty - remote1chQty);
        const remotePricePerUnit = this.configManager.getAccessoryPrice('remoteStandard') || 0;
        const remote1chPrice = remotePricePerUnit * remote1chQty;
        const remote16chPrice = remotePricePerUnit * remote16chQty;

        const chargerQty = ui.driveChargerCount || 0;
        const chargerPrice = (this.configManager.getAccessoryPrice('chargerStandard') || 0) * chargerQty;

        const cord3mQty = ui.driveCordCount || 0;
        const cord3mPrice = (this.configManager.getAccessoryPrice('cord3m') || 0) * cord3mQty;

        let documentTitleParts = [];
        if (f3Data.quoteId) documentTitleParts.push(f3Data.quoteId);
        if (f3Data.customerName) documentTitleParts.push(f3Data.customerName);
        if (f3Data.customerPhone) documentTitleParts.push(f3Data.customerPhone);
        const documentTitle = documentTitleParts.join(' ');

        return {
            documentTitle: documentTitle,
            quoteId: f3Data.quoteId,
            issueDate: f3Data.issueDate,
            dueDate: f3Data.dueDate,
            customerName: f3Data.customerName, // [NEW] Added for direct access in template
            customerAddress: f3Data.customerAddress, // [NEW]
            customerPhone: f3Data.customerPhone, // [NEW]
            customerEmail: f3Data.customerEmail, // [NEW]
            subtotal: `$${(summaryData.sumPrice || 0).toFixed(2)}`,
            gst: `$${(grandTotal / 1.1 * 0.1).toFixed(2)}`,
            grandTotal: `$${grandTotal.toFixed(2)}`,
            deposit: `$${(grandTotal * 0.5).toFixed(2)}`,
            balance: `$${(grandTotal * 0.5).toFixed(2)}`,
            savings: `$${((summaryData.firstRbPrice || 0) - (summaryData.disRbPrice || 0)).toFixed(2)}`,
            generalNotes: (f3Data.generalNotes || '').replace(/\n/g, '<br>'),
            termsAndConditions: (f3Data.termsConditions || 'Standard terms and conditions apply.').replace(/\n/g, '<br>'),
            
            // Data for the detailed list (Appendix)
            items: items,
            mulTimes: summaryData.mulTimes || 1,
            
            // Data for the accessories table (Appendix)
            motorQty: motorQty || '',
            motorPrice: formatPrice(motorPrice),
            remote1chQty: remote1chQty || '',
            remote1chPrice: formatPrice(remote1chPrice),
            remote16chQty: remote16chQty || '',
            remote16chPrice: formatPrice(remote16chPrice),
            chargerQty: chargerQty || '',
            chargerPrice: formatPrice(chargerPrice),
            cord3mQty: cord3mQty || '',
            cord3mPrice: formatPrice(cord3mPrice),
            eAcceSum: formatPrice(summaryData.eAcceSum),

            // Pass the entire summary for flexibility
            summaryData: summaryData,
            uiState: ui
        };
    }
}
--- FILE END ---

--- FILE START: 04-core-code/services/calculation-service.spec.js ---
// /04-core-code/services/calculation-service.spec.js

import { CalculationService } from './calculation-service.js';
import { StateService } from './state-service.js';
import { EventAggregator } from '../event-aggregator.js';

// --- Mock Dependencies ---
const mockProductStrategy = {
    calculatePrice: jest.fn((item, priceMatrix) => {
        if (!item.width || !item.height) {
            return { price: null, error: 'Incomplete data.' };
        }
        if (item.width > 3000) {
            return { price: null, error: 'Width exceeds maximum.' };
        }
        return { price: item.width * 0.1 + item.height * 0.2 };
    }),
    calculateDualPrice: jest.fn(() => 10), // Add mock for dual price calculation
    calculateWinderPrice: jest.fn((count, price) => count * price) // Add mock for winder
};

const mockConfigManager = {
    getPriceMatrix: jest.fn((fabricType) => {
        if (fabricType === 'B5') {
            return { name: 'SHAW - VIBE', aliasFor: 'SN' };
        }
        return {}; // Return a dummy matrix for other types
    }),
    getAccessoryPrice: jest.fn((key) => {
        const prices = { 
            comboBracket: 10, 
            winderHD: 30,
            'cost-combo-dual': 5, // Mock cost price
            'cost-winder': 8
        };
        return prices[key] || 0;
    }),
    getAccessoryMappings: jest.fn(() => ({
        accessoryPriceKeyMap: {
            'dual': 'comboBracket',
            'winder': 'winderHD',
            'motor': 'motorStandard',
            'remote': 'remoteStandard',
            'charger': 'chargerStandard',
            'cord': 'cord3m'
        },
        accessoryMethodNameMap: {
            'dual': 'calculateDualPrice',
            'winder': 'calculateWinderPrice',
            'motor': 'calculateMotorPrice',
            'remote': 'calculateRemotePrice',
            'charger': 'calculateChargerPrice',
            'cord': 'calculateCordPrice'
        }
    }))
};

// --- Test Suite ---
describe('CalculationService (Refactored)', () => {
    let calculationService;
    let stateService;
    let eventAggregator;

    beforeEach(() => {
        eventAggregator = new EventAggregator();
        stateService = new StateService({ initialState: {}, eventAggregator });

        calculationService = new CalculationService({
            stateService,
            productFactory: { getProductStrategy: () => mockProductStrategy },
            configManager: mockConfigManager
        });
        
        // Clear mocks before each test
        jest.clearAllMocks();
    });

    // --- Tests for calculateAndSum (Unchanged) ---
    describe('calculateAndSum', () => {
        it('should correctly calculate and sum prices for valid items using the product strategy', () => {
            const quoteData = {
                currentProduct: 'rollerBlind',
                products: {
                    rollerBlind: {
                        items: [
                            { width: 1000, height: 1000, fabricType: 'B1', linePrice: null },
                            { width: 2000, height: 1500, fabricType: 'B1', linePrice: null },
                            { width: null, height: null, fabricType: null, linePrice: null }
                        ],
                        summary: { 
                            totalSum: 0,
                            accessories: {
                                winder: { price: 30 },
                                motor: { price: 250 }
                            }
                        }
                    }
                }
            };
    
            const { updatedQuoteData, firstError } = calculationService.calculateAndSum(quoteData, mockProductStrategy);
            const productSummary = updatedQuoteData.products.rollerBlind.summary;
            const productItems = updatedQuoteData.products.rollerBlind.items;
    
            expect(productSummary.totalSum).toBe(1080);
            expect(productItems[0].linePrice).toBe(300);
            expect(productItems[1].linePrice).toBe(500);
            expect(firstError).toBeNull();
            expect(mockConfigManager.getPriceMatrix).toHaveBeenCalledTimes(2);
            expect(mockProductStrategy.calculatePrice).toHaveBeenCalledTimes(2);
        });
    
        it('should return the first error encountered and still sum valid items', () => {
            const quoteData = {
                currentProduct: 'rollerBlind',
                products: {
                    rollerBlind: {
                        items: [
                            { width: 1000, height: 1000, fabricType: 'B3', linePrice: null },
                            { width: 4000, height: 1500, fabricType: 'B3', linePrice: null }, 
                            { width: 2000, height: 2000, fabricType: 'B3', linePrice: null }
                        ],
                        summary: { totalSum: 0, accessories: {} }
                    }
                }
            };
    
            const { updatedQuoteData, firstError } = calculationService.calculateAndSum(quoteData, mockProductStrategy);
            const productSummary = updatedQuoteData.products.rollerBlind.summary;
            const productItems = updatedQuoteData.products.rollerBlind.items;
    
            expect(productSummary.totalSum).toBe(900);
            expect(productItems[0].linePrice).toBe(300);
            expect(productItems[1].linePrice).toBeNull();
            expect(productItems[2].linePrice).toBe(600);
            expect(firstError).not.toBeNull();
            expect(firstError.rowIndex).toBe(1);
            expect(firstError.message).toContain('Width exceeds maximum.');
        });
    });

    // --- Tests for NEW Refactored Methods ---
    describe('calculateAccessorySalePrice', () => {
        it('should calculate the SALE PRICE for an accessory using the price key map', () => {
            const productType = 'rollerBlind';
            const items = [{ dual: 'D' }, { dual: 'D' }];
            
            const price = calculationService.calculateAccessorySalePrice(productType, 'dual', { items });

            expect(price).toBe(10); // Mocked return value from strategy
            expect(mockConfigManager.getAccessoryMappings).toHaveBeenCalledTimes(1);
            // It should use the SALE price key
            expect(mockConfigManager.getAccessoryPrice).toHaveBeenCalledWith('comboBracket');
            expect(mockProductStrategy.calculateDualPrice).toHaveBeenCalledWith(items, 10);
        });
    });

    describe('calculateAccessoryCost', () => {
        it('should calculate the COST for an accessory using the provided costKey', () => {
            const productType = 'rollerBlind';
            const winderCount = 3;
            const data = { count: winderCount, costKey: 'cost-winder' };
            
            const price = calculationService.calculateAccessoryCost(productType, 'winder', data);

            expect(price).toBe(24); // 3 * 8 (mocked cost price)
            expect(mockConfigManager.getAccessoryMappings).toHaveBeenCalledTimes(1);
            // It should use the COST key provided in the data object
            expect(mockConfigManager.getAccessoryPrice).toHaveBeenCalledWith('cost-winder');
            expect(mockProductStrategy.calculateWinderPrice).toHaveBeenCalledWith(winderCount, 8);
        });

        it('should return 0 and log an error if costKey is not provided', () => {
            const consoleErrorSpy = jest.spyOn(console, 'error').mockImplementation(() => {});
            const productType = 'rollerBlind';
            
            const price = calculationService.calculateAccessoryCost(productType, 'winder', { count: 3 });

            expect(price).toBe(0);
            expect(consoleErrorSpy).toHaveBeenCalledWith("Cost calculation for 'winder' requires a 'costKey' in the data payload.");
            consoleErrorSpy.mockRestore();
        });
    });
});
--- FILE END ---

--- FILE START: 04-core-code/services/file-service.js ---
// /04-core-code/services/file-service.js

import { dataToCsv, csvToData } from '../utils/csv-parser.js';
import { initialState } from '../config/initial-state.js';

/**
 * @fileoverview Service for handling all file-related operations
 * like saving, loading, and exporting.
 */
export class FileService {
    constructor({ productFactory }) {
        this.productFactory = productFactory;
        console.log("FileService Initialized.");
    }

    _triggerDownload(content, fileName, contentType) {
        const blob = new Blob([content], { type: contentType });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = fileName;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
    }

    _generateFileName(extension) {
        const now = new Date();
        const yyyy = now.getFullYear();
        const mm = String(now.getMonth() + 1).padStart(2, '0');
        const dd = String(now.getDate()).padStart(2, '0');
        const hh = String(now.getHours()).padStart(2, '0');
        const min = String(now.getMinutes()).padStart(2, '0');
        return `quote-${yyyy}${mm}${dd}${hh}${min}.${extension}`;
    }

    saveToJson(quoteData) {
        try {
            const jsonString = JSON.stringify(quoteData, null, 2);
            const fileName = this._generateFileName('json');
            this._triggerDownload(jsonString, fileName, 'application/json');
            return { success: true, message: 'Quote file is being downloaded...' };
        } catch (error) {
            console.error("Failed to save JSON file:", error);
            return { success: false, message: 'Error creating quote file.' };
        }
    }

    exportToCsv(quoteData) {
        try {
            const csvString = dataToCsv(quoteData);
            const fileName = this._generateFileName('csv');
            this._triggerDownload(csvString, fileName, 'text/csv;charset=utf-8;');
            return { success: true, message: 'CSV file is being downloaded...' };
        } catch (error) {
            console.error("Failed to export CSV file:", error);
            return { success: false, message: 'Error creating CSV file.' };
        }
    }

    parseFileContent(fileName, content) {
        try {
            let loadedData = null;

            if (fileName.toLowerCase().endsWith('.json')) {
                loadedData = JSON.parse(content);
            } else if (fileName.toLowerCase().endsWith('.csv')) {
                const parsedResult = csvToData(content);
                if (parsedResult === null) {
                    throw new Error("CSV parser returned null.");
                }

                const { items, lfIndexes } = parsedResult;

                const productStrategy = this.productFactory.getProductStrategy('rollerBlind');
                const newItem = productStrategy.getInitialItemData();
                items.push(newItem);

                const newQuoteData = JSON.parse(JSON.stringify(initialState.quoteData));
                newQuoteData.products.rollerBlind.items = items;
                newQuoteData.uiMetadata.lfModifiedRowIndexes = lfIndexes;
                loadedData = newQuoteData;
                
            } else {
                return { success: false, message: `Unsupported file type: ${fileName}` };
            }

            if (loadedData && !loadedData.uiMetadata) {
                loadedData.uiMetadata = {
                    lfModifiedRowIndexes: []
                };
            }

            const currentProduct = loadedData?.currentProduct;
            const productData = loadedData?.products?.[currentProduct];

            if (productData && Array.isArray(productData.items)) {
                return { success: true, data: loadedData, message: `Successfully loaded data from ${fileName}` };
            } else {
                if (loadedData && loadedData.rollerBlindItems && Array.isArray(loadedData.rollerBlindItems)) {
                     return { success: true, data: loadedData, message: `Successfully loaded legacy data from ${fileName}` };
                }
                throw new Error("File content is not in a valid quote format.");
            }
        } catch (error) {
            console.error("Failed to parse file content:", error);
            return { success: false, message: `Error loading file: ${error.message}` };
        }
    }
}
--- FILE END ---

--- FILE START: 04-core-code/services/file-service.spec.js ---
// File: 04-core-code/services/file-service.spec.js

import { FileService } from './file-service.js';
import { RollerBlindStrategy } from '../strategies/roller-blind-strategy.js';

describe('FileService', () => {
    let fileService;
    let mockProductFactory;

    beforeEach(() => {
        // Arrange: Mock the ProductFactory to return a real strategy instance,
        // as the parser depends on its getInitialItemData method.
        mockProductFactory = {
            getProductStrategy: jest.fn(() => new RollerBlindStrategy({ configManager: {} })),
        };

        fileService = new FileService({ productFactory: mockProductFactory });
    });

    describe('parseFileContent', () => {
        it('should correctly parse a valid JSON string', () => {
            // Arrange
            const mockQuoteData = {
                currentProduct: 'rollerBlind',
                products: { rollerBlind: { items: [{ width: 1000, height: 1000 }] } },
                uiMetadata: {},
            };
            const jsonString = JSON.stringify(mockQuoteData);

            // Act
            const result = fileService.parseFileContent('quote.json', jsonString);

            // Assert
            expect(result.success).toBe(true);
            expect(result.message).toContain('Successfully loaded data');
            expect(result.data).toEqual(mockQuoteData);
        });

        it('should correctly parse a valid CSV string and add an empty row', () => {
            // Arrange
            const csvString = 'sequence,Width,Height,Type,Price\n1,1200,1300,B1,75.00';
            
            // Act
            const result = fileService.parseFileContent('quote.csv', csvString);

            // Assert
            expect(result.success).toBe(true);
            const items = result.data.products.rollerBlind.items;
            expect(items).toHaveLength(2); // The parsed row + one new empty row
            expect(items[0].width).toBe(1200);
            expect(items[0].height).toBe(1300);
            expect(items[0].fabricType).toBe('B1');
            expect(items[1].width).toBeNull(); // The last row should be empty
        });

        it('should return an error for an unsupported file type', () => {
            // Arrange
            const textContent = 'some content';

            // Act
            const result = fileService.parseFileContent('quote.txt', textContent);

            // Assert
            expect(result.success).toBe(false);
            expect(result.message).toContain('Unsupported file type');
        });

        it('should add uiMetadata if it is missing from a loaded JSON file', () => {
            // Arrange
            const legacyQuoteData = {
                currentProduct: 'rollerBlind',
                products: { rollerBlind: { items: [{ width: 1000, height: 1000 }] } },
                // Missing uiMetadata property
            };
            const jsonString = JSON.stringify(legacyQuoteData);

            // Act
            const result = fileService.parseFileContent('quote.json', jsonString);

            // Assert
            expect(result.success).toBe(true);
            expect(result.data.uiMetadata).toBeDefined();
            expect(result.data.uiMetadata).toEqual({ lfModifiedRowIndexes: [] });
        });
    });
});
--- FILE END ---

--- FILE START: 04-core-code/services/focus-service.js ---
// /04-core-code/services/focus-service.js
import * as uiActions from '../actions/ui-actions.js';

/**
 * @fileoverview Service for managing input focus and active cell logic.
 */
export class FocusService {
    /**
     * @param {object} dependencies - The service dependencies.
     * @param {StateService} dependencies.stateService - The main state management service.
     */
    constructor({ stateService }) {
        this.stateService = stateService;
        console.log("FocusService (Context-Aware) Initialized.");
    }

    /**
     * Finds the first empty cell for a given column ('width' or 'height') and sets focus.
     * @param {string} column - 'width' or 'height'.
     */
    focusFirstEmptyCell(column) {
        const { quoteData } = this.stateService.getState();
        const items = quoteData.products[quoteData.currentProduct].items;
        const firstEmptyIndex = items.findIndex(item => !item[column]);
        const targetIndex = (firstEmptyIndex !== -1) ? firstEmptyIndex : items.length - 1;

        this.stateService.dispatch(uiActions.setActiveCell(targetIndex, column));
        this.stateService.dispatch(uiActions.setInputValue(''));
    }

    /**
     * Moves focus to the next logical cell after a value is committed.
     */
    focusAfterCommit() {
        this.moveActiveCell('down');
    }

    /**
     * Moves focus to the width cell of the new last row after a deletion.
     */
    focusAfterDelete() {
        const { quoteData } = this.stateService.getState();
        const lastIndex = quoteData.products[quoteData.currentProduct].items.length - 1;
        this.stateService.dispatch(uiActions.setActiveCell(lastIndex, 'width'));
    }

    /**
     * [MODIFIED] Moves focus to the width cell of the cleared row using the correct state property.
     */
    focusAfterClear() {
        const { ui } = this.stateService.getState();
        const { multiSelectSelectedIndexes } = ui;
        
        if (multiSelectSelectedIndexes.length === 1) {
            const rowIndex = multiSelectSelectedIndexes[0];
            this.stateService.dispatch(uiActions.setActiveCell(rowIndex, 'width'));
        }
    }

    /**
     * Moves the active cell when an arrow key is pressed.
     * @param {string} direction - 'up', 'down', 'left', or 'right'.
     */
    moveActiveCell(direction) {
        const { ui, quoteData } = this.stateService.getState();
        const { activeCell } = ui;
        const items = quoteData.products[quoteData.currentProduct].items;
        let { rowIndex } = activeCell;
        let { column } = activeCell;
        
        const navigableColumns = ['width', 'height', 'TYPE'];
        let columnIndex = navigableColumns.indexOf(column);

        switch (direction) {
            case 'up': rowIndex = Math.max(0, rowIndex - 1); break;
            case 'down': rowIndex = Math.min(items.length - 1, rowIndex + 1); break;
            case 'left': columnIndex = Math.max(0, columnIndex - 1); break;
            case 'right': columnIndex = Math.min(navigableColumns.length - 1, columnIndex + 1); break;
        }
        
        column = navigableColumns[columnIndex];
        this.stateService.dispatch(uiActions.setActiveCell(rowIndex, column));
        this.stateService.dispatch(uiActions.clearMultiSelectSelection());
        
        const currentItem = items[rowIndex];
        if (currentItem && (column === 'width' || column === 'height')) {
            this.stateService.dispatch(uiActions.setInputValue(currentItem[column]));
        } else {
            this.stateService.dispatch(uiActions.setInputValue(''));
        }
    }
}
--- FILE END ---

--- FILE START: 04-core-code/services/migration-service.js ---
// File: 04-core-code/services/migration-service.js

import { initialState } from '../config/initial-state.js';
import { STORAGE_KEYS } from '../config/constants.js';

export class MigrationService {
    constructor() {}

    /**
     * ?localStorage ?????
     * @returns {object|null} - ??? quoteData?????????????null??
     */
    loadAndMigrateData() {
        try {
            const autoSavedDataJSON = localStorage.getItem(STORAGE_KEYS.AUTOSAVE);
            if (!autoSavedDataJSON) {
                return null;
            }

            const message = "It looks like you have unsaved work from a previous session.\n\n- 'OK' to restore the unsaved work.\n- 'Cancel' to start a new, blank quote.";
            if (window.confirm(message)) {
                let autoSavedData = JSON.parse(autoSavedDataJSON);
                const migratedData = this._migrate(autoSavedData);

                if (migratedData) {
                    console.log("Restored data from auto-save.");
                    return migratedData;
                } else {
                    console.error("Could not restore auto-saved data: format is unrecognized.");
                    localStorage.removeItem(STORAGE_KEYS.AUTOSAVE);
                }
            } else {
                localStorage.removeItem(STORAGE_KEYS.AUTOSAVE);
                console.log("Auto-saved data discarded by user.");
            }
        } catch (error) {
            console.error("Failed to process auto-saved data:", error);
            localStorage.removeItem(STORAGE_KEYS.AUTOSAVE);
        }
        return null;
    }

    /**
     * ???????
     * @param {object} oldData - ?????
     * @returns {object|null} - ?????????? null??
     */
    _migrate(oldData) {
        // ???????uiMetadata???
        if (oldData && oldData.products && oldData.currentProduct) {
            if (!oldData.uiMetadata) {
                console.warn("Patching modern auto-saved data with missing uiMetadata.");
                oldData.uiMetadata = { lfModifiedRowIndexes: [] };
            }
            return oldData;
        }

        // ?????????
        if (oldData && oldData.rollerBlindItems) {
            console.warn("Migrating legacy auto-saved data to the new format...");
            const newData = {
                currentProduct: 'rollerBlind',
                products: {
                    rollerBlind: {
                        items: oldData.rollerBlindItems,
                        summary: oldData.summary || initialState.quoteData.products.rollerBlind.summary
                    }
                },
                uiMetadata: {
                    lfModifiedRowIndexes: []
                },
                quoteId: oldData.quoteId || null,
                issueDate: oldData.issueDate || null,
                dueDate: oldData.dueDate || null,
                status: oldData.status || "Configuring",
                costDiscountPercentage: oldData.costDiscountPercentage || 0,
                customer: oldData.customer || { name: "", address: "", phone: "", email: "" }
            };
            return newData;
        }

        return null;
    }
}
--- FILE END ---

--- FILE START: 04-core-code/services/quote-generator-service.js ---
// File: 04-core-code/services/quote-generator-service.js

import { paths } from '../config/paths.js';

/**
 * @fileoverview A new, single-responsibility service for generating the final quote HTML.
 * It pre-fetches and caches templates for better performance.
 */
export class QuoteGeneratorService {
    constructor({ calculationService }) {
        this.calculationService = calculationService;
        this.quoteTemplate = '';
        this.detailsTemplate = '';
        
        // [MODIFIED] The script now includes a robust CSS inlining mechanism.
        this.actionBarHtml = `
    <div id="action-bar">
        <button id="copy-html-btn">Copy HTML</button>
        <button id="print-btn">Print / Save PDF</button>
    </div>`;

        this.scriptHtml = `
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const copyBtn = document.getElementById('copy-html-btn');
            const printBtn = document.getElementById('print-btn');
            const actionBar = document.getElementById('action-bar');

            if (printBtn) {
                printBtn.addEventListener('click', function() {
                    window.print();
                });
            }

            // [NEW] CSS Inliner function
            const getInlinedHtml = () => {
                // 1. Create a deep clone of the document to avoid modifying the live page
                const clone = document.documentElement.cloneNode(true);

                // 2. Iterate through all stylesheets in the current document
                Array.from(document.styleSheets).forEach(sheet => {
                    try {
                        // 3. For each rule in the stylesheet, find matching elements in the CLONE
                        Array.from(sheet.cssRules).forEach(rule => {
                            const selector = rule.selectorText;
                            if (!selector) return;

                            const elements = clone.querySelectorAll(selector);
                            elements.forEach(el => {
                                // 4. Prepend the rule's styles to the element's existing inline style
                                // This ensures that more specific inline styles (if any) are not overridden.
                                const existingStyle = el.getAttribute('style') || '';
                                el.setAttribute('style', rule.style.cssText + existingStyle);
                            });
                        });
                    } catch (e) {
                        // Ignore potential cross-origin security errors when accessing stylesheets
                        console.warn('Could not process a stylesheet, possibly due to CORS policy:', e.message);
                    }
                });

                // 5. Remove elements that should not be in the copied output
                clone.querySelector('#action-bar')?.remove();
                clone.querySelector('script')?.remove();

                // 6. Return the full, inlined HTML as a string
                return '<!DOCTYPE html>' + clone.outerHTML;
            };

            if (copyBtn) {
                copyBtn.addEventListener('click', function() {
                    // Temporarily change button text to give user feedback
                    copyBtn.textContent = 'Processing...';
                    copyBtn.disabled = true;

                    // Use a timeout to allow the UI to update before the heavy work
                    setTimeout(() => {
                        try {
                            const inlinedHtml = getInlinedHtml();
                            
                            navigator.clipboard.writeText(inlinedHtml)
                                .then(() => {
                                    alert('HTML with inlined styles copied to clipboard successfully!');
                                })
                                .catch(err => {
                                    console.error('Failed to copy with navigator.clipboard:', err);
                                    alert('Failed to copy. Please check console for errors.');
                                });
                        } catch (err) {
                            console.error('Error during CSS inlining process:', err);
                            alert('An error occurred while preparing the HTML. See console for details.');
                        } finally {
                            // Restore button state
                            copyBtn.textContent = 'Copy HTML';
                            copyBtn.disabled = false;
                        }
                    }, 50); // 50ms delay
                });
            }
        });
    <\/script>`;


        this._initialize();
        console.log("QuoteGeneratorService Initialized.");
    }

    async _initialize() {
        try {
            [this.quoteTemplate, this.detailsTemplate] = await Promise.all([
                fetch(paths.partials.quoteTemplate).then(res => res.text()),
                fetch(paths.partials.detailedItemList).then(res => res.text()),
            ]);
            console.log("QuoteGeneratorService: HTML templates pre-fetched and cached.");
        } catch (error) {
            console.error("QuoteGeneratorService: Failed to pre-fetch HTML templates:", error);
            // In a real-world scenario, you might want to publish an error event here.
        }
    }

    generateQuoteHtml(quoteData, ui, f3Data) {
        if (!this.quoteTemplate || !this.detailsTemplate) {
            console.error("QuoteGeneratorService: Templates are not loaded yet.");
            return null;
        }

        // [REFACTORED] Delegate all data preparation to CalculationService.
        const templateData = this.calculationService.getQuoteTemplateData(quoteData, ui, f3Data);

        // [REFACTORED] Generate HTML snippets using the prepared data.
        const populatedDataWithHtml = {
            ...templateData,
            customerInfoHtml: this._formatCustomerInfo(templateData),
            itemsTableBody: this._generatePageOneItemsTableHtml(templateData),
            rollerBlindsTable: this._generateItemsTableHtml(templateData)
        };
        
        const populatedDetailsPageHtml = this._populateTemplate(this.detailsTemplate, populatedDataWithHtml);

        const styleMatch = populatedDetailsPageHtml.match(/<style>([\s\S]*)<\/style>/i);
        const detailsBodyMatch = populatedDetailsPageHtml.match(/<body[^>]*>([\s\S]*)<\/body>/i);

        if (!detailsBodyMatch) {
            throw new Error("Could not find body content in the details template.");
        }

        const detailsStyleContent = styleMatch ? styleMatch[0] : '';
        const detailsBodyContent = detailsBodyMatch[1];

        let finalHtml = this.quoteTemplate.replace('</head>', `${detailsStyleContent}</head>`);
        finalHtml = finalHtml.replace('</body>', `${detailsBodyContent}</body>`);
        finalHtml = this._populateTemplate(finalHtml, populatedDataWithHtml);

        // Inject the action bar and script into the final HTML
        finalHtml = finalHtml.replace(
            '<body>',
            `<body>${this.actionBarHtml}`
        );

        finalHtml = finalHtml.replace(
            '</body>',
            `${this.scriptHtml}</body>`
        );

        return finalHtml;
    }

    _populateTemplate(template, data) {
        return template.replace(/\{\{\{?([\w\-]+)\}\}\}?/g, (match, key) => {
            return data.hasOwnProperty(key) ? data[key] : match;
        });
    }

    _formatCustomerInfo(templateData) {
        let html = `<strong>${templateData.customerName || ''}</strong><br>`;
        if (templateData.customerAddress) html += `${templateData.customerAddress.replace(/\n/g, '<br>')}<br>`;
        if (templateData.customerPhone) html += `Phone: ${templateData.customerPhone}<br>`;
        if (templateData.customerEmail) html += `Email: ${templateData.customerEmail}`;
        return html;
    }

    _generateItemsTableHtml(templateData) {
        const { items, mulTimes } = templateData;
        const headers = ['#', 'F-NAME', 'F-COLOR', 'Location', 'HD', 'Dual', 'Motor', 'Price'];
    
        const rows = items
            .filter(item => item.width && item.height)
            .map((item, index) => {
                let fabricClass = '';
                if (item.fabric && item.fabric.toLowerCase().includes('light-filter')) {
                    fabricClass = 'bg-light-filter';
                } else if (item.fabricType === 'SN') {
                    fabricClass = 'bg-screen';
                } else if (['B1', 'B2', 'B3', 'B4', 'B5'].includes(item.fabricType)) {
                    fabricClass = 'bg-blockout';
                }
    
                const finalPrice = (item.linePrice || 0) * mulTimes;

                const cell = (dataLabel, content, cssClass = '') => {
                    const isEmpty = !content;
                    const finalClass = `${cssClass} ${isEmpty ? 'is-empty-cell' : ''}`.trim();
                    return `<td data-label="${dataLabel}" class="${finalClass}">${content}</td>`;
                };
    
                const cells = [
                    cell('#', index + 1, 'text-center'),
                    cell('F-NAME', item.fabric || '', fabricClass),
                    cell('F-COLOR', item.color || '', fabricClass),
                    cell('Location', item.location || ''),
                    cell('HD', item.winder === 'HD' ? '?? : '', 'text-center'),
                    cell('Dual', item.dual === 'D' ? '?? : '', 'text-center'),
                    cell('Motor', item.motor ? '?? : '', 'text-center'),
                    cell('Price', `$${finalPrice.toFixed(2)}`, 'text-right')
                ].join('');
    
                return `<tr>${cells}</tr>`;
            })
            .join('');
    
        return `
            <table class="detailed-list-table">
                <colgroup>
                    <col style="width: 5%;">
                    <col style="width: 20%;">
                    <col style="width: 15%;">
                    <col style="width: 12%;">
                    <col style="width: 9%;">
                    <col style="width: 9%;">
                    <col style="width: 9%;">
                    <col style="width: 13%;">
                </colgroup>
                <thead>
                    <tr class="table-title">
                        <th colspan="${headers.length}">Roller Blinds - Detailed List</th>
                    </tr>
                    <tr>
                        ${headers.map(h => `<th>${h}</th>`).join('')}
                    </tr>
                </thead>
                <tbody>
                    ${rows}
                </tbody>
            </table>
        `;
    }

    _generatePageOneItemsTableHtml(templateData) {
        const { summaryData, uiState, items } = templateData;
        const rows = [];
        const validItemCount = items.filter(i => i.width && i.height).length;

        rows.push(`
            <tr>
                <td data-label="NO">1</td>
                <td data-label="Description" class="description">Roller Blinds</td>
                <td data-label="QTY" class="align-right">${validItemCount}</td>
                <td data-label="Price" class="align-right">
                    <span class="original-price">$${(summaryData.firstRbPrice || 0).toFixed(2)}</span>
                </td>
                <td data-label="Discounted Price" class="align-right">
                    <span class="discounted-price">$${(summaryData.disRbPrice || 0).toFixed(2)}</span>
                </td>
            </tr>
        `);

        let itemNumber = 2;

        if (summaryData.acceSum > 0) {
            rows.push(`
                <tr>
                    <td data-label="NO">${itemNumber++}</td>
                    <td data-label="Description" class="description">Installation Accessories</td>
                    <td data-label="QTY" class="align-right">NA</td>
                    <td data-label="Price" class="align-right">$${(summaryData.acceSum || 0).toFixed(2)}</td>
                    <td data-label="Discounted Price" class="align-right">$${(summaryData.acceSum || 0).toFixed(2)}</td>
                </tr>
            `);
        }

        if (summaryData.eAcceSum > 0) {
            rows.push(`
                <tr>
                    <td data-label="NO">${itemNumber++}</td>
                    <td data-label="Description" class="description">Motorised Accessories</td>
                    <td data-label="QTY" class="align-right">NA</td>
                    <td data-label="Price" class="align-right">$${(summaryData.eAcceSum || 0).toFixed(2)}</td>
                    <td data-label="Discounted Price" class="align-right">$${(summaryData.eAcceSum || 0).toFixed(2)}</td>
                </tr>
            `);
        }

        const deliveryExcluded = uiState.f2.deliveryFeeExcluded;
        const deliveryPriceClass = deliveryExcluded ? 'class="align-right is-excluded"' : 'class="align-right"';
        const deliveryDiscountedPrice = deliveryExcluded ? 0 : (summaryData.deliveryFee || 0);
        rows.push(`
            <tr>
                <td data-label="NO">${itemNumber++}</td>
                <td data-label="Description" class="description">Delivery</td>
                <td data-label="QTY" class="align-right">${uiState.f2.deliveryQty || 1}</td>
                <td data-label="Price" ${deliveryPriceClass}>$${(summaryData.deliveryFee || 0).toFixed(2)}</td>
                <td data-label="Discounted Price" class="align-right">$${deliveryDiscountedPrice.toFixed(2)}</td>
            </tr>
        `);

        const installExcluded = uiState.f2.installFeeExcluded;
        const installPriceClass = installExcluded ? 'class="align-right is-excluded"' : 'class="align-right"';
        const installDiscountedPrice = installExcluded ? 0 : (summaryData.installFee || 0);
        rows.push(`
            <tr>
                <td data-label="NO">${itemNumber++}</td>
                <td data-label="Description" class="description">Installation</td>
                <td data-label="QTY" class="align-right">${validItemCount}</td>
                <td data-label="Price" ${installPriceClass}>$${(summaryData.installFee || 0).toFixed(2)}</td>
                <td data-label="Discounted Price" class="align-right">$${installDiscountedPrice.toFixed(2)}</td>
            </tr>
        `);

        const removalExcluded = uiState.f2.removalFeeExcluded;
        const removalPriceClass = removalExcluded ? 'class="align-right is-excluded"' : 'class="align-right"';
        const removalDiscountedPrice = removalExcluded ? 0 : (summaryData.removalFee || 0);
        rows.push(`
            <tr>
                <td data-label="NO">${itemNumber++}</td>
                <td data-label="Description" class="description">Removal</td>
                <td data-label="QTY" class="align-right">${uiState.f2.removalQty || 0}</td>
                <td data-label="Price" ${removalPriceClass}>$${(summaryData.removalFee || 0).toFixed(2)}</td>
                <td data-label="Discounted Price" class="align-right">$${removalDiscountedPrice.toFixed(2)}</td>
            </tr>
        `);

        return rows.join('');
    }
}
--- FILE END ---

--- FILE START: 04-core-code/services/state-service.js ---
// File: 04-core-code/services/state-service.js

import { EVENTS } from '../config/constants.js';
import { createRootReducer } from '../reducers/root-reducer.js';

/**
 * @fileoverview Service for managing the entire application state.
 * Acts as the single source of truth.
 * State should be read from here, and all updates must be dispatched through this service.
 */
export class StateService {
    /**
     * @param {object} dependencies - The service dependencies.
     */
    constructor({ initialState, eventAggregator, productFactory, configManager }) {
        this._state = initialState;
        this.eventAggregator = eventAggregator;
        // [MODIFIED] Pass dependencies to the createRootReducer function.
        this.reducer = createRootReducer({ productFactory, configManager });
        console.log("StateService Finalized and refactored for Reducer pattern.");
    }

    /**
     * Returns the current state.
     * @returns {object} The current application state.
     */
    getState() {
        return this._state;
    }

    /**
     * Dispatches an action to the reducer to update the state.
     * @param {object} action The action object describing the state change.
     */
    dispatch(action) {
        const newState = this.reducer(this._state, action);
        
        // Only update and publish if the state has actually changed.
        if (newState !== this._state) {
            this._state = newState;
            this.eventAggregator.publish(EVENTS.INTERNAL_STATE_UPDATED, this._state);
        }
    }
}
--- FILE END ---

--- FILE START: 04-core-code/services/workflow-service.js ---
// File: 04-core-code/services/workflow-service.js

import { initialState } from '../config/initial-state.js';
import { EVENTS, DOM_IDS } from '../config/constants.js';
import * as uiActions from '../actions/ui-actions.js';
import * as quoteActions from '../actions/quote-actions.js';
import { paths } from '../config/paths.js';

/**
 * @fileoverview A dedicated service for coordinating complex, multi-step user workflows.
 * This service takes complex procedural logic out of the AppController.
 */
export class WorkflowService {
    constructor({ eventAggregator, stateService, fileService, calculationService, productFactory, detailConfigView, quoteGeneratorService }) {
        this.eventAggregator = eventAggregator;
        this.stateService = stateService;
        this.fileService = fileService;
        this.calculationService = calculationService;
        this.productFactory = productFactory;
        this.detailConfigView = detailConfigView;
        this.quoteGeneratorService = quoteGeneratorService; // [NEW] Store the injected service
        this.quotePreviewComponent = null; // Will be set by AppContext

        console.log("WorkflowService Initialized.");
    }

    setQuotePreviewComponent(component) {
        this.quotePreviewComponent = component;
    }

    async handlePrintableQuoteRequest() {
        try {
            const { quoteData, ui } = this.stateService.getState();
            const f3Data = this._getF3OverrideData();

            // [REFACTORED] Delegate the entire HTML generation process to the new service.
            const finalHtml = this.quoteGeneratorService.generateQuoteHtml(quoteData, ui, f3Data);

            if (finalHtml) {
                // [MODIFIED] Phase 2: Replace the old iframe event with the new window.open mechanism.
                // this.eventAggregator.publish(EVENTS.SHOW_QUOTE_PREVIEW, finalHtml);

                const blob = new Blob([finalHtml], { type: 'text/html' });
                const url = URL.createObjectURL(blob);
                window.open(url, '_blank');

            } else {
                throw new Error("QuoteGeneratorService did not return HTML. Templates might not be loaded.");
            }

        } catch (error) {
            console.error("Error generating printable quote:", error);
            this.eventAggregator.publish(EVENTS.SHOW_NOTIFICATION, {
                message: "Failed to generate quote preview. See console for details.",
                type: 'error',
            });
        }
    }

    _getF3OverrideData() {
        const getValue = (id) => document.getElementById(id)?.value || '';
        return {
            quoteId: getValue('f3-quote-id'),
            issueDate: getValue('f3-issue-date'),
            dueDate: getValue('f3-due-date'),
            customerName: getValue('f3-customer-name'),
            customerAddress: getValue('f3-customer-address'),
            customerPhone: getValue('f3-customer-phone'),
            customerEmail: getValue('f3-customer-email'),
            finalOfferPrice: getValue('f3-final-offer-price'),
            // [MODIFIED] Add the missing generalNotes field to be collected
            generalNotes: getValue('f3-general-notes'),
            termsConditions: getValue('f3-terms-conditions'),
        };
    }

    // [REMOVED] Methods handleRemoteDistribution and handleDualDistribution have been moved to F1CostView.

    handleF1TabActivation() {
        const { quoteData } = this.stateService.getState();
        const productStrategy = this.productFactory.getProductStrategy(quoteData.currentProduct);
        const { updatedQuoteData } = this.calculationService.calculateAndSum(quoteData, productStrategy);

        this.stateService.dispatch(quoteActions.setQuoteData(updatedQuoteData));
    }

    // [REMOVED] All F2-related methods have been moved to F2SummaryView.

    handleNavigationToDetailView() {
        const { ui } = this.stateService.getState();
        if (ui.currentView === 'QUICK_QUOTE') {
            this.stateService.dispatch(uiActions.setCurrentView('DETAIL_CONFIG'));
            this.detailConfigView.activateTab('k1-tab');
        } else {
            this.stateService.dispatch(uiActions.setCurrentView('QUICK_QUOTE'));
            this.stateService.dispatch(uiActions.setVisibleColumns(initialState.ui.visibleColumns));
        }
    }

    handleNavigationToQuickQuoteView() {
        this.stateService.dispatch(uiActions.setCurrentView('QUICK_QUOTE'));
        this.stateService.dispatch(uiActions.setVisibleColumns(initialState.ui.visibleColumns));
    }

    handleTabSwitch({ tabId }) {
        this.detailConfigView.activateTab(tabId);
    }

    handleUserRequestedLoad() {
        const { quoteData } = this.stateService.getState();
        const productKey = quoteData.currentProduct;
        const items = quoteData.products[productKey] ? quoteData.products[productKey].items : [];
        const hasData = items.length > 1 || (items.length === 1 && (items[0].width || items[0].height));

        if (hasData) {
            this.eventAggregator.publish(EVENTS.SHOW_LOAD_CONFIRMATION_DIALOG);
        } else {
            this.eventAggregator.publish(EVENTS.TRIGGER_FILE_LOAD);
        }
    }

    handleLoadDirectly() {
        this.eventAggregator.publish(EVENTS.TRIGGER_FILE_LOAD);
    }

    handleFileLoad({ fileName, content }) {
        const result = this.fileService.parseFileContent(fileName, content);
        if (result.success) {
            this.stateService.dispatch(quoteActions.setQuoteData(result.data));
            this.stateService.dispatch(uiActions.resetUi());
            this.stateService.dispatch(uiActions.setSumOutdated(true));
            this.eventAggregator.publish(EVENTS.SHOW_NOTIFICATION, { message: result.message });
        } else {
            this.eventAggregator.publish(EVENTS.SHOW_NOTIFICATION, { message: result.message, type: 'error' });
        }
    }

    handleF1DiscountChange({ percentage }) {
        this.stateService.dispatch(uiActions.setF1DiscountPercentage(percentage));
    }
}
--- FILE END ---

--- FILE START: 04-core-code/services/workflow-service.spec.js ---
// File: 04-core-code/services/workflow-service.spec.js

import { WorkflowService } from './workflow-service.js';
import { EVENTS } from '../config/constants.js';

describe('WorkflowService', () => {
    let workflowService;
    let mockEventAggregator;
    let mockStateService;
    let mockUiService;
    // Add mocks for other dependencies even if not used in all tests
    let mockQuoteService;
    let mockCalculationService;
    let mockProductFactory;
    let mockDetailConfigView;

    beforeEach(() => {
        // Arrange: Create mock dependencies using jest.fn() for all methods we need to track/control.
        mockEventAggregator = {
            publish: jest.fn(),
        };
        mockStateService = {
            getState: jest.fn(),
        };
        mockUiService = {
            setF1RemoteDistribution: jest.fn(),
            setF1DualDistribution: jest.fn(),
        };
        mockQuoteService = {};
        mockCalculationService = {};
        mockProductFactory = {};
        mockDetailConfigView = {};

        // Arrange: Instantiate the service with mock dependencies
        workflowService = new WorkflowService({
            eventAggregator: mockEventAggregator,
            stateService: mockStateService,
            uiService: mockUiService,
            quoteService: mockQuoteService,
            calculationService: mockCalculationService,
            productFactory: mockProductFactory,
            detailConfigView: mockDetailConfigView,
        });
    });

    describe('handleRemoteDistribution', () => {
        it('should publish a confirmation dialog with correct remote counts', () => {
            // Arrange: Define a mock state that the service will retrieve.
            const mockState = {
                ui: {
                    driveRemoteCount: 5,
                    f1: {
                        remote_1ch_qty: 2,
                        remote_16ch_qty: null
                    }
                }
            };
            mockStateService.getState.mockReturnValue(mockState);

            // Act: Call the method under test.
            workflowService.handleRemoteDistribution();

            // Assert: Verify that eventAggregator.publish was called correctly.
            expect(mockEventAggregator.publish).toHaveBeenCalledTimes(1);
            expect(mockEventAggregator.publish).toHaveBeenCalledWith(
                EVENTS.SHOW_CONFIRMATION_DIALOG,
                expect.objectContaining({
                    message: 'Total remotes: 5. Please distribute them.',
                })
            );
        });
    });

    describe('handleDualDistribution', () => {
        it('should publish a confirmation dialog with correct dual pair counts', () => {
            // Arrange: Define a mock state with items to calculate dual pairs.
            const mockState = {
                quoteData: {
                    currentProduct: 'rollerBlind',
                    products: {
                        rollerBlind: {
                            items: [
                                { dual: 'D' }, { dual: 'D' }, // Pair 1
                                { dual: '' },
                                { dual: 'D' }, { dual: 'D' }, // Pair 2
                                { dual: 'D' }, // Unpaired
                            ]
                        }
                    }
                },
                ui: {
                    f1: {
                        dual_combo_qty: null,
                        dual_slim_qty: null
                    }
                }
            };
            mockStateService.getState.mockReturnValue(mockState);

            // Act: Call the method under test.
            workflowService.handleDualDistribution();

            // Assert: Verify that eventAggregator.publish was called correctly.
            expect(mockEventAggregator.publish).toHaveBeenCalledTimes(1);
            expect(mockEventAggregator.publish).toHaveBeenCalledWith(
                EVENTS.SHOW_CONFIRMATION_DIALOG,
                expect.objectContaining({
                    message: 'Total Dual pairs: 2. Please distribute them.',
                })
            );
        });
    });
});
--- FILE END ---

--- FILE START: 04-core-code/strategies/product-factory.js ---
// /04-core-code/strategies/product-factory.js

/**
 * @fileoverview A factory for creating product-specific strategy objects.
 * This allows the application to easily support multiple product types.
 */

// ??????????
import { RollerBlindStrategy } from './roller-blind-strategy.js';

// ???????? (Map)
// Key: ??????
// Value: ???????
const strategyMap = {
    rollerBlind: RollerBlindStrategy,
    // --- ???? ---
    // sheerCurtain: SheerCurtainStrategy, // ??????????????
    // flyScreen: FlyScreenStrategy,       // ????????
};

export class ProductFactory {
    constructor({ configManager }) {
        this.configManager = configManager;
        console.log("ProductFactory Initialized with ConfigManager.");
    }

    /**
     * Returns an instance of the strategy for the given product type.
     * @param {string} productType - The type of the product (e.g., 'rollerBlind').
     * @returns {object|null} An instance of the corresponding product strategy, or null if not found.
     */
    getProductStrategy(productType) {
        const StrategyClass = strategyMap[productType];

        if (StrategyClass) {
            // ?????????
            return new StrategyClass({ configManager: this.configManager });
        } else {
            console.error(`No strategy found for product type: ${productType}`);
            return null;
        }
    }
}
--- FILE END ---

--- FILE START: 04-core-code/strategies/roller-blind-strategy.js ---
// File: 04-core-code/strategies/roller-blind-strategy.js

/**
 * @fileoverview Contains all business logic specific to the Roller Blind product.
 * This includes price calculation, validation rules, etc.
 */

// [MODIFIED] Changed the import from a bare module specifier to a browser-compatible CDN URL.
import { v4 as uuidv4 } from 'https://cdn.jsdelivr.net/npm/uuid@9.0.1/dist/esm-browser/index.js';

export class RollerBlindStrategy {
    constructor({ configManager }) {
        this.configManager = configManager;
        console.log("RollerBlindStrategy Initialized.");
    }

    /**
     * Calculates the price for a single roller blind item based on a price matrix.
     */
    calculatePrice(item, priceMatrix) {
        if (!item || !item.width || !item.height || !item.fabricType) {
            return { price: null, error: 'Incomplete item data.' };
        }
        if (!priceMatrix) {
            return { price: null, error: `Price matrix not found for fabric type: ${item.fabricType}` };
        }

        const widthIndex = priceMatrix.widths.findIndex(w => item.width <= w);
        const dropIndex = priceMatrix.drops.findIndex(d => item.height <= d);

        if (widthIndex === -1) {
            const errorMsg = `Width ${item.width} exceeds the maximum width in the price matrix.`;
            return { price: null, error: errorMsg };
        }
        if (dropIndex === -1) {
            const errorMsg = `Height ${item.height} exceeds the maximum height in the price matrix.`;
            return { price: null, error: errorMsg };
        }

        const price = priceMatrix.prices[dropIndex][widthIndex];
        
        return price !== undefined ? { price: price } : { price: null, error: 'Price not found for the given dimensions.' };
    }

    /**
     * [REFACTORED] Returns the validation rules specific to roller blinds by fetching them from ConfigManager.
     * @returns {object}
     */
    getValidationRules() {
        const rules = this.configManager.getValidationRules('rollerBlind');
        if (!rules) {
            // Provide a safe fallback if rules are not found, preventing crashes.
            return {
                width: { name: 'Width' },
                height: { name: 'Height' }
            };
        }
        // Adapt the data from the config to the nested structure expected by the consumers.
        return {
            width: { min: rules.minWidth, max: rules.maxWidth, name: 'Width' },
            height: { min: rules.minHeight, max: rules.maxHeight, name: 'Height' }
        };
    }

    /**
     * Returns a new, empty item object for a roller blind.
     * @returns {object}
     */
    getInitialItemData() {
        return {
            itemId: uuidv4(),
            // --- Phase 1 Fields ---
            width: null,
            height: null,
            fabricType: null,
            linePrice: null,
            // --- Phase 2 Fields ---
            location: '',
            fabric: '',
            color: '',
            over: '',
            oi: '',
            lr: '',
            dual: '',
            chain: null,
            winder: '',
            motor: ''
        };
    }

    // --- Accessory Pricing Logic ---

    calculateDualPrice(items, pricePerPair) {
        const dualCount = items.filter(item => item.dual === 'D').length;
        const totalPrice = Math.floor(dualCount / 2) * pricePerPair;
        return totalPrice;
    }

    calculateWinderPrice(count, pricePerUnit) {
        return count * pricePerUnit;
    }

    calculateMotorPrice(count, pricePerUnit) {
        return count * pricePerUnit;
    }

    calculateRemotePrice(count, pricePerUnit) {
        return count * pricePerUnit;
    }

    calculateChargerPrice(count, pricePerUnit) {
        return count * pricePerUnit;
    }

    calculateCordPrice(count, pricePerUnit) {
        return count * pricePerUnit;
    }
}
--- FILE END ---

--- FILE START: 04-core-code/ui/dialog-component.js ---
// /04-core-code/ui/dialog-component.js

import { EVENTS, DOM_IDS } from '../config/constants.js';

/**
 * @fileoverview A generic, configurable component to manage confirmation dialogs.
 */
export class DialogComponent {
    constructor({ overlayElement, eventAggregator }) {
        if (!overlayElement || !eventAggregator) {
            throw new Error("Overlay element and event aggregator are required for DialogComponent.");
        }
        this.overlay = overlayElement;
        this.dialogBox = this.overlay.querySelector('.dialog-box');
        this.eventAggregator = eventAggregator;
        
        this.messageElement = this.overlay.querySelector('.dialog-message');
        this.buttonsContainer = this.overlay.querySelector('.dialog-buttons');

        this.initialize();
        console.log("DialogComponent (Refactored for Grid Layout) Initialized.");
    }

    initialize() {
        this.eventAggregator.subscribe(EVENTS.SHOW_LOAD_CONFIRMATION_DIALOG, () => {
            this.show({
                message: 'The current quote contains unsaved data. What would you like to do?',
                layout: [
                    [
                        { type: 'button', text: 'Save then Load', callback: () => this.eventAggregator.publish(EVENTS.USER_CHOSE_SAVE_THEN_LOAD), colspan: 1 },
                        { type: 'button', text: 'Load Directly', callback: () => this.eventAggregator.publish(EVENTS.USER_CHOSE_LOAD_DIRECTLY), colspan: 1 },
                        { type: 'button', text: 'Cancel', className: 'secondary', callback: () => {}, colspan: 1 }
                    ]
                ]
            });
        });

        this.eventAggregator.subscribe(EVENTS.SHOW_CONFIRMATION_DIALOG, (config) => this.show(config));

        this.overlay.addEventListener('click', (event) => {
            if (event.target === this.overlay && this.closeOnOverlayClick) {
                this.hide();
            }
        });
    }

    /**
     * Shows a dialog with a configurable message and a grid-based layout.
     * @param {object} config - The configuration object.
     * @param {string} config.message - The message to display.
     * @param {Array<Array<object>>} config.layout - An array of rows, where each row is an array of cell objects.
     * @param {boolean} [config.closeOnOverlayClick=true] - Whether clicking the overlay closes the dialog.
     * @param {Function} [config.onOpen] - A callback function to execute after the dialog is shown.
     */
    show({ message, layout = [], position = 'center', closeOnOverlayClick = true, onOpen = null }) {
        this.closeOnOverlayClick = closeOnOverlayClick;
        this.buttonsContainer.innerHTML = '';

        if (this.messageElement) {
            this.messageElement.textContent = message;
        }

        layout.forEach(row => {
            row.forEach(cellConfig => {
                const cell = document.createElement('div');
                cell.className = 'dialog-grid-cell';

                if (cellConfig.type === 'button') {
                    cell.classList.add('button-cell');
                    const button = document.createElement('button');
                    button.className = 'dialog-button';
                    if (cellConfig.className) {
                        button.classList.add(...cellConfig.className.split(' '));
                    }
                    button.textContent = cellConfig.text;
                    
                    button.addEventListener('click', () => {
                        let shouldHide = true;
                        if (cellConfig.callback && typeof cellConfig.callback === 'function') {
                            const callbackResult = cellConfig.callback();
                            if (callbackResult === false) {
                                shouldHide = false;
                            }
                        }
                        
                        if (cellConfig.closeOnClick !== false && shouldHide) {
                            this.hide();
                        }
                    });
                    cell.appendChild(button);

                } else if (cellConfig.type === 'input') {
                    cell.classList.add('input-cell');
                    const input = document.createElement('input');
                    input.className = 'dialog-input';
                    input.id = cellConfig.id;
                    input.type = 'number';
                    input.placeholder = cellConfig.placeholder || '';
                    if (cellConfig.value !== undefined) {
                        input.value = cellConfig.value;
                    }
                    input.min = 0;
                    
                    input.addEventListener('keydown', (event) => {
                        if (event.key === 'Enter') {
                            event.preventDefault();
                            const confirmButton = this.buttonsContainer.querySelector('.primary-confirm-button');
                            if (confirmButton) {
                                confirmButton.click();
                            }
                        }
                    });
                    cell.appendChild(input);

                } else if (cellConfig.type === 'text') {
                    cell.classList.add('text-cell');
                    cell.textContent = cellConfig.text;
                }
                
                if (cellConfig.className && cellConfig.type !== 'button') {
                     cell.classList.add(...cellConfig.className.split(' '));
                }

                if (cellConfig.colspan) {
                    cell.style.gridColumn = `span ${cellConfig.colspan}`;
                }

                this.buttonsContainer.appendChild(cell);
            });
        });

        if (position === 'bottomThird') {
            this.dialogBox.style.marginTop = `calc( (100vh - 20vh) / 3 * 2 - 50% )`;
        } else {
            this.dialogBox.style.marginTop = '';
        }

        this.overlay.classList.remove('is-hidden');

        if (typeof onOpen === 'function') {
            onOpen();
        }
    }

    hide() {
        this.overlay.classList.add('is-hidden');
    }
}
--- FILE END ---

--- FILE START: 04-core-code/ui/input-handler.js ---
// File: 04-core-code/ui/input-handler.js

import { LeftPanelInputHandler } from './left-panel-input-handler.js';
import { EVENTS, DOM_IDS } from '../config/constants.js';

export class InputHandler {
    constructor(eventAggregator) {
        this.eventAggregator = eventAggregator;
        this.leftPanelHandler = new LeftPanelInputHandler(eventAggregator);
        this.longPressTimer = null;
        this.pressThreshold = 500; // 500ms for a long press
        this.isLongPress = false;
    }

    initialize() {
        this._setupNumericKeyboard();
        this._setupTableInteraction();
        this._setupFunctionKeys();
        this._setupPanelToggles();
        this._setupFileLoader();
        this._setupPhysicalKeyboard();
        
        this.leftPanelHandler.initialize();
    }

    _setupPhysicalKeyboard() {
        window.addEventListener('keydown', (event) => {
            // [MODIFIED] Added 'textarea' to the selector to prevent the handler
            // from intercepting its keyboard events, thus fixing the backspace bug.
            if (event.target.matches('input:not([readonly]), textarea')) {
                return;
            }
            
            let keyToPublish = null;
            let eventToPublish = EVENTS.NUMERIC_KEY_PRESSED;
            const arrowKeys = ['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight'];
            if (arrowKeys.includes(event.key)) {
                event.preventDefault();
                const direction = event.key.replace('Arrow', '').toLowerCase();
                this.eventAggregator.publish(EVENTS.USER_MOVED_ACTIVE_CELL, { direction });
                return;
            }
            if (event.key >= '0' && event.key <= '9') {
                keyToPublish = event.key;
            } 
            // [FIX] Add a check to ensure event.key is not null or undefined before calling .toLowerCase()
            else if (event.key) {
                switch (event.key.toLowerCase()) {
                    case 'w': keyToPublish = 'W'; break;
                    case 'h': keyToPublish = 'H'; break;
                    case 't': this.eventAggregator.publish(EVENTS.USER_REQUESTED_CYCLE_TYPE); return;
                    case '$': this.eventAggregator.publish(EVENTS.USER_REQUESTED_CALCULATE_AND_SUM); return;
                    case 'enter': keyToPublish = 'ENT'; event.preventDefault(); break;
                    case 'backspace': keyToPublish = 'DEL'; event.preventDefault(); break;
                    case 'delete': eventToPublish = EVENTS.USER_REQUESTED_CLEAR_ROW; break;
                }
            }
            if (keyToPublish !== null) {
                this.eventAggregator.publish(eventToPublish, { key: keyToPublish });
            } else if (eventToPublish === EVENTS.USER_REQUESTED_CLEAR_ROW) {
                this.eventAggregator.publish(eventToPublish);
            }
        });
    }

    _setupFileLoader() {
        const fileLoader = document.getElementById(DOM_IDS.FILE_LOADER);
        if (fileLoader) {
            fileLoader.addEventListener('change', (event) => {
                const file = event.target.files[0];
                if (!file) { return; }
                const reader = new FileReader();
                reader.onload = (e) => {
                    const content = e.target.result;
                    this.eventAggregator.publish(EVENTS.FILE_LOADED, { fileName: file.name, content: content });
                };
                reader.onerror = () => {
                    this.eventAggregator.publish(EVENTS.SHOW_NOTIFICATION, { message: `Error reading file: ${reader.error}`, type: 'error' });
                };
                reader.readAsText(file);
                event.target.value = '';
            });
        }
        this.eventAggregator.subscribe(EVENTS.TRIGGER_FILE_LOAD, () => {
            if (fileLoader) {
                fileLoader.click();
            }
        });
    }
    
    _setupPanelToggles() {
        const numericToggle = document.getElementById(DOM_IDS.PANEL_TOGGLE);
        if (numericToggle) {
            numericToggle.addEventListener('click', () => {
                this.eventAggregator.publish(EVENTS.USER_TOGGLED_NUMERIC_KEYBOARD);
            });
        }
    }

    _setupFunctionKeys() {
        const setupButton = (id, eventName) => {
            const button = document.getElementById(id);
            if (button) {
                button.addEventListener('click', () => {
                    this.eventAggregator.publish(eventName);
                });
            }
        };

        // These are buttons located outside the main grid (e.g., in the top control bar)
        setupButton('key-reset', EVENTS.USER_REQUESTED_RESET);
        setupButton(DOM_IDS.KEY_M_SET, EVENTS.USER_REQUESTED_MULTI_TYPE_SET);
    }
    
    _setupNumericKeyboard() {
        const keyboard = document.getElementById(DOM_IDS.NUMERIC_KEYBOARD);
        if (!keyboard) return;

        const addLongPressSupport = (button, longPressEventName, clickEventName, data = {}) => {
            const startPress = (e) => {
                e.preventDefault();
                this.isLongPress = false;
                this.longPressTimer = setTimeout(() => {
                    this.isLongPress = true;
                    this.eventAggregator.publish(longPressEventName, data);
                }, this.pressThreshold);
            };

            const endPress = (e) => {
                clearTimeout(this.longPressTimer);
                if (!this.isLongPress && clickEventName) {
                    this.eventAggregator.publish(clickEventName, data);
                }
            };

            button.addEventListener('mousedown', startPress);
            button.addEventListener('touchstart', startPress, { passive: false });
            button.addEventListener('mouseup', endPress);
            button.addEventListener('mouseleave', () => clearTimeout(this.longPressTimer));
            button.addEventListener('touchend', endPress);
        };
        
        const addButtonListener = (id, eventName, data = {}) => {
            const button = document.getElementById(id);
            if(button) {
                if (id === 'key-type') {
                    addLongPressSupport(button, EVENTS.TYPE_BUTTON_LONG_PRESSED, EVENTS.USER_REQUESTED_CYCLE_TYPE, data);
                } else {
                    button.addEventListener('click', () => {
                        this.eventAggregator.publish(eventName, data);
                    });
                }
            }
        };

        // Main grid keys
        addButtonListener('key-7', EVENTS.NUMERIC_KEY_PRESSED, { key: '7' });
        addButtonListener('key-8', EVENTS.NUMERIC_KEY_PRESSED, { key: '8' });
        addButtonListener('key-9', EVENTS.NUMERIC_KEY_PRESSED, { key: '9' });
        addButtonListener('key-4', EVENTS.NUMERIC_KEY_PRESSED, { key: '4' });
        addButtonListener('key-5', EVENTS.NUMERIC_KEY_PRESSED, { key: '5' });
        addButtonListener('key-6', EVENTS.NUMERIC_KEY_PRESSED, { key: '6' });
        addButtonListener('key-1', EVENTS.NUMERIC_KEY_PRESSED, { key: '1' });
        addButtonListener('key-2', EVENTS.NUMERIC_KEY_PRESSED, { key: '2' });
        addButtonListener('key-3', EVENTS.NUMERIC_KEY_PRESSED, { key: '3' });
        addButtonListener('key-0', EVENTS.NUMERIC_KEY_PRESSED, { key: '0' });
        
        // Function keys within the grid
        addButtonListener('key-w', EVENTS.NUMERIC_KEY_PRESSED, { key: 'W' });
        addButtonListener('key-h', EVENTS.NUMERIC_KEY_PRESSED, { key: 'H' });
        addButtonListener('key-price', EVENTS.USER_REQUESTED_CALCULATE_AND_SUM);
        addButtonListener('key-type', EVENTS.USER_REQUESTED_CYCLE_TYPE);
        addButtonListener('key-del', EVENTS.NUMERIC_KEY_PRESSED, { key: 'DEL' });
        addButtonListener('key-enter', EVENTS.NUMERIC_KEY_PRESSED, { key: 'ENT' });
        addButtonListener('key-clear', EVENTS.USER_REQUESTED_CLEAR_ROW);

        addButtonListener(DOM_IDS.KEY_INS_GRID, EVENTS.USER_REQUESTED_INSERT_ROW);
    }

    _setupTableInteraction() {
        const table = document.getElementById(DOM_IDS.RESULTS_TABLE);
        if (table) {
            const startPress = (e) => {
                const target = e.target;
                if (target.tagName === 'TD' && target.dataset.column === 'TYPE') {
                    this.isLongPress = false;
                    this.longPressTimer = setTimeout(() => {
                        this.isLongPress = true;
                        const rowIndex = target.parentElement.dataset.rowIndex;
                        this.eventAggregator.publish(EVENTS.TYPE_CELL_LONG_PRESSED, { rowIndex: parseInt(rowIndex, 10) });
                    }, this.pressThreshold);
                }
            };
            
            const endPress = (e) => {
                clearTimeout(this.longPressTimer);

                if (!this.isLongPress) {
                    const target = e.target;
                    if (target.tagName === 'TD') {
                        const column = target.dataset.column;
                        const rowIndex = target.parentElement.dataset.rowIndex;
                        if (column && rowIndex) {
                            const eventData = { rowIndex: parseInt(rowIndex, 10), column };
                            if (column === 'sequence') {
                                this.eventAggregator.publish(EVENTS.SEQUENCE_CELL_CLICKED, eventData);
                            } else {
                                this.eventAggregator.publish(EVENTS.TABLE_CELL_CLICKED, eventData);
                            }
                        }
                    }
                }
                this.isLongPress = false;
            };

            table.addEventListener('mousedown', startPress);
            table.addEventListener('touchstart', startPress, { passive: false });
            
            table.addEventListener('mouseup', endPress);
            
            table.addEventListener('touchend', (e) => {
                e.preventDefault();
                endPress(e);
            });

            table.addEventListener('mouseleave', () => {
                clearTimeout(this.longPressTimer);
            }, true);
        }
    }
}
--- FILE END ---

--- FILE START: 04-core-code/ui/left-panel-component.js ---
// File: 04-core-code/ui/left-panel-component.js

import { DOM_IDS } from '../config/constants.js';

/**
 * @fileoverview A dedicated component for managing and rendering the Left Panel UI.
 */
export class LeftPanelComponent {
    constructor(panelElement) {
        if (!panelElement) {
            throw new Error("Panel element is required for LeftPanelComponent.");
        }
        this.panelElement = panelElement;
        this.panelToggle = document.getElementById(DOM_IDS.LEFT_PANEL_TOGGLE);

        // Cache all DOM elements in the constructor.
        this.locationButton = document.getElementById('btn-focus-location');
        this.locationInput = document.getElementById(DOM_IDS.LOCATION_INPUT_BOX);
        this.fabricColorButton = document.getElementById('btn-focus-fabric');
        this.lfButton = document.getElementById('btn-light-filter');
        this.lfDelButton = document.getElementById('btn-lf-del');
        this.k3EditButton = document.getElementById('btn-k3-edit');
        this.k3OverButton = document.getElementById('btn-batch-cycle-over');
        this.k3OiButton = document.getElementById('btn-batch-cycle-oi');
        this.k3LrButton = document.getElementById('btn-batch-cycle-lr');
        this.k4WinderButton = document.getElementById('btn-k5-winder');
        this.k4MotorButton = document.getElementById('btn-k5-motor');
        this.k4RemoteButton = document.getElementById('btn-k5-remote');
        this.k4ChargerButton = document.getElementById('btn-k5-charger');
        this.k4CordButton = document.getElementById('btn-k5-3m-cord');
        this.k4WinderDisplay = document.getElementById('k5-display-winder');
        this.k4MotorDisplay = document.getElementById('k5-display-motor');
        this.k4RemoteDisplay = document.getElementById('k5-display-remote');
        this.k4ChargerDisplay = document.getElementById('k5-display-charger');
        this.k4CordDisplay = document.getElementById('k5-display-cord');
        this.k4RemoteAddBtn = document.getElementById('btn-k5-remote-add');
        this.k4RemoteSubtractBtn = document.getElementById('btn-k5-remote-subtract');
        this.k4RemoteCountDisplay = document.getElementById('k5-display-remote-count');
        this.k4ChargerAddBtn = document.getElementById('btn-k5-charger-add');
        this.k4ChargerSubtractBtn = document.getElementById('btn-k5-charger-subtract');
        this.k4ChargerCountDisplay = document.getElementById('k5-display-charger-count');
        this.k4CordAddBtn = document.getElementById('btn-k5-cord-add');
        this.k4CordSubtractBtn = document.getElementById('btn-k5-cord-subtract');
        this.k4CordCountDisplay = document.getElementById('k5-display-cord-count');
        this.k4TotalDisplay = document.getElementById('k5-display-total');
        this.k5DualButton = document.getElementById('btn-k4-dual');
        this.k5ChainButton = document.getElementById('btn-k4-chain');
        this.k5InputDisplay = document.getElementById('k4-input-display');
        this.k5DualPriceValue = document.querySelector('#k4-dual-price-display .price-value');
        this.k5WinderSummaryDisplay = document.getElementById('k5-display-winder-summary');
        this.k5MotorSummaryDisplay = document.getElementById('k5-display-motor-summary');
        this.k5RemoteSummaryDisplay = document.getElementById('k5-display-remote-summary');
        this.k5ChargerSummaryDisplay = document.getElementById('k5-display-charger-summary');
        this.k5CordSummaryDisplay = document.getElementById('k5-display-cord-summary');
        this.k5AccessoriesTotalDisplay = document.getElementById('k5-display-accessories-total');
        this.tabButtons = this.panelElement.querySelectorAll('.tab-button');
        this.tabContents = this.panelElement.querySelectorAll('.tab-content');
        
        console.log("LeftPanelComponent Initialized.");
    }

    render(uiState, quoteData) {
        this._updateTabStates(uiState);
        this._updatePanelButtonStates(uiState, quoteData);
    }

    _updateTabStates(uiState) {
        const { activeEditMode, activeTabId, dualChainMode, driveAccessoryMode } = uiState;
        const isInEditMode = activeEditMode !== null || dualChainMode !== null || driveAccessoryMode !== null;

        const activeTabButton = document.getElementById(activeTabId);
        const activeContentTarget = activeTabButton ? activeTabButton.dataset.tabTarget : null;

        this.tabButtons.forEach(button => {
            const isThisButtonActive = button.id === activeTabId;
            button.classList.toggle('active', isThisButtonActive);
            button.disabled = isInEditMode && !isThisButtonActive;
        });

        if (this.panelToggle) {
            this.panelToggle.style.pointerEvents = isInEditMode ? 'none' : 'auto';
            this.panelToggle.style.opacity = isInEditMode ? '0.5' : '1';
        }

        this.tabContents.forEach(content => {
            const isThisContentActive = activeContentTarget && `#${content.id}` === activeContentTarget;
            content.classList.toggle('active', isThisContentActive);
        });
        
        const panelBgColors = {
            'k1-tab': 'var(--k1-bg-color)',
            'k2-tab': 'var(--k2-bg-color)',
            'k3-tab': 'var(--k3-bg-color)',
            'k4-tab': 'var(--k4-bg-color)',
            'k5-tab': 'var(--k5-bg-color)',
        };
        this.panelElement.style.backgroundColor = panelBgColors[activeTabId] || 'var(--k1-bg-color)';
    }

    _updatePanelButtonStates(uiState, quoteData) {
        const { 
            activeEditMode, locationInputValue,
            dualChainMode, targetCell, dualChainInputValue,
            driveAccessoryMode, driveRemoteCount, driveChargerCount, driveCordCount,
            driveWinderTotalPrice, driveMotorTotalPrice, driveRemoteTotalPrice, driveChargerTotalPrice, driveCordTotalPrice,
            driveGrandTotal,
            summaryWinderPrice, summaryMotorPrice,
            summaryRemotePrice, summaryChargerPrice, summaryCordPrice, summaryAccessoriesTotal
        } = uiState;

        // [CORRECTED] Read lfModifiedRowIndexes from its new location in quoteData.uiMetadata.
        const lfModifiedRowIndexes = quoteData.uiMetadata?.lfModifiedRowIndexes || [];
        
        const currentProductKey = quoteData.currentProduct;
        const productData = quoteData.products[currentProductKey];
        const items = productData.items;
        const accessoriesSummary = productData.summary.accessories || {};

        // --- K1 Location Input State ---
        if (this.locationInput) {
            const isLocationActive = activeEditMode === 'K1';
            this.locationInput.disabled = !isLocationActive;
            this.locationInput.classList.toggle('active', isLocationActive);
            if (this.locationInput.value !== locationInputValue) {
                this.locationInput.value = locationInputValue;
            }
        }
        
        // --- K2 Button Active/Disabled States ---
        const isFCMode = activeEditMode === 'K2';
        const isLFSelectMode = activeEditMode === 'K2_LF_SELECT';
        const isLFDeleteMode = activeEditMode === 'K2_LF_DELETE_SELECT';
        const isAnyK2ModeActive = isFCMode || isLFSelectMode || isLFDeleteMode;

        if (this.locationButton) this.locationButton.classList.toggle('active', activeEditMode === 'K1');
        if (this.fabricColorButton) this.fabricColorButton.classList.toggle('active', isFCMode);
        if (this.lfButton) this.lfButton.classList.toggle('active', isLFSelectMode);
        if (this.lfDelButton) this.lfDelButton.classList.toggle('active', isLFDeleteMode);
        
        // [CORRECTED] Changed check from .size > 0 to .length > 0 for arrays.
        const hasLFModified = lfModifiedRowIndexes.length > 0;

        if (this.locationButton) this.locationButton.disabled = isAnyK2ModeActive;
        if (this.fabricColorButton) this.fabricColorButton.disabled = activeEditMode !== null && !isFCMode;
        if (this.lfButton) this.lfButton.disabled = activeEditMode !== null && !isLFSelectMode;
        if (this.lfDelButton) this.lfDelButton.disabled = (activeEditMode !== null && !isLFDeleteMode) || !hasLFModified;

        // --- K3 Button Active/Disabled States ---
        const isK3EditMode = activeEditMode === 'K3';
        if (this.k3EditButton) {
            this.k3EditButton.classList.toggle('active', isK3EditMode);
            this.k3EditButton.disabled = activeEditMode !== null && !isK3EditMode;
        }
        const k3SubButtonsDisabled = !isK3EditMode;
        if (this.k3OverButton) this.k3OverButton.disabled = k3SubButtonsDisabled;
        if (this.k3OiButton) this.k3OiButton.disabled = k3SubButtonsDisabled;
        if (this.k3LrButton) this.k3LrButton.disabled = k3SubButtonsDisabled;

        const formatPrice = (price) => (typeof price === 'number') ? `$${price.toFixed(0)}` : '';

        // --- K4 (Drive/Accessories) States ---
        const k4Buttons = [
            { el: this.k4WinderButton, mode: 'winder' },
            { el: this.k4MotorButton, mode: 'motor' },
            { el: this.k4RemoteButton, mode: 'remote' },
            { el: this.k4ChargerButton, mode: 'charger' },
            { el: this.k4CordButton, mode: 'cord' }
        ];
        
        const isAnyK4ModeActive = driveAccessoryMode !== null;
        k4Buttons.forEach(({ el, mode }) => {
            if (el) {
                const isActive = driveAccessoryMode === mode;
                el.classList.toggle('active', isActive);
                el.disabled = isAnyK4ModeActive && !isActive;
            }
        });
        
        if (this.k4WinderDisplay) this.k4WinderDisplay.value = formatPrice(driveWinderTotalPrice);
        if (this.k4MotorDisplay) this.k4MotorDisplay.value = formatPrice(driveMotorTotalPrice);
        if (this.k4RemoteDisplay) this.k4RemoteDisplay.value = formatPrice(driveRemoteTotalPrice);
        if (this.k4ChargerDisplay) this.k4ChargerDisplay.value = formatPrice(driveChargerTotalPrice);
        if (this.k4CordDisplay) this.k4CordDisplay.value = formatPrice(driveCordTotalPrice);
        if (this.k4RemoteCountDisplay) this.k4RemoteCountDisplay.value = driveRemoteCount;
        if (this.k4ChargerCountDisplay) this.k4ChargerCountDisplay.value = driveChargerCount;
        if (this.k4CordCountDisplay) this.k4CordCountDisplay.value = driveCordCount;
        if (this.k4TotalDisplay) this.k4TotalDisplay.value = formatPrice(driveGrandTotal);
        
        const remoteBtnsDisabled = driveAccessoryMode !== 'remote';
        if (this.k4RemoteAddBtn) this.k4RemoteAddBtn.disabled = remoteBtnsDisabled;
        if (this.k4RemoteSubtractBtn) this.k4RemoteSubtractBtn.disabled = remoteBtnsDisabled;
        const chargerBtnsDisabled = driveAccessoryMode !== 'charger';
        if (this.k4ChargerAddBtn) this.k4ChargerAddBtn.disabled = chargerBtnsDisabled;
        if (this.k4ChargerSubtractBtn) this.k4ChargerSubtractBtn.disabled = chargerBtnsDisabled;
        const cordBtnsDisabled = driveAccessoryMode !== 'cord';
        if (this.k4CordAddBtn) this.k4CordAddBtn.disabled = cordBtnsDisabled;
        if (this.k4CordSubtractBtn) this.k4CordSubtractBtn.disabled = cordBtnsDisabled;

        // --- K5 (Dual/Chain & Summary) States ---
        if (this.k5DualButton) {
            const isDisabled = dualChainMode !== null && dualChainMode !== 'dual';
            this.k5DualButton.classList.toggle('active', dualChainMode === 'dual');
            this.k5DualButton.disabled = isDisabled;
        }
        if (this.k5ChainButton) {
            const isDisabled = dualChainMode !== null && dualChainMode !== 'chain';
            this.k5ChainButton.classList.toggle('active', dualChainMode === 'chain');
            this.k5ChainButton.disabled = isDisabled;
        }
        
        if (this.k5InputDisplay) {
            const isChainInputActive = dualChainMode === 'chain' && targetCell && targetCell.column === 'chain';
            this.k5InputDisplay.disabled = !isChainInputActive;
            this.k5InputDisplay.classList.toggle('active', isChainInputActive);
            if (this.k5InputDisplay.value !== dualChainInputValue) this.k5InputDisplay.value = dualChainInputValue;
        }
        if (this.k5DualPriceValue) {
            const dualPrice = accessoriesSummary.dualCostSum;
            const newText = (typeof dualPrice === 'number') ? `$${dualPrice.toFixed(0)}` : '';
            if (this.k5DualPriceValue.textContent !== newText) this.k5DualPriceValue.textContent = newText;
        }
        if (this.k5WinderSummaryDisplay) this.k5WinderSummaryDisplay.value = formatPrice(summaryWinderPrice);
        if (this.k5MotorSummaryDisplay) this.k5MotorSummaryDisplay.value = formatPrice(summaryMotorPrice);
        if (this.k5RemoteSummaryDisplay) this.k5RemoteSummaryDisplay.value = formatPrice(summaryRemotePrice);
        if (this.k5ChargerSummaryDisplay) this.k5ChargerSummaryDisplay.value = formatPrice(summaryChargerPrice);
        if (this.k5CordSummaryDisplay) this.k5CordSummaryDisplay.value = formatPrice(summaryCordPrice);
        if (this.k5AccessoriesTotalDisplay) this.k5AccessoriesTotalDisplay.value = formatPrice(summaryAccessoriesTotal);
    }
}
--- FILE END ---

--- FILE START: 04-core-code/ui/left-panel-input-handler.js ---
// File: 04-core-code/ui/left-panel-input-handler.js

import { EVENTS, DOM_IDS } from '../config/constants.js';

/**
 * @fileoverview A dedicated input handler for all user interactions within the Left Panel.
 */
export class LeftPanelInputHandler {
    constructor(eventAggregator) {
        this.eventAggregator = eventAggregator;
        console.log("LeftPanelInputHandler Initialized.");
    }

    initialize() {
        this._setupNavigationToggle();
        this._setupTabButtons();
        this._setupK1Inputs();
        this._setupK2Inputs();
        this._setupK3Inputs();
        this._setupK4Inputs();
        this._setupK5Inputs();
    }

    _setupNavigationToggle() {
        const leftPanelToggle = document.getElementById(DOM_IDS.LEFT_PANEL_TOGGLE);
        if (leftPanelToggle) {
            leftPanelToggle.addEventListener('click', () => {
                this.eventAggregator.publish(EVENTS.USER_NAVIGATED_TO_DETAIL_VIEW);
            });
        }
    }

    _setupTabButtons() {
        const tabContainer = document.querySelector('#left-panel .tab-container');
        if (tabContainer) {
            tabContainer.addEventListener('click', (event) => {
                const target = event.target.closest('.tab-button');
                if (target && !target.disabled) {
                    this.eventAggregator.publish(EVENTS.USER_SWITCHED_TAB, { tabId: target.id });
                }
            });
        }
    }

    _setupK1Inputs() {
        const locationButton = document.getElementById('btn-focus-location');
        if (locationButton) {
            locationButton.addEventListener('click', () => {
                this.eventAggregator.publish(EVENTS.USER_REQUESTED_FOCUS_MODE, { column: 'location' });
            });
        }

        const locationInput = document.getElementById(DOM_IDS.LOCATION_INPUT_BOX);
        if (locationInput) {
            locationInput.addEventListener('keydown', (event) => {
                if (event.key === 'Enter') {
                    event.preventDefault();
                    this.eventAggregator.publish(EVENTS.LOCATION_INPUT_ENTER_PRESSED, {
                        value: event.target.value
                    });
                }
            });
        }
    }

    _setupK2Inputs() {
        const fabricButton = document.getElementById('btn-focus-fabric');
        if (fabricButton) {
            fabricButton.addEventListener('click', () => {
                this.eventAggregator.publish(EVENTS.USER_REQUESTED_FOCUS_MODE, { column: 'fabric' });
            });
        }
        const lfButton = document.getElementById('btn-light-filter');
        if (lfButton) {
            lfButton.addEventListener('click', () => {
                this.eventAggregator.publish(EVENTS.USER_REQUESTED_LF_EDIT_MODE);
            });
        }
        const lfDelButton = document.getElementById('btn-lf-del');
        if (lfDelButton) {
            lfDelButton.addEventListener('click', () => {
                this.eventAggregator.publish(EVENTS.USER_REQUESTED_LF_DELETE_MODE);
            });
        }

        const batchTable = document.getElementById(DOM_IDS.FABRIC_BATCH_TABLE);
        if (batchTable) {
            batchTable.addEventListener('keydown', (event) => {
                if (event.key === 'Enter' && event.target.matches('.panel-input')) {
                    event.preventDefault();
                    const input = event.target;
                    this.eventAggregator.publish(EVENTS.PANEL_INPUT_ENTER_PRESSED, {
                        type: input.dataset.type,
                        field: input.dataset.field,
                        value: input.value
                    });
                }
            });
            batchTable.addEventListener('blur', (event) => {
                if (event.target.matches('.panel-input')) {
                    this.eventAggregator.publish(EVENTS.PANEL_INPUT_BLURRED, {
                        type: event.target.dataset.type,
                        field: event.target.dataset.field,
                        value: event.target.value
                    });
                }
            }, true);
        }
    }

    _setupK3Inputs() {
        const editButton = document.getElementById('btn-k3-edit');
        if (editButton) {
            editButton.addEventListener('click', () => {
                this.eventAggregator.publish(EVENTS.USER_TOGGLED_K3_EDIT_MODE);
            });
        }

        const setupBatchCycleButton = (buttonId, column) => {
            const button = document.getElementById(buttonId);
            if (button) {
                button.addEventListener('click', () => {
                    this.eventAggregator.publish(EVENTS.USER_REQUESTED_BATCH_CYCLE, { column });
                });
            }
        };
        setupBatchCycleButton('btn-batch-cycle-over', 'over');
        setupBatchCycleButton('btn-batch-cycle-oi', 'oi');
        setupBatchCycleButton('btn-batch-cycle-lr', 'lr');
    }

    _setupK4Inputs() {
        const setupK4Button = (buttonId, mode) => {
            const button = document.getElementById(buttonId);
            if (button) {
                button.addEventListener('click', () => {
                    this.eventAggregator.publish(EVENTS.DUAL_CHAIN_MODE_CHANGED, { mode });
                });
            }
        };
        setupK4Button('btn-k4-dual', 'dual');
        setupK4Button('btn-k4-chain', 'chain');

        const k4Input = document.getElementById('k4-input-display');
        if (k4Input) {
            k4Input.addEventListener('keydown', (event) => {
                if (event.key === 'Enter') {
                    event.preventDefault();
                    this.eventAggregator.publish(EVENTS.CHAIN_ENTER_PRESSED, {
                        value: event.target.value
                    });
                }
            });
        }
    }

    _setupK5Inputs() {
        const setupK5ModeButton = (buttonId, mode) => {
            const button = document.getElementById(buttonId);
            if (button) {
                // [REFACTOR] Removed special handling for the remote button.
                // It now fires a standard 'driveModeChanged' event, same as other accessory buttons.
                button.addEventListener('click', () => {
                    this.eventAggregator.publish(EVENTS.DRIVE_MODE_CHANGED, { mode });
                });
            }
        };
        setupK5ModeButton('btn-k5-winder', 'winder');
        setupK5ModeButton('btn-k5-motor', 'motor');
        setupK5ModeButton('btn-k5-remote', 'remote');
        setupK5ModeButton('btn-k5-charger', 'charger');
        setupK5ModeButton('btn-k5-3m-cord', 'cord');

        const setupK5CounterButton = (buttonId, accessory, direction) => {
            const button = document.getElementById(buttonId);
            if (button) {
                button.addEventListener('click', () => {
                    this.eventAggregator.publish(EVENTS.ACCESSORY_COUNTER_CHANGED, { accessory, direction });
                });
            }
        };
        setupK5CounterButton('btn-k5-remote-add', 'remote', 'add');
        setupK5CounterButton('btn-k5-remote-subtract', 'remote', 'subtract');
        setupK5CounterButton('btn-k5-charger-add', 'charger', 'add');
        setupK5CounterButton('btn-k5-charger-subtract', 'charger', 'subtract');
        setupK5CounterButton('btn-k5-cord-add', 'cord', 'add');
        setupK5CounterButton('btn-k5-cord-subtract', 'cord', 'subtract');
    }
}
--- FILE END ---

--- FILE START: 04-core-code/ui/notification-component.js ---
// /04-core-code/ui/notification-component.js

import { EVENTS } from '../config/constants.js';

/**
 * @fileoverview A dedicated component for managing and displaying toast notifications.
 */
export class NotificationComponent {
    /**
     * @param {HTMLElement} containerElement The element to which notifications will be appended.
     * @param {EventAggregator} eventAggregator The application's event bus.
     */
    constructor({ containerElement, eventAggregator }) {
        if (!containerElement || !eventAggregator) {
            throw new Error("Container element and event aggregator are required for NotificationComponent.");
        }
        this.container = containerElement;
        this.eventAggregator = eventAggregator;
        
        this.initialize();
        console.log("NotificationComponent Initialized.");
    }

    initialize() {
        this.eventAggregator.subscribe(EVENTS.SHOW_NOTIFICATION, (data) => this.show(data));
    }

    /**
     * Creates and displays a toast notification.
     * @param {object} data The notification data { message, type }.
     */
    show({ message, type = 'info' }) {
        const toast = document.createElement('div');
        toast.className = 'toast-message';
        toast.textContent = message;

        if (type === 'error') {
            toast.classList.add('error');
        }

        this.container.appendChild(toast);

        // The animation defined in CSS will handle the fade out.
        // We just need to remove the element from the DOM after the animation is complete.
        setTimeout(() => {
            toast.remove();
        }, 4000); // Should match the animation duration in style.css
    }
}
--- FILE END ---

--- FILE START: 04-core-code/ui/panel-component.js ---
// /04-core-code/ui/panel-component.js

/**
 * @fileoverview A dedicated and configurable component for managing a slide-out panel's behavior.
 */
export class PanelComponent {
    /**
     * @param {object} config - The configuration object for the panel.
     * @param {HTMLElement} config.panelElement - The main panel element.
     * @param {HTMLElement} config.toggleElement - The button that toggles the panel.
     * @param {EventAggregator} config.eventAggregator - The application's event bus.
     * @param {string} config.expandedClass - The CSS class to apply when the panel is expanded (e.g., 'is-expanded').
     * @param {string} [config.retractEventName] - Optional: The event to listen for to retract the panel.
     * @param {Function} [config.onToggle] - Optional: A callback function to execute when the panel is toggled.
     */
    constructor(config) {
        this.config = config;

        // --- Configuration Validation ---
        if (!this.config.panelElement || !this.config.toggleElement || !this.config.eventAggregator || !this.config.expandedClass) {
            throw new Error("PanelComponent config requires: panelElement, toggleElement, eventAggregator, and expandedClass.");
        }

        this.initialize();
        console.log("Configurable PanelComponent Initialized for:", this.config.panelElement.id);
    }

    initialize() {
        this.config.toggleElement.addEventListener('click', () => this.toggle());

        if (this.config.retractEventName) {
            this.config.eventAggregator.subscribe(this.config.retractEventName, () => this.retract());
        }
    }

    /**
     * Toggles the panel's visibility based on the configured CSS class.
     */
    toggle() {
        const isExpanded = this.config.panelElement.classList.toggle(this.config.expandedClass);

        // [NEW] Execute the onToggle callback if it exists.
        if (typeof this.config.onToggle === 'function') {
            this.config.onToggle(isExpanded);
        }
    }

    /**
     * Retracts the panel by removing the configured CSS class.
     */
    retract() {
        this.config.panelElement.classList.remove(this.config.expandedClass);
    }

    /**
     * Expands the panel by adding the configured CSS class.
     */
    expand() {
        this.config.panelElement.classList.add(this.config.expandedClass);
    }
}
--- FILE END ---

--- FILE START: 04-core-code/ui/right-panel-component.js ---
// File: 04-core-code/ui/right-panel-component.js

import { DOM_IDS } from '../config/constants.js';

/**
 * @fileoverview A container/manager component for the Right Panel.
 * Its sole responsibility is to manage the lifecycle of its sub-views (F1, F2, F3, F4)
 * and delegate rendering tasks to the currently active sub-view.
 */
export class RightPanelComponent {
    constructor({ panelElement, eventAggregator, f1View, f2View, f3View, f4View }) {
        if (!panelElement || !eventAggregator) {
            throw new Error("Panel element and event aggregator are required for RightPanelComponent.");
        }
        this.panelElement = panelElement;
        this.eventAggregator = eventAggregator;
        this.state = null;

        // Store instances of sub-views
        this.views = {
            'f1-tab': f1View,
            'f2-tab': f2View,
            'f3-tab': f3View,
            'f4-tab': f4View,
        };
        this.activeView = this.views['f1-tab']; // Default active view

        this.tabContainer = this.panelElement.querySelector('.tab-container');
        this.tabButtons = this.panelElement.querySelectorAll('.tab-button');
        this.tabContents = this.panelElement.querySelectorAll('.tab-content');

        this.initialize();
        console.log("RightPanelComponent (Refactored as a Manager) Initialized.");
    }

    initialize() {
        if (this.tabContainer) {
            this.tabContainer.addEventListener('click', (event) => {
                const target = event.target.closest('.tab-button');
                if (target && !target.disabled) {
                    this.setActiveTab(target.id);
                }
            });
        }
    }

    render(state) {
        this.state = state; // Cache the latest state

        // Only render the currently active sub-view for performance.
        if (this.activeView && typeof this.activeView.render === 'function') {
            this.activeView.render(state);
        }
    }

    // [MODIFIED] Method is now public to allow external control (e.g., from UIManager).
    setActiveTab(tabId) {
        const targetContentId = document.getElementById(tabId)?.dataset.tabTarget;
        if (!targetContentId) return;

        this.tabButtons.forEach(button => {
            button.classList.toggle('active', button.id === tabId);
        });

        this.tabContents.forEach(content => {
            content.classList.toggle('active', `#${content.id}` === targetContentId);
        });

        this.activeView = this.views[tabId];

        // Call the activate method on the new active view, if it exists.
        // This is useful for one-time actions when a tab is selected.
        if (this.activeView && typeof this.activeView.activate === 'function') {
            this.activeView.activate();
        }
    }
}
--- FILE END ---

--- FILE START: 04-core-code/ui/summary-component.js ---
// /04-core-code/ui/summary-component.js

/**
 * @fileoverview A dedicated component for rendering the total sum display.
 */
export class SummaryComponent {
    constructor(valueElement) {
        if (!valueElement) {
            throw new Error("Value element is required for SummaryComponent.");
        }
        this.totalSumValueElement = valueElement;
        console.log("SummaryComponent Initialized.");
    }

    /**
     * Renders the total sum and its state color.
     * @param {object} summary - The summary object from quoteData.
     * @param {boolean} isSumOutdated - Flag indicating if the sum is outdated.
     */
    render(summary, isSumOutdated) {
        const totalSum = summary ? summary.totalSum : null;
        let textContent = '';
        if (typeof totalSum === 'number') {
            // [MODIFIED] Changed number format to integer.
            textContent = totalSum.toFixed(0);
        }

        if (this.totalSumValueElement.textContent !== textContent) {
            this.totalSumValueElement.textContent = textContent;
        }

        // Use toggle with the 'force' parameter for cleaner logic
        this.totalSumValueElement.classList.toggle('is-outdated', isSumOutdated);
        this.totalSumValueElement.classList.toggle('is-current', !isSumOutdated);
    }
}
--- FILE END ---

--- FILE START: 04-core-code/ui/table-component.js ---
// File: 04-core-code/ui/table-component.js

/**
 * @fileoverview A dynamic component for rendering the results table header and body.
 */

const COLUMN_CONFIG = {
    sequence: { header: '#', className: 'col-sequence', dataColumn: 'sequence', cellType: 'td' },
    width: { header: 'W', className: 'col-w', dataColumn: 'width', cellType: 'td' },
    height: { header: 'H', className: 'col-h', dataColumn: 'height', cellType: 'td' },
    TYPE: { header: 'TYPE', className: 'col-type', dataColumn: 'TYPE', cellType: 'td' },
    Price: { 
        header: (state) => `<input type="text" class="input-display-cell" id="input-display-cell" value="${state.ui.inputValue || ''}" readonly>`, 
        className: 'input-display-header col-price', 
        dataColumn: 'Price',
        cellType: 'th'
    },
    location: { header: 'Location', className: 'col-location', dataColumn: 'location', cellType: 'td' },
    fabric: { header: 'F-Name', className: 'col-fabric', dataColumn: 'fabric', cellType: 'td' },
    color: { header: 'F-Color', className: 'col-color', dataColumn: 'color', cellType: 'td' },
    over: { header: 'Over', className: 'col-over', dataColumn: 'over', cellType: 'td' },
    oi: { header: 'O/I', className: 'col-oi', dataColumn: 'oi', cellType: 'td' },
    lr: { header: 'L/R', className: 'col-lr', dataColumn: 'lr', cellType: 'td' },
    fabricTypeDisplay: { header: 'Type', className: 'col-type', dataColumn: 'fabricType', cellType: 'td' },
    dual: { header: 'Dual', className: 'col-dual', dataColumn: 'dual', cellType: 'td' },
    chain: { header: 'Chain', className: 'col-chain', dataColumn: 'chain', cellType: 'td' },
    winder: { header: 'Winder', className: 'col-winder', dataColumn: 'winder', cellType: 'td' },
    motor: { header: 'Motor', className: 'col-motor', dataColumn: 'motor', cellType: 'td' },
};


export class TableComponent {
    constructor(tableElement) {
        if (!tableElement) {
            throw new Error("Table element is required for TableComponent.");
        }
        this.tableElement = tableElement;
        this.cellRenderers = this._createCellRenderers();
        console.log("TableComponent (Refactored with Renderer Strategy) Initialized.");
    }

    render(state) {
        const currentProductKey = state.quoteData.currentProduct;
        const items = state.quoteData.products[currentProductKey].items;

        const { visibleColumns, isLocationEditMode, targetCell } = state.ui;

        this.tableElement.innerHTML = '';

        const thead = this.tableElement.createTHead();
        const headerRow = thead.insertRow();
        visibleColumns.forEach(key => {
            const config = COLUMN_CONFIG[key];
            if (!config) return;

            const cell = document.createElement(config.cellType);
            cell.className = config.className;
            
            if (typeof config.header === 'function') {
                cell.innerHTML = config.header(state);
            } else {
                cell.innerHTML = config.header;
            }
            headerRow.appendChild(cell);
        });

        const tbody = this.tableElement.createTBody();
        if (items.length === 0 || (items.length === 1 && !items[0].width && !items[0].height)) {
            const row = tbody.insertRow();
            const cell = row.insertCell();
            cell.colSpan = visibleColumns.length;
            cell.textContent = 'Enter dimensions to begin...';
            cell.style.textAlign = 'left';
            cell.style.color = '#888';
            return;
        }

        items.forEach((item, index) => {
            const row = tbody.insertRow();
            row.dataset.rowIndex = index;

            if (isLocationEditMode && targetCell && index === targetCell.rowIndex) {
                row.classList.add('target-row-highlight');
            }

            visibleColumns.forEach(key => {
                const config = COLUMN_CONFIG[key];
                if (!config) return;

                const cell = row.insertCell();
                cell.className = config.className;
                cell.dataset.column = config.dataColumn;
                
                this._renderCellContent(cell, key, item, index, state);
            });
        });
    }

    _renderCellContent(cell, key, item, index, state) {
        const { targetCell } = state.ui;
        const { lfModifiedRowIndexes } = state.quoteData.uiMetadata || { lfModifiedRowIndexes: [] };

        if (targetCell && index === targetCell.rowIndex && key === targetCell.column) {
            cell.classList.add('target-cell');
        }

        if (lfModifiedRowIndexes.includes(index) && (key === 'fabric' || key === 'color')) {
            cell.classList.add('is-lf-modified');
        }

        const renderer = this.cellRenderers[key] || this.cellRenderers.default;
        if (renderer) {
            renderer(cell, item, index, state);
        }
    }

    _createCellRenderers() {
        return {
            sequence: (cell, item, index, state) => {
                // [MODIFIED] Removed obsolete state flags 'selectedRowIndex' and 'isMultiSelectMode'
                const { multiSelectSelectedIndexes, lfSelectedRowIndexes } = state.ui;
                const currentProductKey = state.quoteData.currentProduct;
                const items = state.quoteData.products[currentProductKey].items;

                cell.textContent = index + 1;
                const isLastRowEmpty = (index === items.length - 1) && (!item.width && !item.height);
                
                // [MODIFIED] Simplified highlighting logic to rely only on multiSelectSelectedIndexes
                if (lfSelectedRowIndexes.includes(index)) {
                    cell.classList.add('lf-selection-highlight');
                } else if (isLastRowEmpty) {
                    cell.classList.add('selection-disabled');
                } else if (multiSelectSelectedIndexes.includes(index)) {
                    // Use a single, consistent class for any selection (single or multi)
                    cell.classList.add('selected-row-highlight');
                }
            },
            width: (cell, item, index, state) => {
                const { activeCell } = state.ui;
                cell.textContent = item.width || '';
                if (activeCell && index === activeCell.rowIndex && activeCell.column === 'width') cell.classList.add('active-input-cell');
            },
            height: (cell, item, index, state) => {
                const { activeCell } = state.ui;
                cell.textContent = item.height || '';
                if (activeCell && index === activeCell.rowIndex && activeCell.column === 'height') cell.classList.add('active-input-cell');
            },
            TYPE: (cell, item, index, state) => {
                const { activeCell } = state.ui;
                cell.textContent = (item.width || item.height) ? (item.fabricType || '') : '';
                
                const typeClassMap = {
                    'B2': 'type-b2', 'B3': 'type-b3', 'B4': 'type-b4',
                    'B5': 'type-b5', 'SN': 'type-sn'
                };
                if (typeClassMap[item.fabricType]) {
                    cell.classList.add(typeClassMap[item.fabricType]);
                }

                if (activeCell && index === activeCell.rowIndex && activeCell.column === 'TYPE') cell.classList.add('active-input-cell');
            },
            Price: (cell, item) => {
                cell.textContent = item.linePrice ? item.linePrice.toFixed(2) : '';
                cell.classList.add('price-cell');
            },
            fabricTypeDisplay: (cell, item) => {
                cell.textContent = item.fabricType || '';

                const typeClassMap = {
                    'B2': 'type-b2', 'B3': 'type-b3', 'B4': 'type-b4',
                    'B5': 'type-b5', 'SN': 'type-sn'
                };
                if (typeClassMap[item.fabricType]) {
                    cell.classList.add(typeClassMap[item.fabricType]);
                }
            },
            dual: (cell, item) => {
                cell.textContent = item.dual || '';
                cell.classList.toggle('dual-cell-active', item.dual === 'D');
            },
            winder: (cell, item) => {
                cell.textContent = item.winder || '';
                cell.classList.toggle('winder-cell-active', !!item.winder);
            },
            motor: (cell, item) => {
                cell.textContent = item.motor || '';
                cell.classList.toggle('motor-cell-active', !!item.motor);
            },
            default: (cell, item, index, state) => {
                const columnKey = cell.dataset.column;
                cell.textContent = item[columnKey] || '';
            }
        };
    }
}
--- FILE END ---

--- FILE START: 04-core-code/ui/ui-manager.js ---
// File: 04-core-code/ui/ui-manager.js

import { TableComponent } from './table-component.js';
import { SummaryComponent } from './summary-component.js';
import { PanelComponent } from './panel-component.js';
import { NotificationComponent } from './notification-component.js';
import { DialogComponent } from './dialog-component.js';
import { LeftPanelComponent } from './left-panel-component.js';
import { EVENTS, DOM_IDS } from '../config/constants.js';

export class UIManager {
    constructor({ appElement, eventAggregator, calculationService, rightPanelComponent }) {
        this.appElement = appElement;
        this.eventAggregator = eventAggregator;
        this.calculationService = calculationService;
        this.rightPanelComponent = rightPanelComponent; // [MODIFIED] Receive instance

        this.numericKeyboardPanel = document.getElementById(DOM_IDS.NUMERIC_KEYBOARD_PANEL);

        this.insertButton = document.getElementById('key-ins-grid');
        this.clearButton = document.getElementById('key-clear');

        this.leftPanelElement = document.getElementById(DOM_IDS.LEFT_PANEL);

        const tableElement = document.getElementById(DOM_IDS.RESULTS_TABLE);
        this.tableComponent = new TableComponent(tableElement);

        const summaryElement = document.getElementById(DOM_IDS.TOTAL_SUM_VALUE);
        this.summaryComponent = new SummaryComponent(summaryElement);

        this.leftPanelComponent = new LeftPanelComponent(this.leftPanelElement);

        this.functionPanel = new PanelComponent({
            panelElement: document.getElementById(DOM_IDS.FUNCTION_PANEL),
            toggleElement: document.getElementById(DOM_IDS.FUNCTION_PANEL_TOGGLE),
            eventAggregator: this.eventAggregator,
            expandedClass: 'is-expanded',
            retractEventName: EVENTS.OPERATION_SUCCESSFUL_AUTO_HIDE_PANEL,
            // [NEW] Add onToggle callback to default to F1 tab when opened.
            onToggle: (isExpanded) => {
                if (isExpanded) {
                    this.rightPanelComponent.setActiveTab('f1-tab');
                }
            }
        });

        // [REMOVED] Self-instantiation of RightPanelComponent is removed.

        this.notificationComponent = new NotificationComponent({
            containerElement: document.getElementById(DOM_IDS.TOAST_CONTAINER),
            eventAggregator: this.eventAggregator
        });

        this.dialogComponent = new DialogComponent({
            overlayElement: document.getElementById(DOM_IDS.CONFIRMATION_DIALOG_OVERLAY),
            eventAggregator: this.eventAggregator
        });

        this.initialize();
    }

    initialize() {
        this.eventAggregator.subscribe(EVENTS.USER_TOGGLED_NUMERIC_KEYBOARD, () => this._toggleNumericKeyboard());

        // [NEW] Add a global listener for focus events.
        this.eventAggregator.subscribe(EVENTS.FOCUS_ELEMENT, ({ elementId }) => {
            const element = document.getElementById(elementId);
            if (element) {
                setTimeout(() => {
                    element.focus();
                    if (typeof element.select === 'function') {
                        element.select();
                    }
                }, 50); // A small delay to ensure the element is rendered and focusable.
            }
        });

        this._initializeResizeObserver();
    }

    _initializeResizeObserver() {
        const resizeObserver = new ResizeObserver(() => {
            if (this.leftPanelElement.classList.contains('is-expanded')) {
                this._updateExpandedPanelPosition();
            }
        });
        resizeObserver.observe(this.appElement);
    }

    _updateExpandedPanelPosition() {
        if (!this.leftPanelElement || !this.numericKeyboardPanel) return;

        const key7 = this.numericKeyboardPanel.querySelector('#key-7');
        const key0 = this.numericKeyboardPanel.querySelector('#key-0');
        const typeKey = this.numericKeyboardPanel.querySelector('#key-type');

        if (!key7 || !key0 || !typeKey) {
            console.error("One or more reference elements for panel positioning are missing.");
            return;
        }

        const key7Rect = key7.getBoundingClientRect();
        const key0Rect = key0.getBoundingClientRect();
        const typeKeyRect = typeKey.getBoundingClientRect();

        const newTop = key7Rect.top;
        const newWidth = typeKeyRect.left + (typeKeyRect.width / 2);
        const newHeight = key0Rect.bottom - key7Rect.top;

        this.leftPanelElement.style.top = `${newTop}px`;
        this.leftPanelElement.style.width = `${newWidth}px`;
        this.leftPanelElement.style.height = `${newHeight}px`;

        this.leftPanelElement.style.setProperty('--left-panel-width', `${newWidth}px`);
    }

    render(state) {
        const isDetailView = state.ui.currentView === 'DETAIL_CONFIG';
        this.appElement.classList.toggle('detail-view-active', isDetailView);

        const currentProductKey = state.quoteData.currentProduct;
        const currentProductData = state.quoteData.products[currentProductKey];

        this.tableComponent.render(state);
        this.summaryComponent.render(currentProductData.summary, state.ui.isSumOutdated);
        this.leftPanelComponent.render(state.ui, state.quoteData);
        this.rightPanelComponent.render(state);

        this._updateButtonStates(state);
        this._updateLeftPanelState(state.ui.currentView);
        this._scrollToActiveCell(state);
    }

    _updateLeftPanelState(currentView) {
        if (this.leftPanelElement) {
            const isExpanded = (currentView === 'DETAIL_CONFIG');
            this.leftPanelElement.classList.toggle('is-expanded', isExpanded);

            if (isExpanded) {
                setTimeout(() => this._updateExpandedPanelPosition(), 0);
            }
        }
    }

    _updateButtonStates(state) {
        const { multiSelectSelectedIndexes } = state.ui;
        const currentProductKey = state.quoteData.currentProduct;
        const items = state.quoteData.products[currentProductKey].items;

        const selectionCount = multiSelectSelectedIndexes.length;
        const isSingleSelection = selectionCount === 1;

        // --- Insert Button Logic ---
        let insertDisabled = true;
        if (isSingleSelection) {
            const selectedIndex = multiSelectSelectedIndexes[0];
            const isLastRow = selectedIndex === items.length - 1;
            if (!isLastRow) {
                const nextItem = items[selectedIndex + 1];
                const isNextRowEmpty = !nextItem.width && !nextItem.height && !nextItem.fabricType;
                if (!isNextRowEmpty) {
                    insertDisabled = false;
                }
            }
        }
        if (this.insertButton) this.insertButton.disabled = insertDisabled;

        // --- Clear Button Logic ---
        let clearDisabled = !isSingleSelection; // Disable if not a single selection
        if (isSingleSelection) {
            const selectedIndex = multiSelectSelectedIndexes[0];
            const itemsLength = items.length;
            // Also disable if it's the last data row or the final empty row
            if (selectedIndex >= itemsLength - 2) {
                clearDisabled = true;
            }
        }
        if (this.clearButton) this.clearButton.disabled = clearDisabled;
    }

    _scrollToActiveCell(state) {
        if (!state.ui.activeCell) return;
        const { rowIndex, column } = state.ui.activeCell;
        const activeCellElement = document.querySelector(`tr[data-row-index="${rowIndex}"] td[data-column="${column}"]`);
        if (activeCellElement) {
            activeCellElement.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }
    }

    _toggleNumericKeyboard() {
        if (this.numericKeyboardPanel) {
            this.numericKeyboardPanel.classList.toggle('is-collapsed');
        }
    }
}
--- FILE END ---

--- FILE START: 04-core-code/ui/css/dialog.css ---
/* File: 04-core-code/ui/css/dialog.css */

/* --- Dialog Component Styles --- */
.dialog-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.6);
    display: flex;
    justify-content: center;
    align-items: center; /* [MODIFIED] Center vertically for easier positioning */
    z-index: 10000;
    opacity: 1;
    transition: opacity 0.2s ease-in-out;
    padding: 20px; /* Add some padding for small screens */
    box-sizing: border-box;
}

.dialog-overlay.is-hidden {
    opacity: 0;
    pointer-events: none;
}

.dialog-box {
    background-color: white;
    padding: 24px;
    border-radius: 8px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    text-align: center;
    max-width: 500px; /* [MODIFIED] Set a max-width for larger screens */
    width: 90%; /* [MODIFIED] Use a percentage for smaller screens */
    font-size: 100%; /* [MODIFIED] Use base font size */
    
    display: flex;
    flex-direction: column;
    gap: 24px; /* [MODIFIED] Use gap for consistent spacing instead of space-between */

    /* [MODIFIED] This ensures the box doesn't get too tall and the bottom is visible */
    max-height: 80vh;
}

.dialog-message {
    margin: 0; /* [MODIFIED] Remove margin, use gap from parent instead */
    font-size: 1.1em;
    line-height: 1.5;
    color: #333;
}

.dialog-buttons {
    display: grid;
    grid-template-columns: 1fr 2fr 1fr;
    gap: 3px 10px; 
    align-items: center;
    width: 100%; /* Ensure it takes full width of the dialog box */
}

/* [NEW] Styles for the input field cell and the input itself */
.dialog-grid-cell.input-cell {
    grid-column: span 3; /* Make input span all columns */
    padding: 10px 0;
}

.dialog-input {
    width: 80%;
    padding: 10px;
    font-size: 1.2em;
    text-align: center;
    border: 1px solid #ccc;
    border-radius: 4px;
}

.dialog-grid-cell.text-cell {
    text-align: left;
    font-size: 0.9em;
    color: #555;
    padding: 0 5px;
}

.dialog-grid-cell.button-cell {
    grid-column: span 1;
}

.dialog-grid-cell.cancel-cell {
    grid-column-start: 3;
    display: flex;
    justify-content: flex-end;
}

.dialog-button {
    width: 100%;
    padding: 8px 10px; 
    border: 1px solid #ccc;
    border-radius: 5px;
    cursor: pointer;
    font-size: 1em;
    font-weight: bold;
    transition: background-color 0.2s, border-color 0.2s;
    background-color: #f0f0f0;
    color: #333;
}

.dialog-button:hover {
    background-color: #e0e0e0;
    border-color: #999;
}

.dialog-button.secondary {
    background-color: #6c757d;
    color: white;
    border-color: #5a6268;
}

.dialog-button.secondary:hover {
    background-color: #5a6268;
}

@media (max-height: 700px) {
    .dialog-box {
        padding: 15px;
    }
    .dialog-buttons {
        gap: 2px 8px;
    }
    .dialog-button {
        padding: 6px 8px;
        font-size: 0.9em;
    }
}
--- FILE END ---

--- FILE START: 04-core-code/ui/css/f1-grid.css ---
/* /04-core-code/ui/css/f1-grid.css */

.f1-grid {
    display: grid;
    /* Columns: A (label), B (quantity/label), C (amount) */
    /* [MODIFIED] Rightmost column width reduced by 10% */
    grid-template-columns: 1.2fr 0.8fr 0.9fr;
    gap: 12px 10px;
    /* Increased vertical gap */
    align-items: center;
    /* [MODIFIED] Base font size reduced by ~10% */
    font-size: 13px;
}

/* --- Universal Cell Style --- */
.f1-grid .grid-cell {
    min-height: 28px;
    display: flex;
    align-items: center;
    justify-content: flex-start;
    /* Default to left-align */
}

/* --- Span Helpers --- */
.f1-grid .grid-span-2 {
    grid-column: span 2;
}

.f1-grid .grid-span-3 {
    grid-column: span 3;
}

.f1-grid .grid-col-start-2 {
    grid-column-start: 2;
}

/* --- Grouping Containers --- */
.component-cost-group,
.rb-pricing-group,
.final-summary-group {
    grid-column: 1 / -1;
    border-radius: 8px;
    /* [MODIFIED] Reduced horizontal padding to widen the component */
    padding: 15px 8px;
    display: grid;
    grid-template-columns: subgrid;
    gap: 8px 10px;
}

.component-cost-group {
    border: 2px solid #6B8E23;
    background-color: #f9f9f9;
}

.rb-pricing-group {
    border: 2px solid #87CEEB;
    /* SkyBlue */
    background-color: #f0f8ff;
    /* AliceBlue */
}

.final-summary-group {
    border: 2px solid #DC143C;
    /* Crimson */
    background-color: #fffafa;
    /* Snow */
}

/* --- Object Styles (Boxes) --- */
.f1-grid .qty-box,
.f1-grid .price-box,
.f1-grid .input-box {
    width: 100%;
    min-height: 30px;
    border: 1px solid #000000;
    background-color: #ffffff;
    border-radius: 4px;
    box-sizing: border-box;
    display: flex;
    align-items: center;
    padding: 0 8px;
    font-family: "Menlo", "Consolas", monospace;
}

#f1-rb-discount-input {
    border: 1px solid #000000;
    border-radius: 4px;
    box-sizing: border-box;
    text-align: center;
}

.f1-grid .qty-box {
    justify-content: center;
}

.f1-grid .price-box {
    justify-content: flex-end;
    font-weight: bold;
}

.f1-grid .input-box {
    justify-content: center;
    font-weight: bold;
}

/* --- Color Palettes --- */
.f1-grid .bg-bright-green {
    background-color: #dcfce7;
    border-color: #86efac;
}

.f1-grid .bg-light-purple {
    background-color: #E6E6FA;
    border-color: #b19cd9;
}

.f1-grid .bg-pink {
    background-color: #FFF0F5;
    border-color: #ffb6c1;
}

/* --- Typography & Alignment --- */
.f1-grid .text-right {
    justify-content: flex-end;
}

.f1-grid .font-bold {
    font-weight: bold;
}

/* [MODIFIED] Prevent wrapping on all labels in the first column */
.component-cost-group .grid-cell:first-child,
.rb-pricing-group .grid-cell:first-child,
.final-summary-group .grid-cell:first-child {
    white-space: nowrap;
}


/* --- Alternating Background + Side Border --- */
.f1-grid .group-row {
    grid-column: 1 / -1;
    /* Make the background span all 3 columns */
    display: grid;
    grid-template-columns: subgrid;
    /* Inherit parent grid columns */
    background-color: #f8f8f8;
    /* [MODIFIED] Adjusted negative margin to match new padding */
    margin: -4px -8px;
    padding: 4px 8px;
}

.f1-grid .group-row-dual {
    border-left: 3px solid #3b82f6;
    /* Blue border */
}

.f1-grid .group-row-remote {
    border-left: 3px solid #f97316;
    /* Orange border */
}

/* --- Hide Number Input Spinners --- */
.f1-grid input[type=number]::-webkit-outer-spin-button,
.f1-grid input[type=number]::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
}

.f1-grid input[type=number] {
    -moz-appearance: textfield;
}
--- FILE END ---

--- FILE START: 04-core-code/ui/css/f2-summary-table.css ---
/* File: 04-core-code/ui/css/f2-summary-table.css */

.f2-summary-grid {
    display: grid;
    /* Columns: A(label) B(value/input) C(value) */
    grid-template-columns: 1fr 1fr 1fr;
    gap: 4px 10px;
    /* Vertical and horizontal gap */
    align-items: center;
}

.f2-summary-grid>div,
.f2-summary-grid>input {
    font-size: 0.8em;
    padding: 4px;
    box-sizing: border-box;
    min-height: 26px;
    display: flex;
    align-items: center;
}

.grid-cell-label {
    font-weight: 500;
    color: #374151;
    white-space: nowrap;
}

.grid-cell-label.text-right {
    justify-content: flex-end;
}

.grid-cell-value {
    font-family: 'Courier New', Courier, monospace;
    font-weight: bold;
    justify-content: flex-end;
    background-color: #e9ecef;
    border-radius: 3px;
    padding-right: 6px;
}

.grid-cell-input {
    width: 100%;
    border: 1px solid #b0b8c4;
    border-radius: 3px;
    text-align: right;
    padding-right: 6px;
    font-family: 'Courier New', Courier, monospace;
}

.grid-cell-input::placeholder {
    text-align: center;
    font-style: italic;
}

.grid-cell-placeholder {
    visibility: hidden;
}

.grid-span-3 {
    grid-column: 1 / -1;
    /* Span all 3 columns */
}

.grid-spacer {
    min-height: 10px;
}

.section-header {
    /* [MODIFIED] Changed to span 2 columns */
    grid-column: 1 / span 2;
    font-weight: bold;
    color: #1f2937;
    background-color: #d1d5db;
    padding: 4px;
    border-radius: 3px;
    margin-top: 8px;
    justify-content: center;
    font-size: 0.85em;
}

/* [ADDED] Style for the total value in the header row */
.section-header-total {
    margin-top: 8px;
    /* Aligns with the section-header */
}


/* Specific color overrides based on chart */
#f2-b4-acce-sum,
#f2-b11-e-acce-sum,
#f2-b16-surcharge-fee,
#f2-b22-sumprice,
#f2-b24-gst {
    background-color: #fffacd;
    /* Light yellow */
}

#f2-b20-singleprofit,
#f2-b21-rb-profit,
#f2-b23-sumprofit,
#f2-b25-netprofit,
#f2-c17-1st-rb-price {
    color: #c0392b;
    /* Red */
    background-color: #f8d7da;
    /* Light pink */
}

/* --- Strikethrough Feature Styles --- */
#f2-c13-delivery-fee,
#f2-c14-install-fee,
#f2-c15-removal-fee {
    cursor: pointer;
    transition: background-color 0.2s;
}

.is-excluded {
    background-color: #f8d7da !important;
    /* Light pink */
    text-decoration: line-through;
    color: #721c24;
}


/* Hide Number Input Spinners */
.grid-cell-input[type=number]::-webkit-outer-spin-button,
.grid-cell-input[type=number]::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
}

.grid-cell-input[type=number] {
    -moz-appearance: textfield;
}
--- FILE END ---

--- FILE START: 04-core-code/ui/css/f3-adjustments.css ---
/* /04-core-code/ui/css/f3-adjustments.css */

/* --- F3 Main Container & Grid Layout --- */
.f3-container {
    display: grid;
    /* Columns: A (Label), B (Content), C (Content), D (Blank) */
    grid-template-columns: 0.8fr 1.2fr 1fr 0.5fr;
    gap: 12px 10px;
    align-items: center;
}

/* --- Generic Cell Styles --- */
.f3-container .grid-cell {
    min-height: 28px;
    display: flex;
    align-items: center;
}

/* --- Span Helpers --- */
.f3-container .grid-span-2 {
    grid-column: span 2;
}

.f3-container .grid-span-4 {
    grid-column: span 4;
}

/* --- Section Headers --- */
.f3-container .section-header {
    grid-column: 1 / -1;
    /* Span all columns */
    font-weight: bold;
    color: #1f2937;
    background-color: #d1d5db;
    padding: 5px 10px;
    border-radius: 4px;
    margin-top: 15px;
    font-size: 0.9em;
}

.f3-container .section-header:first-child {
    margin-top: 0;
}

/* --- Input & Button Styles --- */
.f3-container .input-field,
.f3-container .textarea-field {
    width: 100%;
    padding: 6px 8px;
    border: 1px solid #b0b8c4;
    border-radius: 4px;
    box-sizing: border-box;
    font-family: inherit;
    font-size: 1em;
}

.f3-container .textarea-field {
    resize: vertical;
    /* Allow vertical resizing for text areas */
}

.f3-container .action-button {
    width: 100%;
    padding: 10px;
    font-size: 1.1em;
    font-weight: bold;
    cursor: pointer;
    border-radius: 5px;
    border: 1px solid #1e40af;
    background-color: #3b82f6;
    color: white;
    transition: background-color 0.2s;
}

.f3-container .action-button:hover {
    background-color: #2563eb;
}
--- FILE END ---

--- FILE START: 04-core-code/ui/css/results-table.css ---
/* File: 04-core-code/ui/css/results-table.css */

/* --- Main Results Table Styles --- */
.results-table {
    width: 100%;
    border-collapse: collapse;
    table-layout: fixed;
    margin-top: 5px;
}

.results-table thead {
    position: sticky;
    top: 0;
    background-color: var(--app-bg-color);
    z-index: 10;
}

.results-table td,
.results-table th {
    border: 1px solid #ddd;
    padding: 8px;
    text-align: center;
    word-break: break-all;
}

.results-table th,
.input-display-cell {
    border-top: none;
    box-shadow: inset 0 6px 0 0 var(--header-border-color);
}

/* --- Column Widths --- */
.results-table .col-sequence { width: 40px; }
.results-table .col-w { width: auto; }
.results-table .col-h { width: auto; }
.results-table .col-type { width: 80px; }
.results-table .col-price { width: 90px; }
.results-table .col-location { width: 120px; }
.results-table .col-fabric { width: 120px; }
.results-table .col-color { width: 120px; }
.results-table .col-over,
.results-table .col-oi,
.results-table .col-lr {
    width: 80px;
}
.results-table .col-dual,
.results-table .col-chain {
    width: 80px;
}
.results-table .col-winder,
.results-table .col-motor {
    width: 80px;
}


/* --- Cell States & Special Styles --- */
.results-table td.target-cell {
    box-shadow: inset 0 0 0 2px black;
}

.results-table tr.target-row-highlight > td {
    background-color: #fffacd;
}

.results-table th.input-display-header {
    padding: 0;
    border: none;
    border-left: 1px solid #ddd;
    border-right: 1px solid #ddd;
    border-bottom: 1px solid #ddd;
}

.input-display-cell {
    background-color: #fffacd;
    font-size: 1.1em;
    font-weight: bold;
    text-align: right;
    height: 100%;
    width: 100%;
    box-sizing: border-box;
    padding: 8px;
    border: none;
}

.results-table td.price-cell {
    text-align: right;
    font-size: 0.9em;
}

.results-table td.active-input-cell {
    box-shadow: inset 0 0 0 2px var(--primary-color);
}
.results-table td.selected-row-highlight {
    background-color: var(--highlight-color);
    font-weight: bold;
}

.results-table td.multi-selected-row {
    background-color: #f8d7da;
    font-weight: bold;
}
.results-table td.selection-disabled {
    background-color: #e9ecef;
    color: #6c757d;
    cursor: not-allowed;
}

.type-b2 { font-weight: bold; font-style: italic; }
.type-sn { color: var(--medium-blue-color); font-weight: bold; }
/* [NEW] Added placeholder styles for new fabric types */
.type-b3 { color: #8a2be2; font-weight: bold; } /* BlueViolet */
.type-b4 { color: #20b2aa; font-weight: bold; } /* LightSeaGreen */
.type-b5 { color: #d2691e; font-weight: bold; } /* Chocolate */


/* --- Responsive Adjustments for Mobile Devices --- */
@media (max-width: 600px) {
    /* Quick Quote View */
    .app-container:not(.detail-view-active) .results-table th,
    .app-container:not(.detail-view-active) .results-table td {
        padding: 8px 4px;
    }

    .app-container:not(.detail-view-active) .results-table .col-sequence { width: 21px; }
    .app-container:not(.detail-view-active) .results-table .col-w,
    .app-container:not(.detail-view-active) .results-table .col-h { width: 63px; }
    .app-container:not(.detail-view-active) .results-table .col-type { width: 55px; }
    .app-container:not(.detail-view-active) .results-table .col-price { width: 80px; }

    /* Detail View */
    .app-container.detail-view-active .results-table th,
    .app-container.detail-view-active .results-table td {
        font-size: 0.72em;
        padding: 8px 3px;
    }

    .app-container.detail-view-active .results-table th { font-size: 0.7em; }
    .app-container.detail-view-active .input-display-cell { font-size: 1em; }

    .app-container.detail-view-active .results-table .col-sequence { width: 29px; }
    .app-container.detail-view-active .results-table .col-type { width: 50px; }
    .app-container.detail-view-active .results-table .col-location { width: 90px; }
    .app-container.detail-view-active .results-table .col-over,
    .app-container.detail-view-active .results-table .col-oi,
    .app-container.detail-view-active .results-table .col-lr { width: 47px; }
    .app-container.detail-view-active .results-table .col-dual,
    .app-container.detail-view-active .results-table .col-chain { width: 47px; }
    .app-container.detail-view-active .results-table .col-winder,
    .app-container.detail-view-active .results-table .col-motor { width: 60px; }
}
--- FILE END ---

--- FILE START: 04-core-code/ui/css/right-panel.css ---
/* File: 04-core-code/ui/css/right-panel.css */

@import url('./f1-grid.css');
@import url('./f2-summary-table.css');

/* --- Right Function Panel Base Styles --- */
#function-panel {
    position: fixed;
    top: 0;
    right: 0;
    width: 290px;
    height: 100%;
    background-color: #e5e7eb;
    border-left: 1px solid var(--panel-border-color);
    box-shadow: -2px 0 10px rgba(0,0,0,0.1);
    z-index: 100;
    transform: translateX(100%);
    transition: transform 0.3s ease-in-out, background-color 0.3s ease-in-out;
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
    padding: 0;
}

#function-panel.is-expanded {
    transform: translateX(0);
}

#function-panel-toggle {
    position: absolute;
    left: -30px;
    top: 50%;
    transform: translateY(-50%);
    width: 30px;
    height: 80px;
    background-color: #e5e7eb;
    border: 1px solid var(--panel-border-color);
    border-right: none;
    border-radius: 8px 0 0 8px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
}

#function-panel-toggle .toggle-arrow {
    width: 24px;
    height: 24px;
    transition: opacity 0.3s;
    position: absolute;
}

#function-panel .arrow-left {
    opacity: 1;
}

#function-panel .arrow-right {
    opacity: 0;
}

#function-panel.is-expanded .arrow-left {
    opacity: 0;
}

#function-panel.is-expanded .arrow-right {
    opacity: 1;
}

/* --- Tab System Styles (Mirrors left-panel.css) --- */
#function-panel .tab-container {
    display: flex;
    flex-shrink: 0;
    background-color: #d1d5db;
}

#function-panel .tab-button {
    height: 30px;
    flex-grow: 1;
    border: none;
    background-color: transparent;
    cursor: pointer;
    font-size: 0.9em;
    font-weight: bold;
    color: #4b5563;
    transition: background-color 0.2s, color 0.2s;
    border-radius: 6px 6px 0 0;
    border-bottom: 3px solid transparent;
}

#function-panel .tab-button:hover {
    background-color: #e5e7eb;
}

#function-panel .tab-button.active {
    background-color: #f3f4f6; /* Lighter background for the active tab */
    border-color: var(--tab-active-color);
    color: var(--tab-active-color);
}

#function-panel .tab-button:disabled {
    background-color: #6c757d !important;
    color: #e9ecef !important;
    cursor: not-allowed;
    opacity: 0.7;
}

#function-panel .tab-content-container {
    flex-grow: 1;
    padding: 15px;
    overflow-y: auto;
    background-color: #f3f4f6;
}

#function-panel .tab-content {
    display: none;
}

#function-panel .tab-content.active {
    display: block;
}

/* --- Function Grid Styles (Now inside a tab) --- */
.function-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr); /* Changed to 2 columns for better spacing */
    gap: 10px;
}

.function-grid button {
    width: 100%;
    padding: 10px 5px;
    font-size: 1em;
    background-color: #fff;
    border: 1px solid #ccc;
    border-radius: 4px;
    cursor: pointer;
    transition: background-color 0.2s, opacity 0.2s;
}

.function-grid button:disabled {
    background-color: #f3f4f6;
    opacity: 0.5;
    cursor: not-allowed;
}

/* Specific button styles */
#key-save { background-color: #dcfce7; }
#key-load { background-color: #ffedd5; }
#key-export { background-color: #d1fae5; }
#key-reset { background-color: #ef4444; color: white; font-weight: bold; border-color: #dc2626; }
--- FILE END ---

--- FILE START: 04-core-code/ui/css/toast-notification.css ---
/* File: 04-core-code/ui/css/toast-notification.css */

/* --- Toast Notification Styles --- */
#toast-container {
    position: fixed;
    top: 50%; /* [MODIFIED] Changed from 20px to center vertically. */
    right: 20px;
    transform: translateY(-50%); /* [ADDED] Added to perfectly center the container. */
    z-index: 9999;
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    gap: 10px;
}

.toast-message {
    background-color: #2c3e50;
    color: white;
    padding: 15px 20px;
    border-radius: 5px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    opacity: 0;
    transform: translateX(100%);
    animation: slideInAndFadeOut 4s forwards;
}

.toast-message.error {
    background-color: #c0392b;
}

@keyframes slideInAndFadeOut {
    0% {
        opacity: 0;
        transform: translateX(100%);
    }
    15% {
        opacity: 1;
        transform: translateX(0);
    }
    85% {
        opacity: 1;
        transform: translateX(0);
    }
    100% {
        opacity: 0;
        transform: translateX(100%);
    }
}
--- FILE END ---

--- FILE START: 04-core-code/ui/css/virtual-keyboard.css ---
/* File: 04-core-code/ui/css/virtual-keyboard.css */

/* --- Keyboard Panel Styles --- */
.keyboard-panel {
    flex-shrink: 0;
    background-color: var(--keyboard-bg-color);
    border-top: 1px solid var(--panel-border-color);
    padding: 8px 15px;
    position: relative;
    transition: all 0.3s ease-in-out;
    box-sizing: border-box;
}

/* --- [MODIFIED] Flex container for top controls --- */
.top-controls-container {
    display: flex;
    /* justify-content: space-between; REMOVED to allow custom alignment */
    align-items: center;
    margin-bottom: 8px; /* Space between top controls and keyboard grid */
    height: 30px; /* Explicit height for alignment */
    gap: 20px; /* Default gap between items */
}

.virtual-keyboard {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    grid-template-rows: repeat(4, 1fr);
    gap: 5px;
}

.virtual-keyboard button {
    padding: 7px 5px;
    font-size: 1.2em;
    cursor: pointer;
    border-radius: 4px;
    border: 1px solid #ccc;
    background-color: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
    font-weight: 500;
    transition: background-color 0.1s;
}

.virtual-keyboard button:active {
    background-color: #a0d3e8;
}

.virtual-keyboard button:disabled {
    background-color: #f3f4f6;
    opacity: 0.5;
    cursor: not-allowed;
}

/* --- Keyboard Grid Layout --- */
#key-7 { grid-area: 1 / 1; }
#key-8 { grid-area: 1 / 2; }
#key-9 { grid-area: 1 / 3; }
#key-w { grid-area: 1 / 4; background-color: #e5e7eb; }
#key-type { grid-area: 1 / 5; font-weight: bold; }
#key-4 { grid-area: 2 / 1; }
#key-5 { grid-area: 2 / 2; }
#key-6 { grid-area: 2 / 3; }
#key-h { grid-area: 2 / 4; background-color: #e5e7eb; }
#key-price { grid-area: 2 / 5; font-size: 1.5em; color: #059669; font-weight: bold; }
#key-1 { grid-area: 3 / 1; }
#key-2 { grid-area: 3 / 2; }
#key-3 { grid-area: 3 / 3; }
#key-enter { grid-area: 3 / 4 / 5 / 5; background-color: #e5e7eb; font-size: 2.2em; padding-bottom: 20px; }
#key-ins-grid { grid-area: 3 / 5; background-color: #e0f2fe; } /* [NEW] Position for new Ins button */
#key-0 { grid-area: 4 / 1 / 4 / 3; }
#key-del { grid-area: 4 / 3; font-size: 1.8em; }
#key-clear { grid-area: 4 / 5; color: #ec4899; font-weight: bold; }

/* --- Panel Toggle & Summary (Now Flex Items) --- */
.panel-toggle {
    width: 80px;
    height: 25px;
    border: 1px solid #ccc;
    background-color: #fff;
    border-radius: 12px;
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    flex-shrink: 0;
}

/* --- M-SET & INS Button Styles --- */
#key-m-set,
#key-ins {
    width: 80px;
    height: 25px;
    border: 1px solid #ccc;
    background-color: #fffacd;
    border-radius: 12px;
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    font-weight: bold;
    font-size: 1em;
    transition: background-color 0.1s;
    flex-shrink: 0;
}

#key-m-set:active,
#key-ins:active {
    background-color: #a0d3e8;
}

.top-summary-container {
    height: 30px;
    display: flex;
    align-items: center;
    gap: 8px;
    /* [MODIFIED] Let this container grow and center its content */
    flex-grow: 1;
    justify-content: center;
}

.top-summary-container .label {
    font-size: 1.1em;
    color: #333;
}

.top-summary-container .value {
    font-size: 1.1em;
    font-weight: bold;
    min-width: 60px;
    text-align: right;
}

.top-summary-container .value.is-outdated {
    color: #999999;
}

.top-summary-container .value.is-current {
    color: #ec4899;
}

.panel-toggle .toggle-arrow {
    width: 20px;
    height: 20px;
    transition: opacity 0.3s ease-in-out;
    position: absolute;
}

/* --- Collapsed Panel State --- */
.keyboard-panel .arrow-down { opacity: 1; }
.keyboard-panel .arrow-up { opacity: 0; }

.keyboard-panel.is-collapsed {
    height: 30px;
    padding: 0 15px;
    border-top-width: 1px;
}

.keyboard-panel.is-collapsed .top-controls-container {
    margin-bottom: 0;
    justify-content: center;
}

.keyboard-panel.is-collapsed .arrow-down { opacity: 0; }
.keyboard-panel.is-collapsed .arrow-up { opacity: 1; }

.keyboard-panel.is-collapsed .virtual-keyboard {
    visibility: hidden;
    opacity: 0;
}

.keyboard-panel.is-collapsed .top-controls-container > *:not(.panel-toggle) {
    visibility: hidden;
    opacity: 0;
}
--- FILE END ---

--- FILE START: 04-core-code/ui/partials/detailed-item-list-final.html ---
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detailed Item List</title>
    <style>
        :root {
            --primary-color: #1a237e;
            --border-dark-grey: #555555;
            --border-light-grey: #dddddd;
            --header-bg-color: #E6E6E6;
            /* 10% 
???*/
        }

        body {
            font-family: 'Helvetica Neue', Arial, sans-serif;
            background-color: #f4f4f4;
            color: #333;
            margin: 0;
            padding: 20px;
        }

        .page-container {
            max-width: 900px; /* [MODIFIED] Set max-width to match the main quote page */
 
           margin: auto;
            padding: 20px;
        }

        .content-wrapper {
            background-color: #fff;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            border: 2px solid #a0d3e8;
        }

        .main-header {
            display: flex;
justify-content: space-between;
            align-items: baseline;
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
            margin-bottom: 40px;
        }

        .main-header h1 {
            border-bottom: none;
            padding-bottom: 0;
            margin: 0;
            color: #444;
        }

        .quote-number {
            font-size: 16px;
            color: #555;
        }

        h2 {
 
           border-top: 2px solid #eee;
            padding-top: 20px;
            padding-bottom: 0;
            margin-top: 40px;
            margin-bottom: 0;
            color: #444;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            border: 2px solid var(--border-dark-grey);
            table-layout: fixed; /* Use fixed layout for predictable column widths */
        }

   
     th,
        td {
            border: 1px solid var(--border-light-grey);
            padding: 10px 12px;
            text-align: left;
            font-size: 14px;
            white-space: nowrap;
        }

        thead th {
            font-weight: 600;
        }

        tfoot {
     
       font-weight: bold;
        }

        tfoot td {
            border-top: 2px solid #ccc;
        }

        .bg-blockout {
            background-color: #f0f0f0;
            /* Light Grey */
        }

        
.bg-screen {
            background-color: #e0f7fa;
            /* Light Blue */
        }

        .bg-light-filter {
            background-color: #ffe4e1;
            /* Pink */
        }

        .table-title {
         
   background-color: var(--header-bg-color);
            color: #333;
            font-weight: bold;
            font-size: 16px;
            border-bottom: 2px solid var(--border-light-grey);
        }

        .total-row {
            background-color: var(--header-bg-color);
            font-weight: bold;
        }

        .text-center {
            text-align: center;
        }

        .text-right {
     
       text-align: right;
        }

        .legend {
            margin-top: 40px;
            padding: 15px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 13px;
        }

        .legend h3 {
            margin-top: 0;
        }

        .legend p {
 
           margin: 8px 0;
            display: flex;
            align-items: center;
        }

        .color-swatch {
            display: inline-block;
            width: 14px;
            height: 14px;
            border: 1px solid #999;
            margin-right: 8px;
            vertical-align: middle;
        }

        .table-scroll-wrapper {
            overflow-x: auto;
            -webkit-overflow-scrolling: 
touch;
        }

        .appendix-flex-container {
            display: flex;
            gap: 20px;
            margin-top: 40px;
            align-items: flex-start;
        }

/* <CHANGE> ????????flex ??????? */
.appendix-flex-container > .table-scroll-wrapper {
    flex: 0 0 auto;        /* ????? */
    max-width: 400px;      /* ??400px */
    min-width: 272px;      /* ??272px */
}

.appendix-flex-container > .legend {
    flex: 1;               /* ????? */
    min-width: 250px;      /* ?????*/
}
        
        @media (max-width: 850px) {
 
           .appendix-flex-container {
                flex-direction: column;
            }
        }

        @media (max-width: 768px) {
            .page-container {
               
 padding: 10px;
            }

            .content-wrapper {
                padding: 15px;
            }

            .main-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 5px;
            }

        
    .table-scroll-wrapper {
                overflow-x: hidden;
            }
            .detailed-list-table {
                border: none;
                /* [MODIFIED] Force table to behave like a block element to ensure full width */
         
       display: block;
                table-layout: auto;
            }
            .detailed-list-table thead {
                border: none;
                clip: rect(0 0 0 0);
                height: 1px;
                margin: -1px;
                overflow: hidden;
                padding: 0;
                position: absolute;
                width: 1px;
            }
            .detailed-list-table tr {
   
             display: block;
                margin-bottom: 15px;
                border: 1px solid var(--border-light-grey);
                border-radius: 5px;
                padding: 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.05);
            }
            .detailed-list-table td {
                display: flex;
                justify-content: space-between;
                padding: 10px 15px;
                border: none;
                border-bottom: 1px solid var(--border-light-grey);
                text-align: right;
            }
  
          /* [REMOVED] This rule was hiding empty cells (like HD, Dual) and is no longer needed. */
            /* .detailed-list-table td.is-empty-cell {
                display: none;
            } */
            .detailed-list-table tr td:last-child {
  
              border-bottom: none;
            }
            
            .detailed-list-table td:before {
                content: attr(data-label);
                font-weight: 600;
                text-align: left;
                padding-right: 15px;
            }
           
 .detailed-list-table td:first-of-type {
                background-color: var(--header-bg-color);
                color: #333;
                font-weight: bold;
                border-radius: 4px 4px 0 0;
            }
            .detailed-list-table td:first-of-type::before {
                color: #333;
            }

            .motorised-accessories-table {
  
              table-layout: auto;
                border: 1px solid var(--border-dark-grey);
            }
        }
    </style>
</head>

<body>

    <div class="page-container">
        <div class="content-wrapper">
            <div class="main-header">
                <h1>Quotation Appendix</h1>
 
               <div class="quote-number">
                    <strong>Quote No:</strong> {{quoteId}}
                </div>
            </div>

           
 <div class="table-scroll-wrapper">
                {{{rollerBlindsTable}}}
            </div>

            <div class="appendix-flex-container">
                <div class="table-scroll-wrapper">
                 
   <table class="motorised-accessories-table">
                        <colgroup>
                            <col style="width: auto;">
                   
         <col style="width: auto;">
                            <col style="width: auto;">
                        </colgroup>
            
            <thead>
                            <tr class="table-title">
                                <th colspan="3">Motorised Accessories Summary</th>
 
                           </tr>
                            <tr>
                      
          <th>Item</th>
                                <th class="text-center">QTY</th>
                                <th class="text-right">Total 
Price</th>
                            </tr>
                        </thead>
                        <tbody>
 
                           <tr>
                                <td data-label="Item">Motor</td>
                 
               <td data-label="QTY" class="text-center">{{motorQty}}</td>
                                <td data-label="Total Price" class="text-right">{{motorPrice}}</td>
                         
   </tr>
                            <tr>
                                <td data-label="Item">Remote (1CH)</td>
            
                    <td data-label="QTY" class="text-center">{{remote1chQty}}</td>
                                <td data-label="Total Price" class="text-right">{{remote1chPrice}}</td>
                    
        </tr>
                            <tr>
                                <td data-label="Item">Remote (16CH)</td>
       
                         <td data-label="QTY" class="text-center">{{remote16chQty}}</td>
                                <td data-label="Total Price" class="text-right">{{remote16chPrice}}</td>
               
             </tr>
                            <tr>
                                <td data-label="Item">Charger</td>
   
                             <td data-label="QTY" class="text-center">{{chargerQty}}</td>
                                <td data-label="Total Price" class="text-right">{{chargerPrice}}</td>
           
                 </tr>
                            <tr>
                                
<td data-label="Item">3M Cord</td>
                                <td data-label="QTY" class="text-center">{{cord3mQty}}</td>
                                <td data-label="Total Price" class="text-right">{{cord3mPrice}}</td>
      
                      </tr>
                        </tbody>
                        <tfoot>
       
                     <tr class="total-row">
                                <td colspan="2" class="text-right">Total</td>
                     
           <td class="text-right">{{eAcceSum}}</td>
                            </tr>
                        </tfoot>
             
       </table>
                </div>

                <div class="legend">
                    <h3>Abbreviations Key</h3>
                
    <p><span class="color-swatch" style="background-color: #f0f0f0;"></span><strong>F-Name & F-Color:</strong> Blockout (BO)</p>
                    <p><span class="color-swatch" style="background-color: #e0f7fa;"></span><strong>F-Name & F-Color:</strong> Screen (SN)</p>
                    <p><span class="color-swatch" style="background-color: #ffe4e1;"></span><strong>F-Name & F-Color:</strong> Light Filter (LF)</p>
           
         <p><strong>HD:</strong> Heavy-Duty Winder</p>
                    <p><strong>Dual:</strong> Double Bracket (for Dual Roller Blinds)</p>
                </div>
            </div>
        </div>
    
</div>

</body>

</html>
--- FILE END ---

--- FILE START: 04-core-code/ui/partials/left-panel.css ---
/* File: 04-core-code/ui/partials/left-panel.css */

/* --- Left Panel Styles --- */
:root {
    --tab-active-color: #1a237e;
    --k1-bg-color: hsl(220, 15%, 96%);
    --k2-bg-color: hsl(220, 15%, 91%);
    --k3-bg-color: hsl(220, 15%, 86%);
    --k4-bg-color: hsl(220, 15%, 81%);
    --k5-bg-color: hsl(220, 15%, 76%);
}
#left-panel {
    position: fixed;
    left: 0;
    background-color: var(--k1-bg-color);
    border: 1px solid var(--panel-border-color);
    border-left: none;
    box-shadow: 2px 0 10px rgba(0,0,0,0.1);
    z-index: 100;
    transition: transform 0.3s ease-in-out, background-color 0.3s ease-in-out;
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
    padding: 0;
    transform: translateX(-100%);
}
#left-panel.is-expanded {
    transform: translateX(0);
}

/* [FINAL REVISION] Handle is now permanently fixed at left:0 and positioned lower. */
#left-panel-toggle {
    position: fixed;
    /* Move down from vertical center by the handle's own height (80px) */
    top: calc(50% + 80px); 
    left: 0;
    transform: translateY(-50%);
    width: 24px;
    height: 80px;
    background-color: #e5e7eb;
    border: 1px solid var(--panel-border-color);
    border-left: none;
    border-radius: 0 8px 8px 0;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 101;
    transition: transform 0.3s ease-in-out;
}

/* [REMOVED] The rule that moved the handle to the right has been deleted to meet the new requirement. */

#left-panel-toggle .toggle-arrow {
    width: 20px;
    height: 20px;
    transition: opacity 0.3s ease-in-out;
    position: absolute; /* Both arrows overlay each other */
}

#left-panel-toggle .arrow-right {
    opacity: 1; /* Visible by default */
}

#left-panel-toggle .arrow-left {
    opacity: 0; /* Hidden by default */
}

/* When panel is expanded, flip the arrow's visibility */
#left-panel.is-expanded ~ #left-panel-toggle .arrow-right {
    opacity: 0;
}

#left-panel.is-expanded ~ #left-panel-toggle .arrow-left {
    opacity: 1;
}


.tab-container { display: flex; flex-shrink: 0; background-color: #d1d5db; }
.tab-button {
    height: 30px; flex-grow: 1; border: none; background-color: transparent; cursor: pointer;
    font-size: 0.9em; font-weight: bold; color: #4b5563; transition: background-color 0.2s, color 0.2s;
    border-radius: 6px 6px 0 0; border-bottom: 3px solid transparent;
}
.tab-button:hover { background-color: #e5e7eb; }
.tab-button.active { color: white; }
.tab-button:disabled {
    background-color: #6c757d !important;
    color: #e9ecef !important;
    cursor: not-allowed;
    opacity: 0.7;
}

#k1-tab.active { background-color: var(--k1-bg-color); border-color: var(--tab-active-color); color: var(--tab-active-color); }
#k2-tab.active { background-color: var(--k2-bg-color); border-color: var(--tab-active-color); color: var(--tab-active-color);}
#k3-tab.active { background-color: var(--k3-bg-color); border-color: var(--tab-active-color); color: #2c3e50; }
#k4-tab.active { background-color: var(--k4-bg-color); border-color: var(--tab-active-color); color: #2c3e50; }
#k5-tab.active { background-color: var(--k5-bg-color); border-color: var(--tab-active-color); color: #2c3e50; }

.tab-content-container { flex-grow: 1; padding: 15px; overflow-y: auto; }
.tab-content { display: none; }
.tab-content.active { display: block; }
#k1-content { background-color: var(--k1-bg-color); } #k2-content { background-color: var(--k2-bg-color); }
#k3-content { background-color: var(--k3-bg-color); } #k4-content { background-color: var(--k4-bg-color); }
#k5-content { background-color: var(--k5-bg-color); }

/* --- Left Panel Feature Styles --- */
.feature-grid {
    display: flex;
    flex-direction: column;
    gap: 15px;
}
.feature-group {}
.feature-label {
    display: block; font-size: 0.8em; font-weight: bold; color: #4b5563;
    margin-bottom: 5px; text-transform: uppercase;
}
.feature-buttons {
    display: flex; gap: 8px; flex-wrap: wrap; align-items: center;
}
.feature-button {
    padding: 8px 12px; font-size: 0.9em; cursor: pointer; border-radius: 4px;
    border: 1px solid #b0b8c4; background-color: #fff; font-weight: 500;
    transition: background-color 0.2s, box-shadow 0.2s, opacity 0.2s;
    flex-grow: 1;
}
.feature-button.active {
    background-color: var(--highlight-color); font-weight: bold;
}
.feature-button.active:hover { background-color: var(--highlight-color); }
.feature-button:disabled {
    background-color: #6c757d; border-color: #5a6268; color: white;
    cursor: not-allowed; opacity: 0.7;
}
.feature-button:hover { background-color: #f0f2f5; }
.feature-button:active {
    background-color: #e5e7eb; box-shadow: inset 0 1px 2px rgba(0,0,0,0.1);
}
.batch-button { background-color: #e0f2fe; border-color: #7dd3fc; }
.batch-button:hover { background-color: #bae6fd; }

/* --- Panel Input Table Styles --- */
.panel-input-table {
    width: 100%; border-collapse: collapse; margin-top: 10px;
}
.panel-input-table th, .panel-input-table td {
    border: 1px solid #b0b8c4; padding: 4px 6px; font-size: 0.9em; text-align: center;
}
.panel-input-table th { background-color: #e5e7eb; font-weight: bold; }
.panel-input {
    width: 100%; box-sizing: border-box; border: 1px solid #b0b8c4;
    padding: 5px; border-radius: 3px; font-size: 1em;
}
#location-input-box { width: 120px; background-color: #e9ecef; }
#location-input-box.active { background-color: #fffacd; }
.panel-input:disabled { background-color: #e9ecef; cursor: not-allowed; }

/* --- K2 Light-Filter Feature Styles --- */
.results-table td.lf-selection-highlight { background-color: #fffacd; }
.results-table td.is-lf-modified {
    background-color: #ffccd5; box-shadow: inset 0 0 0 1px #e5a0aa;
}

/* --- K5 Styles --- */
#k4-input-display {
    width: 150px; text-align: right; background-color: #e9ecef;
}
#k4-input-display.active { background-color: #fffacd; }
.k4-price-box {
    border: 1px solid black; padding: 5px 8px; border-radius: 4px;
    background-color: #fff; display: flex; align-items: baseline;
    gap: 8px; justify-content: flex-end;
}
.k4-price-box .price-label { font-size: 0.8em; font-weight: bold; color: #4b5563; }
.k4-price-box .price-value { font-size: 1.1em; font-weight: bold; color: var(--primary-color); }
.results-table td.dual-cell-active { background-color: #cffde1; }

/* --- K4 Styles --- */
#k4-content .feature-buttons { display: grid; grid-template-columns: repeat(5, 1fr); }
#k4-content .feature-button { flex-grow: 0; padding: 8px 4px; font-size: 0.8em; text-align: center; }
.k5-display-row { display: grid; grid-template-columns: repeat(5, 1fr); gap: 8px; }
.k5-display-box {
    text-align: right; font-weight: bold; color: var(--primary-color);
    background-color: #e9ecef; font-size: 0.9em; padding: 6px;
}
.k5-combined-row { display: grid; grid-template-columns: repeat(5, 1fr); gap: 8px; align-items: center; }
.k5-total-label { grid-column: 1 / 2; font-weight: bold; font-size: 1.1em; color: #2c3e50; text-align: center; }
.k5-total-display {
    grid-column: 2 / 3; font-size: 1.2em; font-weight: bold; color: #ec4899;
    text-align: right; padding: 6px; background-color: #fff;
}
#k5-counter-remote { grid-column: 3 / 4; }
#k5-counter-charger { grid-column: 4 / 5; }
#k5-counter-cord { grid-column: 5 / 6; }
.k5-counter-group { display: flex; flex-direction: column; align-items: stretch; gap: 4px; }
.k5-counter-btn {
    border: 1px solid #b0b8c4; background-color: #fff; font-size: 1.2em;
    font-weight: bold; padding: 2px 0; cursor: pointer; border-radius: 4px;
}
.k5-counter-btn:active { background-color: #e5e7eb; }
.k5-counter-btn:disabled { background-color: #e9ecef; color: #adb5bd; cursor: not-allowed; }
.k5-counter-display {
    text-align: center; font-weight: bold; font-size: 1.1em;
    padding: 4px; background-color: #fff;
}
.results-table td.winder-cell-active, .results-table td.motor-cell-active {
    background-color: #fffacd; font-weight: bold;
}

/* --- K5 Panel (formerly K4) Styles --- */
.k5-grid-layout { display: flex; flex-direction: column; gap: 5px; font-size: 0.8em; }
.k5-grid-row { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
.k5-grid-group {
    border: 1px solid #333; border-radius: 4px; padding: 8px;
    display: flex; align-items: center; gap: 8px;
}
.k5-grid-group > div { flex: 1; min-width: 0; }
.k5-grid-cell-label { font-weight: bold; text-align: center; font-size: 1em; }
.k5-summary-display-box {
    text-align: right; font-weight: bold; color: var(--primary-color); background-color: #e9ecef;
}
.k5-grid-group .feature-button { width: 100%; flex-grow: 0; }
.k5-grid-group .k4-price-box, .k5-grid-group #k4-input-display { width: 100%; box-sizing: border-box; }
.k5-grid-group-total { border: 1px solid #c0392b; }
.k5-summary-total-box { font-size: 1.1em; color: #c0392b; background-color: #fff; }
--- FILE END ---

--- FILE START: 04-core-code/ui/partials/left-panel.html ---
<div id="left-panel">
    <div class="tab-container">
        <button id="k1-tab" class="tab-button active" data-tab-target="#k1-content">K1</button>
        <button id="k2-tab" class="tab-button" data-tab-target="#k2-content">K2</button>
        <button id="k3-tab" class="tab-button" data-tab-target="#k3-content">K3</button>
        <button id="k4-tab" class="tab-button" data-tab-target="#k4-content">K4</button>
        <button id="k5-tab" class="tab-button" data-tab-target="#k5-content">K5</button>
    </div>
    <div class="tab-content-container">
        <div id="k1-content" class="tab-content active">
            <div class="feature-grid">
                <div class="feature-group">
                    <div class="feature-buttons">
                        <button id="btn-focus-location" class="feature-button">#Location</button>
                        <input type="text" id="location-input-box" class="panel-input" placeholder="Location..." disabled>
                    </div>
                </div>
            </div>
        </div>
        <div id="k2-content" class="tab-content">
            <div class="feature-grid">
                <div class="feature-group">
                    <div class="feature-buttons">
                        <button id="btn-focus-fabric" class="feature-button">#Fabric & Color</button>
                        <button id="btn-light-filter" class="feature-button">Light-Filter</button>
                        <button id="btn-lf-del" class="feature-button">LF-Del</button>
                    </div>
                </div>
                <div class="feature-group">
                    <table class="panel-input-table" id="fabric-batch-table">
                        <thead>
                            <tr>
                                <th>Type</th>
                                <th>F-Name</th>
                                <th>F-Color</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>B1</td>
                                <td><input type="text" data-type="B1" data-field="fabric" class="panel-input"></td>
                                <td><input type="text" data-type="B1" data-field="color" class="panel-input"></td>
                            </tr>
                            <tr>
                                <td>B2</td>
                                <td><input type="text" data-type="B2" data-field="fabric" class="panel-input"></td>
                                <td><input type="text" data-type="B2" data-field="color" class="panel-input"></td>
                            </tr>
                            <tr>
                                <td>B3</td>
                                <td><input type="text" data-type="B3" data-field="fabric" class="panel-input"></td>
                                <td><input type="text" data-type="B3" data-field="color" class="panel-input"></td>
                            </tr>
                            <tr>
                                <td>B4</td>
                                <td><input type="text" data-type="B4" data-field="fabric" class="panel-input"></td>
                                <td><input type="text" data-type="B4" data-field="color" class="panel-input"></td>
                            </tr>
                            <tr>
                                <td>B5</td>
                                <td><input type="text" data-type="B5" data-field="fabric" class="panel-input"></td>
                                <td><input type="text" data-type="B5" data-field="color" class="panel-input"></td>
                            </tr>
                            <tr>
                                <td>SN</td>
                                <td><input type="text" data-type="SN" data-field="fabric" class="panel-input"></td>
                                <td><input type="text" data-type="SN" data-field="color" class="panel-input"></td>
                            </tr>
                            <tr>
                                <td>LF</td>
                                <td><input type="text" data-type="LF" data-field="fabric" class="panel-input" disabled></td>
                                <td><input type="text" data-type="LF" data-field="color" class="panel-input" disabled></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div id="k3-content" class="tab-content">
            <div class="feature-grid">
                <div class="feature-group">
                    <div class="feature-buttons">
                        <button id="btn-k3-edit" class="feature-button">Edit</button>
                    </div>
                </div>
                <div class="feature-group">
                    <div class="feature-buttons">
                        <button id="btn-batch-cycle-over" class="feature-button">Over</button>
                        <button id="btn-batch-cycle-oi" class="feature-button">O/I</button>
                        <button id="btn-batch-cycle-lr" class="feature-button">L/R</button>
                    </div>
                </div>
            </div>
        </div>
        <div id="k4-content" class="tab-content">
            <div class="feature-grid k5-grid">
                <div class="feature-group">
                    <div class="feature-buttons">
                        <button id="btn-k5-winder" class="feature-button">Winder</button>
                        <button id="btn-k5-motor" class="feature-button">Motor</button>
                        <button id="btn-k5-remote" class="feature-button">Remote</button>
                        <button id="btn-k5-charger" class="feature-button">Charger</button>
                        <button id="btn-k5-3m-cord" class="feature-button">3MCord</button>
                    </div>
                </div>
                <div class="feature-group k5-display-row">
                    <input type="text" id="k5-display-winder" class="panel-input k5-display-box" placeholder="HD Total..." readonly>
                    <input type="text" id="k5-display-motor" class="panel-input k5-display-box" placeholder="Motor Total..." readonly>
                    <input type="text" id="k5-display-remote" class="panel-input k5-display-box" placeholder="Remote Total..." readonly>
                    <input type="text" id="k5-display-charger" class="panel-input k5-display-box" placeholder="Charger Total..." readonly>
                    <input type="text" id="k5-display-cord" class="panel-input k5-display-box" placeholder="Cord Total..." readonly>
                </div>
                <div class="feature-group k5-combined-row">
                    <span class="k5-total-label">Total</span>
                    <input type="text" id="k5-display-total" class="panel-input k5-total-display" readonly>
                    <div class="k5-counter-group" id="k5-counter-remote">
                        <button id="btn-k5-remote-add" class="k5-counter-btn" disabled>+</button>
                        <input type="text" id="k5-display-remote-count" class="panel-input k5-counter-display" value="0" readonly>
                        <button id="btn-k5-remote-subtract" class="k5-counter-btn" disabled>-</button>
                    </div>
                    <div class="k5-counter-group" id="k5-counter-charger">
                        <button id="btn-k5-charger-add" class="k5-counter-btn" disabled>+</button>
                        <input type="text" id="k5-display-charger-count" class="panel-input k5-counter-display" value="0" readonly>
                        <button id="btn-k5-charger-subtract" class="k5-counter-btn" disabled>-</button>
                    </div>
                    <div class="k5-counter-group" id="k5-counter-cord">
                        <button id="btn-k5-cord-add" class="k5-counter-btn" disabled>+</button>
                        <input type="text" id="k5-display-cord-count" class="panel-input k5-counter-display" value="0" readonly>
                        <button id="btn-k5-cord-subtract" class="k5-counter-btn" disabled>-</button>
                    </div>
                </div>
            </div>
        </div>
        <div id="k5-content" class="tab-content">
            <div class="k5-grid-layout">
                <div class="k5-grid-row">
                    <div class="k5-grid-group">
                        <div class="k5-grid-cell-a">
                            <button id="btn-k4-dual" class="feature-button">Dual</button>
                        </div>
                        <div class="k5-grid-cell-b">
                            <div id="k4-dual-price-display" class="k4-price-box">
                                <span class="price-value"></span>
                            </div>
                        </div>
                    </div>
                    <div class="k5-grid-group">
                        <div class="k5-grid-cell-c">
                            <button id="btn-k4-chain" class="feature-button">Chain</button>
                        </div>
                        <div class="k5-grid-cell-d">
                            <input type="text" id="k4-input-display" class="panel-input k4-display-box" placeholder="Chain length..." disabled>
                        </div>
                    </div>
                </div>
                <div class="k5-grid-row">
                    <div class="k5-grid-group">
                        <div class="k5-grid-cell-label">Winder</div>
                        <div class="k5-grid-cell-display">
                            <input type="text" id="k5-display-winder-summary" class="panel-input k5-summary-display-box" readonly>
                        </div>
                    </div>
                    <div class="k5-grid-group">
                        <div class="k5-grid-cell-label">Motor</div>
                        <div class="k5-grid-cell-display">
                            <input type="text" id="k5-display-motor-summary" class="panel-input k5-summary-display-box" readonly>
                        </div>
                    </div>
                </div>
                <div class="k5-grid-row">
                    <div class="k5-grid-group">
                        <div class="k5-grid-cell-label">Remote</div>
                        <div class="k5-grid-cell-display">
                            <input type="text" id="k5-display-remote-summary" class="panel-input k5-summary-display-box" readonly>
                        </div>
                    </div>
                    <div class="k5-grid-group">
                        <div class="k5-grid-cell-label">Charger</div>
                        <div class="k5-grid-cell-display">
                            <input type="text" id="k5-display-charger-summary" class="panel-input k5-summary-display-box" readonly>
                        </div>
                    </div>
                </div>
                <div class="k5-grid-row">
                    <div class="k5-grid-group">
                        <div class="k5-grid-cell-label">3MCord</div>
                        <div class="k5-grid-cell-display">
                            <input type="text" id="k5-display-cord-summary" class="panel-input k5-summary-display-box" readonly>
                        </div>
                    </div>
                    <div class="k5-grid-group k5-grid-group-total">
                        <div class="k5-grid-cell-label">Total</div>
                        <div class="k5-grid-cell-display">
                            <input type="text" id="k5-display-accessories-total" class="panel-input k5-summary-display-box k5-summary-total-box" readonly>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="left-panel-toggle" title="Toggle Left Panel">
    <svg class="toggle-arrow arrow-right" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5" />
    </svg>
    <svg class="toggle-arrow arrow-left" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5 8.25 12l7.5-7.5" />
    </svg>
</div>
--- FILE END ---

--- FILE START: 04-core-code/ui/partials/quote-template-final.html ---
<!DOCTYPE html>
<html lang="zh-Hant">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{documentTitle}}</title>
    <style>
        /* --- ??? --- */
        :root {
            --primary-color: #1a237e;
            /* ? */
            --border-color: #e0e0e0;
            /*  */
            --text-color: #333;
            --success-color: #2e7d32;
            /* ????*/
            --icon-color: #888888;
        }

        body {
            font-family: 'Helvetica Neue', Arial, 'Heiti TC', 'Microsoft JhengHei', sans-serif;
            background-color: #f0f2f5;
            margin: 0;
            padding: 20px;
            color: var(--text-color);
        }

        .quotation-container {
            max-width: 900px;
            margin: auto;
            background-color: #ffffff;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            padding: 20px;
        }

        .quotation-inner-wrapper {
            border: 2px solid #a0d3e8;
            padding: 40px;
            border-radius: 8px;
        }

        /* --- ?? Header --- */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            padding-bottom: 20px;
            border-bottom: 3px solid var(--primary-color);
            margin-bottom: 30px;
        }

        /* ?? */
        .company-details {
            text-align: right;
        }

        .company-details h1 {
            margin: 0;
            color: var(--primary-color);
            font-size: 28px;
        }

        .company-details p {
            margin: 5px 0 0;
            font-size: 14px;
            color: #555;
            display: flex;
            align-items: center;
            justify-content: flex-end;
        }

        /* ??? */
        .quotation-meta {
            text-align: left;
        }

        .quotation-meta h2 {
            margin: 0 0 20px 0;
            font-size: 24px;
            color: #B22222;
            /* Brick Red ???*/
        }

        .quotation-meta p {
            margin: 4px 0 0;
            font-size: 14px;
        }

        .icon {
            color: var(--icon-color);
            margin-right: 8px;
            font-size: 16px;
            width: 20px;
            text-align: center;
            order: -1;
            margin-left: 0;
            margin-right: 8px;
        }
        
        .company-details .icon {
            order: 1;
            margin-right: 0;
            margin-left: 8px;
        }

        .company-details .abn-line {
            padding-right: 28px;
        }

        /* --- ? --- */
        .customer-info {
            margin-bottom: 40px;
        }

        .customer-info p {
            margin: 4px 0;
            line-height: 1.6;
        }

        /* --- ?? --- */
        .items-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 30px;
            border: 1px solid #333; /* [MODIFIED] Add base border for compatibility */
        }

        .items-table thead {
            background-color: var(--primary-color);
            color: #ffffff;
        }

        .items-table th,
        .items-table td {
            padding: 12px 15px;
            text-align: left;
            font-weight: 600;
            border: 1px solid #333; /* [MODIFIED] Ensure all cells have borders */
        }

        .items-table tbody tr {
            border-bottom: 1px solid var(--border-color);
        }

        .items-table td {
            vertical-align: top;
            font-weight: normal; /* [MODIFIED] Reset font-weight for td */
        }

        .items-table .description {
            font-weight: 500;
        }

        .items-table .details {
            font-size: 13px;
            color: #666;
        }

        .items-table .align-right {
            text-align: right;
        }

        .items-table .original-price {
            text-decoration: line-through;
            color: #999;
            font-size: 14px;
        }

        .items-table .discounted-price {
            font-weight: bold;
            color: #d32f2f;
        }

        .items-table .is-excluded {
            text-decoration: line-through;
            color: #999;
        }
        
        .table-scroll-wrapper {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }

        /* --- ? --- */
        .summary-section {
            display: flex;
            justify-content: flex-end;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            padding: 6px 20px 20px 20px;
            width: 100%; /* [MODIFIED] Set to 100% to fit inside table cell */
            box-sizing: border-box;
        }

        .summary-details {
            width: 100%;
            max-width: 400px;
        }

        .summary-details table {
            width: 100%;
        }

        .summary-details td {
            padding: 8px 0;
        }

        .summary-details .summary-label {
            text-align: right;
            padding-right: 20px;
            color: #555;
        }

        .summary-details .summary-value {
            text-align: right;
            font-weight: 500;
            padding-right: 10px;
        }

        .summary-details .grand-total td {
            font-size: 18px;
            font-weight: bold;
            color: var(--primary-color);
            border-top: 2px solid var(--primary-color);
            padding-top: 10px;
        }

        .summary-details .savings-value {
            color: var(--success-color);
            font-weight: bold;
        }

        /* --- [MODIFIED] Wrapper for Summary and Payment sections using TABLE layout --- */
        .summary-payment-wrapper {
            width: 100%;
            border-collapse: collapse;
        }

        .payment-info {
            width: 100%; /* [MODIFIED] Set to 100% to fit inside table cell */
            margin-top: 0;
            box-sizing: border-box;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            padding: 20px;
        }

        .payment-info h4 {
            margin-top: 0;
            color: var(--primary-color);
        }

        .payment-info p {
            margin: 4px 0;
            font-size: 14px;
        }
        
        .payment-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 1em;
        }
        .payment-table td {
            padding: 6px 0;
            border-bottom: 1px solid lightblue;
        }
        .payment-table tr:last-child td {
            border-bottom: none;
        }

        .payment-table tr:last-child {
            background-color: #f5f5f5;
        }
        .payment-table td:first-child {
            font-weight: bold;
            width: 80px;
            text-align: right;
            padding-right: 2px;
        }
        .payment-table td:nth-child(2) {
            text-align: left;
            padding-left: 4px;
            border-left: 1px solid var(--border-color);
        }
        
        .payment-info strong {
            display: inline-block;
            width: 80px;
        }

        .notes-terms-box {
            width: 100%;
            margin-top: 30px;
            padding: 20px;
            background-color: #f9f9f9;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            box-sizing: border-box;
        }

        .notes-terms-box h4 {
            margin-top: 0;
            color: var(--primary-color);
        }

        .notes-terms-box p {
            margin-bottom: 0;
            font-size: 14px;
            line-height: 1.6;
            white-space: normal;
            word-wrap: break-word;
        }
        
        .footer {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid var(--border-color);
            font-size: 12px;
            color: #888;
            text-align: center;
        }

        .terms {
            margin-top: 20px; 
        }


        @media (max-width: 768px) {
            .quotation-container {
                padding: 10px;
            }

            .quotation-inner-wrapper {
                padding: 20px;
            }

            .header {
                flex-direction: column;
                align-items: stretch;
            }

            .quotation-meta {
                order: 1;
            }

            .company-details {
                order: 2;
                margin-top: 20px;
            }

            .company-details,
            .quotation-meta {
                text-align: left;
            }

            .company-details p {
                justify-content: flex-start;
            }

            .company-details .abn-line {
                padding-right: 0;
            }

            .company-details .icon {
                order: -1;
                margin-left: 0;
                margin-right: 8px;
            }

            /* [NEW] Force table layout cells to stack on mobile */
            .summary-payment-wrapper .layout-cell {
                display: block;
                width: 100%;
                box-sizing: border-box;
                padding: 0 !important; /* Reset padding */
            }
            .summary-payment-wrapper .layout-cell:first-child {
                margin-bottom: 20px; /* Add space between stacked elements */
            }

            .payment-info,
            .summary-section {
                width: 100%;
                box-sizing: border-box;
            }

            .notes-terms-box {
                width: 100%;
            }

            .table-scroll-wrapper {
                overflow-x: auto;
            }

            .items-table {
                border: none;
                display: block;
                table-layout: auto;
            }
            .items-table thead {
                border: none;
                clip: rect(0 0 0 0);
                height: 1px;
                margin: -1px;
                overflow: hidden;
                padding: 0;
                position: absolute;
                width: 1px;
            }
            .items-table tr {
                display: block;
                margin-bottom: 15px;
                border: 1px solid var(--border-color);
                border-radius: 5px;
                padding: 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.05);
                min-width: 280px;
            }
            .items-table td {
                display: flex;
                justify-content: space-between;
                padding: 10px 15px;
                border: none;
                border-bottom: 1px solid var(--border-color);
                text-align: right;
            }
            .items-table tr td:last-child {
                border-bottom: none;
            }
            .items-table td:before {
                content: attr(data-label);
                font-weight: 600;
                text-align: left;
                padding-right: 15px;
                color: #333;
                flex-shrink: 0; 
            }
            .items-table td:first-of-type {
                background-color: var(--primary-color);
                color: white;
                font-weight: bold;
                border-radius: 4px 4px 0 0;
            }
            .items-table td:first-of-type::before {
                color: white;
            }
        }
    </style>
</head>

<body>
    <div class="quotation-container">
        <div class="quotation-inner-wrapper">

            <header class="header">
                <div class="quotation-meta">
                    <h2>QUOTATION</h2>
                    <p><strong>Quote No:</strong> {{quoteId}}</p>
                    <p><strong>Issue Date:</strong> {{issueDate}}</p>
                    <p><strong>Due Date:</strong> {{dueDate}}</p>
                </div>
                <div class="company-details">
                    <h1>EZ Blinds & Shutters</h1>
                    <p class="abn-line">ABN: 52 62 74 20 777</p>
                    <p>U11 / 271 Wells Rd, Chelsea Heights<span class="icon">??</span></p>
                    <p>
                        <span>0466 965 168<span class="icon">??</span></span>
                        <span style="margin: 0 10px;">|</span>
                        <span>ezblinds@ezbns.com.au<span class="icon">??</span></span>
                    </p>
                    <p>www.ezbns.com.au<span class="icon">??</span></p>
                </div>
            </header>

            <main>
                <section class="customer-info">
                    <p>{{{customerInfoHtml}}}</p>
                </section>

                <section class="items-section">
                    <div class="table-scroll-wrapper">
                        <table class="items-table" border="1" cellpadding="0" cellspacing="0">
                            <colgroup>
                                <col style="width: 8%;">
                                <col style="width: 42%;">
                                <col style="width: 15%;">
                                <col style="width: 17.5%;">
                                <col style="width: 17.5%;">
                            </colgroup>
                            <thead>
                                <tr>
                                    <th>NO</th>
                                    <th>Description</th>
                                    <th class="align-right">QTY</th>
                                    <th class="align-right">Price</th>
                                    <th class="align-right">Discounted Price</th>
                                </tr>
                            </thead>
                            <tbody>
                                {{{itemsTableBody}}}
                            </tbody>
                        </table>
                    </div>
                </section>

                <table class="summary-payment-wrapper" border="0" cellpadding="0" cellspacing="0" width="100%">
                    <tbody>
                        <tr>
                            <td class="layout-cell" width="50%" style="padding-right: 10px; vertical-align: top;">
                                <section class="payment-info">
                                    <h4>Payment Method</h4>
                                    <table class="payment-table">
                                        <tbody>
                                            <tr>
                                                <td>Bank</td>
                                                <td>CBA</td>
                                            </tr>
                                            <tr>
                                                <td>BSB</td>
                                                <td>0 6 2 &nbsp;&nbsp; 6 9 2</td>
                                            </tr>
                                            <tr>
                                                <td>Account</td>
                                                <td>4 5 7 0 &nbsp;&nbsp; 8 8 7 7</td>
                                            </tr>
                                            <tr>
                                                <td>Name</td>
                                                <td>Alphalead &nbsp;Pty &nbsp;Ltd</td>
                                            </tr>
                                            <tr>
                                                <td>PayID</td>
                                                <td>6 2 7 &nbsp;&nbsp; 4 2 0 &nbsp;&nbsp; 7 7 7</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                    <p style="font-size: 12px; margin-top: 10px;"><em>Please leave your Ph. number as Ref. in the
                                            transaction.</em></p>
                                </section>
                            </td>
                            <td class="layout-cell" width="50%" style="padding-left: 10px; vertical-align: top;">
                                <section class="summary-section">
                                    <div class="summary-details">
                                        <table>
                                            <tbody>
                                                <tr>
                                                    <td class="summary-label">Subtotal</td>
                                                    <td class="summary-value">{{subtotal}}</td>
                                                </tr>
                                                <tr>
                                                    <td class="summary-label">GST (10%)</td>
                                                    <td class="summary-value">{{gst}}</td>
                                                </tr>
                                                <tr class="grand-total">
                                                    <td class="summary-label">Our Offer</td>
                                                    <td class="summary-value">{{grandTotal}}</td>
                                                </tr>
                                                <tr>
                                                    <td class="summary-label">Deposit (50%)</td>
                                                    <td class="summary-value">{{deposit}}</td>
                                                </tr>
                                                <tr>
                                                    <td class="summary-label"><strong>Balance</strong></td>
                                                    <td class="summary-value"><strong>{{balance}}</strong></td>
                                                </tr>
                                                <tr>
                                                    <td class="summary-label">You Saved</td>
                                                    <td class="summary-value savings-value">{{savings}}</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </section>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <section class="notes-terms-box">
                    <h4>General Notes</h4>
                    <p>{{{generalNotes}}}</p>
                </section>

                <section class="terms notes-terms-box">
                    <h4>Terms & Conditions</h4>
                    {{{termsAndConditions}}}
                </section>

            </main>

            <footer class="footer">
                <p>Thank you for your business!</p>
                <p><strong>EZ Blinds & Shutters</strong></p>
            </footer>

        </div>
    </div>
</body>

</html>
--- FILE END ---

--- FILE START: 04-core-code/ui/partials/right-panel.html ---
<div id="function-panel-toggle" title="Toggle Function Panel">
    <svg class="toggle-arrow arrow-left" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
        stroke-width="1.5" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5 8.25 12l7.5-7.5" />
    </svg>
    <svg class="toggle-arrow arrow-right" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
        stroke-width="1.5" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5" />
    </svg>
</div>

<div class="tab-container">
    <button id="f1-tab" class="tab-button active" data-tab-target="#f1-content">F1</button>
    <button id="f2-tab" class="tab-button" data-tab-target="#f2-content">F2</button>
    <button id="f3-tab" class="tab-button" data-tab-target="#f3-content">F3</button>
    <button id="f4-tab" class="tab-button" data-tab-target="#f4-content">F4</button>
</div>

<div class="tab-content-container">
    <div id="f1-content" class="tab-content active">
        <div class="f1-grid">
            <div class="component-cost-group">
                <div class="grid-cell grid-span-2">Component Cost</div>
                <div class="grid-cell price-box bg-light-purple" id="f1-price-total"></div>

                <div class="grid-cell font-bold">Item</div>
                <div class="grid-cell font-bold" style="justify-content: center;">Qty</div>
                <div class="grid-cell font-bold" style="justify-content: center;">$</div>

                <div class="grid-cell">HD Winder</div>
                <div class="grid-cell qty-box" id="f1-qty-winder"></div>
                <div class="grid-cell price-box bg-bright-green" id="f1-price-winder"></div>

                <div class="group-row group-row-dual">
                    <div class="grid-cell">Dual Combo</div>
                    <div class="grid-cell qty-box" id="f1-qty-dual-combo"></div>
                    <div class="grid-cell price-box bg-bright-green" id="f1-price-dual-combo"></div>
                </div>
                <div class="group-row group-row-dual">
                    <div class="grid-cell">Dual Slim</div>
                    <div class="grid-cell qty-box" id="f1-qty-slim"></div>
                    <div class="grid-cell price-box bg-bright-green" id="f1-price-slim"></div>
                </div>

                <div class="grid-cell">Motor</div>
                <div class="grid-cell qty-box" id="f1-qty-motor"></div>
                <div class="grid-cell price-box bg-bright-green" id="f1-price-motor"></div>

                <div class="group-row group-row-remote">
                    <div class="grid-cell">Remote 1 Ch</div>
                    <div class="grid-cell qty-box" id="f1-qty-remote-1ch"></div>
                    <div class="grid-cell price-box bg-bright-green" id="f1-price-remote-1ch"></div>
                </div>
                <div class="group-row group-row-remote">
                    <div class="grid-cell">Remote 16 Ch</div>
                    <div class="grid-cell qty-box" id="f1-qty-remote-16ch"></div>
                    <div class="grid-cell price-box bg-bright-green" id="f1-price-remote-16ch"></div>
                </div>

                <div class="grid-cell">Charger</div>
                <div class="grid-cell qty-box" id="f1-qty-charger"></div>
                <div class="grid-cell price-box bg-bright-green" id="f1-price-charger"></div>

                <div class="grid-cell">3M cord</div>
                <div class="grid-cell qty-box" id="f1-qty-3m-cord"></div>
                <div class="grid-cell price-box bg-bright-green" id="f1-price-3m-cord"></div>
            </div>

            <div class="rb-pricing-group">
                <div class="grid-cell">RB Pricing</div>
                <div class="grid-cell font-bold text-right">Retail</div>
                <div class="grid-cell price-box bg-bright-green" id="f1-rb-retail"></div>

                <div class="grid-cell">Discnt %</div>
                <div class="grid-cell">
                    <input type="number" class="input-box" id="f1-rb-discount-input" placeholder="%">
                </div>
                <div class="grid-cell price-box bg-light-purple" id="f1-rb-price"></div>
            </div>

            <div class="final-summary-group">
                <div class="grid-cell">Final Summary</div>
                <div class="grid-cell font-bold text-right">Sub Total</div>
                <div class="grid-cell price-box bg-light-purple" id="f1-sub-total"></div>

                <div class="grid-cell grid-col-start-2 font-bold text-right">GST</div>
                <div class="grid-cell price-box bg-bright-green" id="f1-gst"></div>

                <div class="grid-cell grid-col-start-2 text-right font-bold">Total</div>
                <div class="grid-cell price-box bg-pink" id="f1-final-total"></div>
            </div>
        </div>
    </div>
    <div id="f2-content" class="tab-content">
        <div class="f2-summary-grid">
            <div class="section-header">Accessories</div>
            <div class="grid-cell-value section-header-total" id="f2-b4-acce-sum">$0</div>

            <div class="grid-cell-label">Winder</div>
            <div class="grid-cell-value" id="f2-b2-winder-price">$0</div>
            <div></div>

            <div class="grid-cell-label">Dual</div>
            <div class="grid-cell-value" id="f2-b3-dual-price">$0</div>
            <div></div>

            <div class="section-header">E RB</div>
            <div class="grid-cell-value section-header-total" id="f2-b11-e-acce-sum">$0</div>

            <div class="grid-cell-label">Motor</div>
            <div class="grid-cell-value" id="f2-b6-motor-price">$0</div>
            <div></div>

            <div class="grid-cell-label">Remote</div>
            <div class="grid-cell-value" id="f2-b7-remote-price">$0</div>
            <div></div>

            <div class="grid-cell-label">Charger</div>
            <div class="grid-cell-value" id="f2-b8-charger-price">$0</div>
            <div></div>

            <div class="grid-cell-label">Ext Cord</div>
            <div class="grid-cell-value" id="f2-b9-cord-price">$0</div>
            <div></div>

            <div class="grid-cell-label">WIFI $200</div>
            <input type="number" class="grid-cell-input" id="f2-b10-wifi-qty" placeholder="QTY">
            <div class="grid-cell-value" id="f2-c10-wifi-sum">$0</div>

            <div class="section-header">Fee</div>
            <div class="grid-cell-value section-header-total" id="f2-b16-surcharge-fee">$0</div>

            <div class="grid-cell-label">Delivery</div>
            <input type="number" class="grid-cell-input" id="f2-b13-delivery-qty" placeholder="QTY">
            <div class="grid-cell-value" id="f2-c13-delivery-fee">$0</div>

            <div class="grid-cell-label">Install</div>
            <input type="number" class="grid-cell-input" id="f2-b14-install-qty" placeholder="QTY">
            <div class="grid-cell-value" id="f2-c14-install-fee">$0</div>

            <div class="grid-cell-label">Removal</div>
            <input type="number" class="grid-cell-input" id="f2-b15-removal-qty" placeholder="QTY">
            <div class="grid-cell-value" id="f2-c15-removal-fee">$0</div>

            <div class="section-header" style="grid-column: 1 / -1;">Roller Summary</div>

            <div class="grid-cell-value" id="f2-a17-total-sum"></div>
            <input type="number" class="grid-cell-input" id="f2-b17-mul-times" placeholder="mul-times" step="0.01">
            <div class="grid-cell-value" id="f2-c17-1st-rb-price"></div>

            <div class="grid-cell-label">Disc. %</div>
            <input type="number" class="grid-cell-input" id="f2-b18-discount" placeholder="discount" min="0" max="99">
            <div></div>

            <div class="grid-cell-label">RB Price</div>
            <div class="grid-cell-value" id="f2-b19-dis-rb-price"></div>
            <div></div>

            <div class="grid-cell-label">S profit</div>
            <div class="grid-cell-value" id="f2-b20-singleprofit"></div>
            <div></div>

            <div class="grid-cell-label">RB Profit</div>
            <div class="grid-cell-value" id="f2-b21-rb-profit"></div>
            <div></div>

            <div class="section-header">Selling Price</div>
            <div class="grid-cell-value section-header-total" id="f2-b22-sumprice"></div>

            <div class="grid-cell-label">Sum Profit</div>
            <div class="grid-cell-value" id="f2-b23-sumprofit"></div>
            <div class="grid-cell-label">GST Excl.</div>

            <div class="grid-cell-label">GST incl.</div>
            <div class="grid-cell-value" id="f2-b24-gst"></div>
            <div></div>

            <div class="grid-cell-label">Gross profit</div>
            <div class="grid-cell-value" id="f2-b25-netprofit"></div>
            <div></div>
        </div>
    </div>
    <div id="f3-content" class="tab-content">
        <div class="f3-container">
            <div class="section-header grid-span-4">Quote Details</div>

            <div class="grid-cell">Quote ID</div>
            <div class="grid-cell grid-span-2">
                <input type="text" id="f3-quote-id" class="input-field">
            </div>
            <div></div>
            <div class="grid-cell">Issue Date</div>
            <div class="grid-cell grid-span-2">
                <input type="date" id="f3-issue-date" class="input-field">
            </div>
            <div></div>
            <div class="grid-cell">Due Date</div>
            <div class="grid-cell grid-span-2">
                <input type="date" id="f3-due-date" class="input-field">
            </div>
            <div></div>
            <div class="section-header grid-span-4">Customer Info</div>

            <div class="grid-cell">Customer Name</div>
            <div class="grid-cell grid-span-2">
                <input type="text" id="f3-customer-name" class="input-field">
            </div>
            <div></div>
            <div class="grid-cell">Address</div>
            <div class="grid-cell grid-span-2">
                <textarea id="f3-customer-address" class="textarea-field" rows="3"></textarea>
            </div>
            <div></div>
            <div class="grid-cell">Phone</div>
            <div class="grid-cell grid-span-2">
                <input type="tel" id="f3-customer-phone" class="input-field">
            </div>
            <div></div>
            <div class="grid-cell">Email</div>
            <div class="grid-cell grid-span-2">
                <input type="email" id="f3-customer-email" class="input-field">
            </div>
            <div></div>
            <div class="section-header grid-span-4">Final Price Adjustment</div>

            <div class="grid-cell">Final Offer Price</div>
            <div class="grid-cell grid-span-2">
                <input type="number" id="f3-final-offer-price" class="input-field"
                    placeholder="Overrides calculated total">
            </div>
            <div></div>
            <div class="section-header grid-span-4">Notes & Terms</div>

            <div class="grid-cell">General Notes</div>
            <div class="grid-cell grid-span-2">
                <textarea id="f3-general-notes" class="textarea-field" rows="4"></textarea>
            </div>
            <div></div>
            <div class="grid-cell">Terms & Conditions</div>
            <div class="grid-cell grid-span-2">
                <textarea id="f3-terms-conditions" class="textarea-field" rows="4"></textarea>
            </div>
            <div></div>
            <div class="section-header grid-span-4">Action</div>

            <div></div>
            <div class="grid-cell">
                <button id="btn-add-quote" class="action-button">Add Quote</button>
            </div>
            <div class="grid-span-2"></div>
        </div>
    </div>
    <div id="f4-content" class="tab-content">
        <div class="f4-grid">
            <button id="f1-key-save" class="f4-button">Save</button>
            <button id="f1-key-export" class="f4-button">Export</button>
            <button id="f1-key-load" class="f4-button">Load</button>
            <button id="f1-key-reset" class="f4-button">Reset</button>
        </div>
    </div>
</div>
--- FILE END ---

--- FILE START: 04-core-code/ui/views/detail-config-view.js ---
// File: 04-core-code/ui/views/detail-config-view.js

/**
 * @fileoverview A "Manager" view that delegates logic to specific sub-views for each tab.
 */

export class DetailConfigView {
    constructor({
        stateService,
        eventAggregator,
        // Sub-views are injected here
        k1LocationView,
        k2FabricView,
        k3OptionsView,
        driveAccessoriesView,
        dualChainView
    }) {
        this.stateService = stateService;
        this.eventAggregator = eventAggregator;

        // Store instances of sub-views
        this.k1View = k1LocationView;
        this.k2View = k2FabricView;
        this.k3View = k3OptionsView;
        this.driveAccessoriesView = driveAccessoriesView;
        this.dualChainView = dualChainView;

        console.log("DetailConfigView Refactored as a Manager View.");
    }

    activateTab(tabId) {
        this.stateService.dispatch({ type: 'ui/setActiveTab', payload: { tabId } });

        switch (tabId) {
            case 'k1-tab':
                this.k1View.activate();
                break;
            case 'k2-tab':
                this.k2View.activate();
                break;
            case 'k3-tab':
                this.k3View.activate();
                break;
            case 'k4-tab':
                this.driveAccessoriesView.activate();
                break;
            case 'k5-tab':
                this.dualChainView.activate();
                break;
            default:
                break;
        }
    }

    // --- Event Handlers that delegate to sub-views ---

    handleFocusModeRequest({ column }) {
        if (column === 'location') {
            this.k1View.handleFocusModeRequest();
            return;
        }
        if (column === 'fabric') {
            this.k2View.handleFocusModeRequest();
            return;
        }
    }

    handleLocationInputEnter({ value }) {
        this.k1View.handleLocationInputEnter({ value });
    }

    handlePanelInputBlur({ type, field, value }) {
        this.k2View.handlePanelInputBlur({ type, field, value });
    }

    handlePanelInputEnter() {
        this.k2View.handlePanelInputEnter();
    }

    handleSequenceCellClick({ rowIndex }) {
        const { ui } = this.stateService.getState();
        const { activeEditMode } = ui;
        if (activeEditMode === 'K2_LF_SELECT' || activeEditMode === 'K2_LF_DELETE_SELECT') {
            this.k2View.handleSequenceCellClick({ rowIndex });
        }
    }

    handleLFEditRequest() {
        this.k2View.handleLFEditRequest();
    }

    handleLFDeleteRequest() {
        this.k2View.handleLFDeleteRequest();
    }

    handleToggleK3EditMode() {
        this.k3View.handleToggleK3EditMode();
    }

    handleBatchCycle({ column }) {
        this.k3View.handleBatchCycle({ column });
    }

    handleDualChainModeChange({ mode }) {
        this.dualChainView.handleModeChange({ mode });
    }

    handleChainEnterPressed({ value }) {
        this.dualChainView.handleChainEnterPressed({ value });
    }

    handleDriveModeChange({ mode }) {
        this.driveAccessoriesView.handleModeChange({ mode });
    }

    handleAccessoryCounterChange({ accessory, direction }) {
        this.driveAccessoriesView.handleCounterChange({ accessory, direction });
    }

    handleTableCellClick({ rowIndex, column }) {
        const { ui } = this.stateService.getState();
        const { activeEditMode, dualChainMode, driveAccessoryMode } = ui;

        if (driveAccessoryMode) {
            this.driveAccessoriesView.handleTableCellClick({ rowIndex, column });
            return;
        }

        if (activeEditMode === 'K1') {
            this.k1View.handleTableCellClick({ rowIndex });
            return;
        }

        if (activeEditMode === 'K3') {
            this.k3View.handleTableCellClick({ rowIndex, column });
            return;
        }

        if (dualChainMode) {
            this.dualChainView.handleTableCellClick({ rowIndex, column });
            return;
        }
    }
}
--- FILE END ---

--- FILE START: 04-core-code/ui/views/drive-accessories-view.js ---
// File: 04-core-code/ui/views/drive-accessories-view.js

import { EVENTS } from '../../config/constants.js';
import * as uiActions from '../../actions/ui-actions.js';
import * as quoteActions from '../../actions/quote-actions.js';

/**
 * @fileoverview A dedicated sub-view for handling all logic related to the Drive/Accessories tab.
 */
export class DriveAccessoriesView {
    constructor({ stateService, calculationService, eventAggregator }) {
        this.stateService = stateService;
        this.calculationService = calculationService;
        this.eventAggregator = eventAggregator;
        console.log("DriveAccessoriesView Initialized.");
    }

    _getState() {
        return this.stateService.getState();
    }

    _getItems() {
        const { quoteData } = this._getState();
        return quoteData.products[quoteData.currentProduct].items;
    }

    _getCurrentProductType() {
        const { quoteData } = this._getState();
        return quoteData.currentProduct;
    }

    activate() {
        this.stateService.dispatch(uiActions.setVisibleColumns(['sequence', 'fabricTypeDisplay', 'location', 'winder', 'motor']));
    }

    handleModeChange({ mode }) {
        const { ui } = this._getState();
        const currentMode = ui.driveAccessoryMode;
        const newMode = currentMode === mode ? null : mode;

        if (currentMode) {
            this.recalculateAllDriveAccessoryPrices();
        }

        this.stateService.dispatch(uiActions.setDriveAccessoryMode(newMode));

        if (newMode) {
            if (newMode === 'remote' || newMode === 'charger') {
                const items = this._getItems();
                const hasMotor = items.some(item => !!item.motor);
                const currentCount = newMode === 'remote' ? ui.driveRemoteCount : ui.driveChargerCount;

                if (hasMotor && (currentCount === 0 || currentCount === null)) {
                    this.stateService.dispatch(uiActions.setDriveAccessoryCount(newMode, 1));
                }
            }

            const message = this._getHintMessage(newMode);
            this.eventAggregator.publish(EVENTS.SHOW_NOTIFICATION, { message });
        }
    }

    handleTableCellClick({ rowIndex, column }) {
        const { ui } = this._getState();
        const { driveAccessoryMode } = ui;
        if (!driveAccessoryMode || (column !== 'winder' && column !== 'motor')) return;

        const item = this._getItems()[rowIndex];
        if (!item) return;

        const isActivatingWinder = driveAccessoryMode === 'winder' && column === 'winder';
        const isActivatingMotor = driveAccessoryMode === 'motor' && column === 'motor';

        if (isActivatingWinder) {
            if (item.motor) {
                this.eventAggregator.publish(EVENTS.SHOW_CONFIRMATION_DIALOG, {
                    message: 'This blind is set to Motor. Are you sure you want to change it to HD Winder?',
                    layout: [
                        [
                            { type: 'button', text: 'Confirm', callback: () => this._toggleWinder(rowIndex, true) },
                            { type: 'button', text: 'Cancel', className: 'secondary', callback: () => { } }
                        ]
                    ]
                });
            } else {
                this._toggleWinder(rowIndex, false);
            }
        } else if (isActivatingMotor) {
            if (item.winder) {
                this.eventAggregator.publish(EVENTS.SHOW_CONFIRMATION_DIALOG, {
                    message: 'This blind is set to HD Winder. Are you sure you want to change it to Motor?',
                    layout: [
                        [
                            { type: 'button', text: 'Confirm', callback: () => this._toggleMotor(rowIndex, true) },
                            { type: 'button', text: 'Cancel', className: 'secondary', callback: () => { } }
                        ]
                    ]
                });
            } else {
                this._toggleMotor(rowIndex, false);
            }
        }
    }

    handleCounterChange({ accessory, direction }) {
        const { ui } = this._getState();
        const counts = {
            remote: ui.driveRemoteCount,
            charger: ui.driveChargerCount,
            cord: ui.driveCordCount
        };
        let currentCount = counts[accessory];
        const newCount = direction === 'add' ? currentCount + 1 : Math.max(0, currentCount - 1);

        if (newCount === 0) {
            const items = this._getItems();
            const hasMotor = items.some(item => !!item.motor);
            if (hasMotor && (accessory === 'remote' || accessory === 'charger')) {
                const accessoryName = accessory === 'remote' ? 'Remote' : 'Charger';
                this.eventAggregator.publish(EVENTS.SHOW_CONFIRMATION_DIALOG, {
                    message: `Motors are present in the quote. Are you sure you want to set the ${accessoryName} quantity to 0?`,
                    layout: [
                        [
                            {
                                type: 'button', text: 'Confirm', callback: () => {
                                    this.stateService.dispatch(uiActions.setDriveAccessoryCount(accessory, 0));
                                }
                            },
                            { type: 'button', text: 'Cancel', className: 'secondary', callback: () => { } }
                        ]
                    ]
                });
                return;
            }
        }

        this.stateService.dispatch(uiActions.setDriveAccessoryCount(accessory, newCount));
    }

    _toggleWinder(rowIndex) {
        const item = this._getItems()[rowIndex];
        const newValue = item.winder ? '' : 'HD';
        this.stateService.dispatch(quoteActions.updateWinderMotorProperty(rowIndex, 'winder', newValue));
    }

    _toggleMotor(rowIndex) {
        const item = this._getItems()[rowIndex];
        const newValue = item.motor ? '' : 'Motor';
        this.stateService.dispatch(quoteActions.updateWinderMotorProperty(rowIndex, 'motor', newValue));
    }

    recalculateAllDriveAccessoryPrices() {
        const items = this._getItems();
        const state = this._getState().ui;
        const productType = this._getCurrentProductType();
        const summaryData = {};
        let grandTotal = 0;

        const winderCount = items.filter(item => item.winder === 'HD').length;
        const winderPrice = this.calculationService.calculateAccessorySalePrice(productType, 'winder', { count: winderCount });
        this.stateService.dispatch(uiActions.setDriveAccessoryTotalPrice('winder', winderPrice));
        summaryData.winder = { count: winderCount, price: winderPrice };
        grandTotal += winderPrice;

        const motorCount = items.filter(item => !!item.motor).length;
        const motorPrice = this.calculationService.calculateAccessorySalePrice(productType, 'motor', { count: motorCount });
        this.stateService.dispatch(uiActions.setDriveAccessoryTotalPrice('motor', motorPrice));
        summaryData.motor = { count: motorCount, price: motorPrice };
        grandTotal += motorPrice;

        const remoteCount = state.driveRemoteCount;
        const remotePrice = this.calculationService.calculateAccessorySalePrice(productType, 'remote', {
            count: remoteCount
        });
        this.stateService.dispatch(uiActions.setDriveAccessoryTotalPrice('remote', remotePrice));
        summaryData.remote = { type: 'standard', count: remoteCount, price: remotePrice };
        grandTotal += remotePrice;

        const chargerCount = state.driveChargerCount;
        const chargerPrice = this.calculationService.calculateAccessorySalePrice(productType, 'charger', { count: chargerCount });
        this.stateService.dispatch(uiActions.setDriveAccessoryTotalPrice('charger', chargerPrice));
        summaryData.charger = { count: chargerCount, price: chargerPrice };
        grandTotal += chargerPrice;

        const cordCount = state.driveCordCount;
        const cordPrice = this.calculationService.calculateAccessorySalePrice(productType, 'cord', { count: cordCount });
        this.stateService.dispatch(uiActions.setDriveAccessoryTotalPrice('cord', cordPrice));
        summaryData.cord3m = { count: cordCount, price: cordPrice };
        grandTotal += cordPrice;

        this.stateService.dispatch(uiActions.setDriveGrandTotal(grandTotal));
        this.stateService.dispatch(quoteActions.updateAccessorySummary({
            winderCostSum: winderPrice,
            motorCostSum: motorPrice,
            remoteCostSum: remotePrice,
            chargerCostSum: chargerPrice,
            cordCostSum: cordPrice
        }));
    }

    _getHintMessage(mode) {
        const hints = {
            winder: 'Click a cell under the Winder column to set HD.',
            motor: 'Click a cell under the Motor column to set Motor.',
            remote: 'Click + or - to increase or decrease the quantity of remotes.',
            charger: 'Click + or - to increase or decrease the quantity of chargers.',
            cord: 'Click + or - to increase or decrease the quantity of extension cords.'
        };
        return hints[mode] || 'Please make your selection.';
    }
}
--- FILE END ---

--- FILE START: 04-core-code/ui/views/dual-chain-view.js ---
// File: 04-core-code/ui/views/dual-chain-view.js

import { EVENTS } from '../../config/constants.js';
import * as uiActions from '../../actions/ui-actions.js';
import * as quoteActions from '../../actions/quote-actions.js';

/**
 * @fileoverview A dedicated sub-view for handling all logic related to the Dual/Chain tab.
 */
export class DualChainView {
    constructor({ stateService, calculationService, eventAggregator }) {
        this.stateService = stateService;
        this.calculationService = calculationService;
        this.eventAggregator = eventAggregator;
        console.log("DualChainView Initialized.");
    }

    _getState() {
        return this.stateService.getState();
    }

    _getItems() {
        const { quoteData } = this._getState();
        return quoteData.products[quoteData.currentProduct].items;
    }

    _getCurrentProductType() {
        const { quoteData } = this._getState();
        return quoteData.currentProduct;
    }

    /**
     * Handles the toggling of modes (dual, chain).
     * Validation now ONLY runs when EXITING dual mode.
     */
    handleModeChange({ mode }) {
        const { ui } = this._getState();
        const currentMode = ui.dualChainMode;
        const newMode = currentMode === mode ? null : mode;

        if (currentMode === 'dual') {
            const isValid = this._validateDualSelection();
            if (!isValid) {
                return;
            }
        }

        this.stateService.dispatch(uiActions.setDualChainMode(newMode));

        if (newMode === 'dual') {
            this._calculateAndStoreDualPrice();
        }

        if (!newMode) {
            this.stateService.dispatch(uiActions.setTargetCell(null));
            this.stateService.dispatch(uiActions.clearDualChainInputValue());
        }
    }

    /**
     * [NEW] This method PURELY calculates the price and updates state. It contains NO validation logic.
     * This is the key to achieving real-time updates without premature warnings.
     */
    _calculateAndStoreDualPrice() {
        const items = this._getItems();
        const productType = this._getCurrentProductType();

        const price = this.calculationService.calculateAccessorySalePrice(productType, 'dual', { items });

        this.stateService.dispatch(quoteActions.updateAccessorySummary({ dualCostSum: price }));
        this.stateService.dispatch(uiActions.setDualPrice(price));

        this._updateSummaryAccessoriesTotal();
    }

    /**
     * [NEW] This method PURELY validates the selection. It does NOT calculate any price.
     * It is only called when the user tries to exit the dual mode.
     */
    _validateDualSelection() {
        const items = this._getItems();
        const selectedIndexes = items.reduce((acc, item, index) => {
            if (item.dual === 'D') {
                acc.push(index);
            }
            return acc;
        }, []);

        const dualCount = selectedIndexes.length;

        if (dualCount > 0 && dualCount % 2 !== 0) {
            this.eventAggregator.publish(EVENTS.SHOW_NOTIFICATION, {
                message: 'The total count of Dual Brackets (D) must be an even number. Please correct the selection.',
                type: 'error'
            });
            return false;
        }

        for (let i = 0; i < dualCount; i += 2) {
            if (selectedIndexes[i + 1] !== selectedIndexes[i] + 1) {
                this.eventAggregator.publish(EVENTS.SHOW_NOTIFICATION, {
                    message: 'Dual Brackets (D) must be set on adjacent items. Please check your selection.',
                    type: 'error'
                });
                return false;
            }
        }

        return true;
    }

    /**
     * Handles the Enter key press in the chain input box.
     */
    handleChainEnterPressed({ value }) {
        const { ui } = this._getState();
        const { targetCell: currentTarget } = ui;
        if (!currentTarget) return;

        const valueAsNumber = Number(value);
        if (value !== '' && (!Number.isInteger(valueAsNumber) || valueAsNumber <= 0)) {
            this.eventAggregator.publish(EVENTS.SHOW_NOTIFICATION, {
                message: 'Only positive integers are allowed.',
                type: 'error'
            });
            return;
        }

        const valueToSave = value === '' ? null : valueAsNumber;
        this.stateService.dispatch(quoteActions.updateItemProperty(currentTarget.rowIndex, currentTarget.column, valueToSave));

        this.stateService.dispatch(uiActions.setTargetCell(null));
        this.stateService.dispatch(uiActions.clearDualChainInputValue());
    }

    /**
     * Handles clicks on table cells when a mode is active.
     */
    handleTableCellClick({ rowIndex, column }) {
        const { ui } = this._getState();
        const { dualChainMode } = ui;
        const items = this._getItems();
        const item = items[rowIndex];
        if (!item) return;

        const isLastRow = rowIndex === items.length - 1;
        if (isLastRow) return;

        if (dualChainMode === 'dual' && column === 'dual') {
            const newValue = item.dual === 'D' ? '' : 'D';
            this.stateService.dispatch(quoteActions.updateItemProperty(rowIndex, 'dual', newValue));

            this._calculateAndStoreDualPrice();
        }

        if (dualChainMode === 'chain' && column === 'chain') {
            this.stateService.dispatch(uiActions.setTargetCell({ rowIndex, column: 'chain' }));

            setTimeout(() => {
                const inputBox = document.getElementById('k4-input-display');
                inputBox?.focus();
                inputBox?.select();
            }, 50);
        }
    }

    /**
     * [REVISED] This method is called by the main DetailConfigView when the K5 tab becomes active.
     * It now correctly synchronizes all accessory prices from the K4 state.
     */
    activate() {
        this.stateService.dispatch(uiActions.setVisibleColumns(['sequence', 'fabricTypeDisplay', 'location', 'dual', 'chain']));

        const { ui, quoteData } = this._getState();
        const currentProductData = quoteData.products[quoteData.currentProduct];
        this.stateService.dispatch(uiActions.setSummaryWinderPrice(ui.driveWinderTotalPrice));
        this.stateService.dispatch(uiActions.setSummaryMotorPrice(ui.driveMotorTotalPrice));
        this.stateService.dispatch(uiActions.setSummaryRemotePrice(ui.driveRemoteTotalPrice));
        this.stateService.dispatch(uiActions.setSummaryChargerPrice(ui.driveChargerTotalPrice));
        this.stateService.dispatch(uiActions.setSummaryCordPrice(ui.driveCordTotalPrice));
        this.stateService.dispatch(uiActions.setDualPrice(currentProductData.summary.accessories.dualCostSum));

        this._updateSummaryAccessoriesTotal();
    }

    /**
     * Calculates the total of all accessories displayed on the K5 summary tab.
     */
    _updateSummaryAccessoriesTotal() {
        const { ui } = this._getState();

        const dualPrice = ui.dualPrice || 0;
        const winderPrice = ui.summaryWinderPrice || 0;
        const motorPrice = ui.summaryMotorPrice || 0;
        const remotePrice = ui.summaryRemotePrice || 0;
        const chargerPrice = ui.summaryChargerPrice || 0;
        const cordPrice = ui.summaryCordPrice || 0;

        const total = dualPrice + winderPrice + motorPrice + remotePrice + chargerPrice + cordPrice;

        this.stateService.dispatch(uiActions.setSummaryAccessoriesTotal(total));
    }
}
--- FILE END ---

--- FILE START: 04-core-code/ui/views/f1-cost-view.js ---
// File: 04-core-code/ui/views/f1-cost-view.js

import { EVENTS, DOM_IDS } from '../../config/constants.js';
import * as uiActions from '../../actions/ui-actions.js';

/**
 * @fileoverview A dedicated sub-view for handling all logic related to the F1 (Cost) tab.
 */
export class F1CostView {
    constructor({ panelElement, eventAggregator, calculationService, stateService }) {
        this.panelElement = panelElement;
        this.eventAggregator = eventAggregator;
        this.calculationService = calculationService;
        this.stateService = stateService; // [NEW] Injected dependency

        this._cacheF1Elements();
        this._initializeF1Listeners();
        console.log("F1CostView Initialized.");
    }

    _cacheF1Elements() {
        const query = (id) => this.panelElement.querySelector(id);
        this.f1 = {
            inputs: {
                'discount': query(`#${DOM_IDS.F1_RB_DISCOUNT_INPUT}`),
            },
            displays: {
                qty: {
                    'winder': query(`#${DOM_IDS.F1_QTY_WINDER}`),
                    'motor': query(`#${DOM_IDS.F1_QTY_MOTOR}`),
                    'remote-1ch': query(`#${DOM_IDS.F1_QTY_REMOTE_1CH}`),
                    'remote-16ch': query(`#${DOM_IDS.F1_QTY_REMOTE_16CH}`),
                    'charger': query(`#${DOM_IDS.F1_QTY_CHARGER}`),
                    '3m-cord': query(`#${DOM_IDS.F1_QTY_3M_CORD}`),
                    'dual-combo': query(`#${DOM_IDS.F1_QTY_DUAL_COMBO}`),
                    'slim': query(`#${DOM_IDS.F1_QTY_SLIM}`),
                },
                price: {
                    'winder': query(`#${DOM_IDS.F1_PRICE_WINDER}`),
                    'motor': query(`#${DOM_IDS.F1_PRICE_MOTOR}`),
                    'remote-1ch': query(`#${DOM_IDS.F1_PRICE_REMOTE_1CH}`),
                    'remote-16ch': query(`#${DOM_IDS.F1_PRICE_REMOTE_16CH}`),
                    'charger': query(`#${DOM_IDS.F1_PRICE_CHARGER}`),
                    '3m-cord': query(`#${DOM_IDS.F1_PRICE_3M_CORD}`),
                    'dual-combo': query(`#${DOM_IDS.F1_PRICE_DUAL_COMBO}`),
                    'slim': query(`#${DOM_IDS.F1_PRICE_SLIM}`),
                    'total': query(`#${DOM_IDS.F1_PRICE_TOTAL}`),
                    'rb-retail': query(`#${DOM_IDS.F1_RB_RETAIL}`),
                    'rb-price': query(`#${DOM_IDS.F1_RB_PRICE}`),
                    'sub-total': query(`#${DOM_IDS.F1_SUB_TOTAL}`),
                    'gst': query(`#${DOM_IDS.F1_GST}`),
                    'final-total': query(`#${DOM_IDS.F1_FINAL_TOTAL}`),
                }
            }
        };
    }

    _initializeF1Listeners() {
        const remote1chQtyDiv = this.f1.displays.qty['remote-1ch'];
        if (remote1chQtyDiv) {
            // [REFACTORED] Directly call the handler instead of publishing an event
            remote1chQtyDiv.addEventListener('click', () => this.handleRemoteDistribution());
        }

        const slimQtyDiv = this.f1.displays.qty['slim'];
        if (slimQtyDiv) {
            // [REFACTORED] Directly call the handler instead of publishing an event
            slimQtyDiv.addEventListener('click', () => this.handleDualDistribution());
        }

        const discountInput = this.f1.inputs['discount'];
        if (discountInput) {
            discountInput.addEventListener('input', (event) => {
                const percentage = parseFloat(event.target.value) || 0;
                this.eventAggregator.publish(EVENTS.F1_DISCOUNT_CHANGED, { percentage });
            });

            // [NEW] Add blur on Enter key press
            discountInput.addEventListener('keydown', (event) => {
                if (event.key === 'Enter') {
                    event.target.blur();
                }
            });
        }
    }

    render(state) {
        if (!this.f1 || !state || !state.quoteData || !state.ui) return;

        const { quoteData, ui } = state;
        const items = quoteData.products.rollerBlind.items;
        const formatPrice = (price) => (typeof price === 'number' && price > 0 ? `$${price.toFixed(2)}` : '');
        const formatDisplay = (value) => (value !== null && value !== undefined) ? value : '';

        // --- Component Cost Calculation ---
        const componentPrices = {};
        const winderQty = items.filter(item => item.winder === 'HD').length;
        componentPrices.winder = this.calculationService.calculateF1ComponentPrice('winder', winderQty);
        this.f1.displays.qty.winder.textContent = winderQty;

        const motorQty = items.filter(item => !!item.motor).length;
        componentPrices.motor = this.calculationService.calculateF1ComponentPrice('motor', motorQty);
        this.f1.displays.qty.motor.textContent = motorQty;

        const totalRemoteQty = ui.driveRemoteCount || 0;
        const remote1chQty = ui.f1.remote_1ch_qty;
        const remote16chQty = (ui.f1.remote_1ch_qty === null) ? totalRemoteQty : (totalRemoteQty - remote1chQty);
        componentPrices['remote-1ch'] = this.calculationService.calculateF1ComponentPrice('remote-1ch', remote1chQty);
        componentPrices['remote-16ch'] = this.calculationService.calculateF1ComponentPrice('remote-16ch', remote16chQty);
        this.f1.displays.qty['remote-1ch'].textContent = remote1chQty;
        this.f1.displays.qty['remote-16ch'].textContent = remote16chQty;

        const chargerQty = ui.driveChargerCount || 0;
        componentPrices.charger = this.calculationService.calculateF1ComponentPrice('charger', chargerQty);
        this.f1.displays.qty.charger.textContent = chargerQty;

        const cordQty = ui.driveCordCount || 0;
        componentPrices['3m-cord'] = this.calculationService.calculateF1ComponentPrice('3m-cord', cordQty);
        this.f1.displays.qty['3m-cord'].textContent = cordQty;

        const totalDualPairs = Math.floor(items.filter(item => item.dual === 'D').length / 2);
        const comboQty = (ui.f1.dual_combo_qty === null) ? totalDualPairs : ui.f1.dual_combo_qty;
        const slimQty = (ui.f1.dual_slim_qty === null) ?
            0 : ui.f1.dual_slim_qty;
        componentPrices['dual-combo'] = this.calculationService.calculateF1ComponentPrice('dual-combo', comboQty);
        componentPrices.slim = this.calculationService.calculateF1ComponentPrice('slim', slimQty);
        this.f1.displays.qty['dual-combo'].textContent = comboQty;
        this.f1.displays.qty.slim.textContent = slimQty;

        for (const [key, price] of Object.entries(componentPrices)) {
            if (this.f1.displays.price[key]) {
                this.f1.displays.price[key].textContent = formatPrice(price);
            }
        }
        const componentTotal = Object.values(componentPrices).reduce((sum, price) => sum + price, 0);
        this.f1.displays.price.total.textContent = formatPrice(componentTotal);

        // --- RB Pricing Calculation ---
        const retailTotal = quoteData.products.rollerBlind.summary.totalSum || 0;
        const discountPercentage = ui.f1.discountPercentage || 0;
        const rbPrice = retailTotal * (1 - (discountPercentage / 100));

        this.f1.displays.price['rb-retail'].textContent = formatPrice(retailTotal);
        if (document.activeElement !== this.f1.inputs.discount) {
            this.f1.inputs.discount.value = formatDisplay(discountPercentage) || '';
        }
        this.f1.displays.price['rb-price'].textContent = formatPrice(rbPrice);

        // --- Final Summary Calculation ---
        const subTotal = componentTotal + rbPrice;
        const gst = subTotal * 0.10;
        const finalTotal = subTotal + gst;

        this.f1.displays.price['sub-total'].textContent = formatPrice(subTotal);
        this.f1.displays.price.gst.textContent = formatPrice(gst);
        this.f1.displays.price['final-total'].textContent = formatPrice(finalTotal);
    }

    activate() {
        this.eventAggregator.publish(EVENTS.F1_TAB_ACTIVATED);

        // [NEW] Focus on the discount input when the tab is activated.
        setTimeout(() => {
            const discountInput = this.f1.inputs.discount;
            if (discountInput) {
                discountInput.focus();
                discountInput.select();
            }
        }, 50); // A small delay ensures the element is visible and focusable.
    }

    // --- [NEW] Methods migrated from WorkflowService ---

    handleRemoteDistribution() {
        const { ui } = this.stateService.getState();
        const totalRemoteCount = ui.driveRemoteCount || 0;

        const initial1ch = ui.f1.remote_1ch_qty;
        const initial16ch = (ui.f1.remote_16ch_qty === null) ? totalRemoteCount - initial1ch : ui.f1.remote_16ch_qty;

        this.eventAggregator.publish(EVENTS.SHOW_CONFIRMATION_DIALOG, {
            message: `Total remotes: ${totalRemoteCount}. Please distribute them.`,
            layout: [
                [
                    { type: 'text', text: '1-Ch Qty:', className: 'dialog-label' },
                    { type: 'input', id: DOM_IDS.DIALOG_INPUT_1CH, value: initial1ch },
                    { type: 'text', text: '16-Ch Qty:', className: 'dialog-label' },
                    { type: 'input', id: DOM_IDS.DIALOG_INPUT_16CH, value: initial16ch }
                ],
                [
                    {
                        type: 'button',
                        text: 'Confirm',
                        className: 'primary-confirm-button',
                        colspan: 2,
                        callback: () => {
                            const qty1ch = parseInt(document.getElementById(DOM_IDS.DIALOG_INPUT_1CH).value, 10);
                            const qty16ch = parseInt(document.getElementById(DOM_IDS.DIALOG_INPUT_16CH).value, 10);

                            if (isNaN(qty1ch) || isNaN(qty16ch) || qty1ch < 0 || qty16ch < 0) {
                                this.eventAggregator.publish(EVENTS.SHOW_NOTIFICATION, { message: 'Quantities must be positive numbers.', type: 'error' });
                                return false;
                            }

                            if (qty1ch + qty16ch !== totalRemoteCount) {
                                this.eventAggregator.publish(EVENTS.SHOW_NOTIFICATION, {
                                    message: `Total must equal ${totalRemoteCount}. Current total: ${qty1ch + qty16ch}.`,
                                    type: 'error'
                                });
                                return false;
                            }

                            this.stateService.dispatch(uiActions.setF1RemoteDistribution(qty1ch, qty16ch));
                            return true;
                        }
                    },
                    { type: 'button', text: 'Cancel', className: 'secondary', colspan: 2, callback: () => { } }
                ]
            ],
            onOpen: () => {
                const input1ch = document.getElementById(DOM_IDS.DIALOG_INPUT_1CH);
                const input16ch = document.getElementById(DOM_IDS.DIALOG_INPUT_16CH);

                input1ch.addEventListener('input', () => {
                    const qty1ch = parseInt(input1ch.value, 10);
                    if (!isNaN(qty1ch) && qty1ch >= 0 && qty1ch <= totalRemoteCount) {
                        input16ch.value = totalRemoteCount - qty1ch;
                    }
                });

                input16ch.addEventListener('input', () => {
                    const qty16ch = parseInt(input16ch.value, 10);
                    if (!isNaN(qty16ch) && qty16ch >= 0 && qty16ch <= totalRemoteCount) {
                        input1ch.value = totalRemoteCount - qty16ch;
                    }
                });

                setTimeout(() => {
                    input1ch.focus();
                    input1ch.select();
                }, 0);
            },
            closeOnOverlayClick: false
        });
    }

    handleDualDistribution() {
        const { quoteData, ui } = this.stateService.getState();
        const items = quoteData.products[quoteData.currentProduct].items;
        const totalDualPairs = Math.floor(items.filter(item => item.dual === 'D').length / 2);

        const initialCombo = (ui.f1.dual_combo_qty === null) ? totalDualPairs : ui.f1.dual_combo_qty;
        const initialSlim = (ui.f1.dual_slim_qty === null) ? 0 : ui.f1.dual_slim_qty;

        this.eventAggregator.publish(EVENTS.SHOW_CONFIRMATION_DIALOG, {
            message: `Total Dual pairs: ${totalDualPairs}. Please distribute them.`,
            layout: [
                [
                    { type: 'text', text: 'Combo Qty:', className: 'dialog-label' },
                    { type: 'input', id: DOM_IDS.DIALOG_INPUT_COMBO, value: initialCombo },
                    { type: 'text', text: 'Slim Qty:', className: 'dialog-label' },
                    { type: 'input', id: DOM_IDS.DIALOG_INPUT_SLIM, value: initialSlim }
                ],
                [
                    {
                        type: 'button',
                        text: 'Confirm',
                        className: 'primary-confirm-button',
                        colspan: 2,
                        callback: () => {
                            const qtyCombo = parseInt(document.getElementById(DOM_IDS.DIALOG_INPUT_COMBO).value, 10);
                            const qtySlim = parseInt(document.getElementById(DOM_IDS.DIALOG_INPUT_SLIM).value, 10);

                            if (isNaN(qtyCombo) || isNaN(qtySlim) || qtyCombo < 0 || qtySlim < 0) {
                                this.eventAggregator.publish(EVENTS.SHOW_NOTIFICATION, { message: 'Quantities must be positive numbers.', type: 'error' });
                                return false;
                            }

                            if (qtyCombo + qtySlim !== totalDualPairs) {
                                this.eventAggregator.publish(EVENTS.SHOW_NOTIFICATION, {
                                    message: `Total must equal ${totalDualPairs}. Current total: ${qtyCombo + qtySlim}.`,
                                    type: 'error'
                                });
                                return false;
                            }

                            this.stateService.dispatch(uiActions.setF1DualDistribution(qtyCombo, qtySlim));
                            return true;
                        }
                    },
                    { type: 'button', text: 'Cancel', className: 'secondary', colspan: 2, callback: () => { } }
                ]
            ],
            onOpen: () => {
                const inputCombo = document.getElementById(DOM_IDS.DIALOG_INPUT_COMBO);
                const inputSlim = document.getElementById(DOM_IDS.DIALOG_INPUT_SLIM);

                inputSlim.addEventListener('input', () => {
                    const qtySlim = parseInt(inputSlim.value, 10);
                    if (!isNaN(qtySlim) && qtySlim >= 0 && qtySlim <= totalDualPairs) {
                        inputCombo.value = totalDualPairs - qtySlim;
                    }
                });
                inputCombo.addEventListener('input', () => {
                    const qtyCombo = parseInt(inputCombo.value, 10);
                    if (!isNaN(qtyCombo) && qtyCombo >= 0 && qtyCombo <= totalDualPairs) {
                        inputSlim.value = totalDualPairs - qtyCombo;
                    }
                });

                setTimeout(() => {
                    inputSlim.focus();
                    inputSlim.select();
                }, 0);
            },
            closeOnOverlayClick: false
        });
    }
}
--- FILE END ---

--- FILE START: 04-core-code/ui/views/f2-summary-view.js ---
// File: 04-core-code/ui/views/f2-summary-view.js

import { EVENTS } from '../../config/constants.js';
import * as uiActions from '../../actions/ui-actions.js';
import * as quoteActions from '../../actions/quote-actions.js';

/**
 * @fileoverview A dedicated sub-view for handling all logic related to the F2 (Summary) tab.
 */
export class F2SummaryView {
    constructor({ panelElement, eventAggregator, stateService, calculationService }) {
        this.panelElement = panelElement;
        this.eventAggregator = eventAggregator;
        this.stateService = stateService;
        this.calculationService = calculationService;

        this.f2InputSequence = [
            'f2-b10-wifi-qty', 'f2-b13-delivery-qty', 'f2-b14-install-qty',
            'f2-b15-removal-qty', 'f2-b17-mul-times', 'f2-b18-discount'
        ];

        this._cacheF2Elements();
        this._initializeF2Listeners();
        console.log("F2SummaryView Initialized.");
    }

    _cacheF2Elements() {
        const query = (id) => this.panelElement.querySelector(`#${id}`);
        this.f2 = {
            b2_winderPrice: query('f2-b2-winder-price'),
            b3_dualPrice: query('f2-b3-dual-price'),
            b4_acceSum: query('f2-b4-acce-sum'),
            b6_motorPrice: query('f2-b6-motor-price'),
            b7_remotePrice: query('f2-b7-remote-price'),
            b8_chargerPrice: query('f2-b8-charger-price'),
            b9_cordPrice: query('f2-b9-cord-price'),
            b10_wifiQty: query('f2-b10-wifi-qty'),
            c10_wifiSum: query('f2-c10-wifi-sum'),
            b11_eAcceSum: query('f2-b11-e-acce-sum'),
            b13_deliveryQty: query('f2-b13-delivery-qty'),
            c13_deliveryFee: query('f2-c13-delivery-fee'),
            b14_installQty: query('f2-b14-install-qty'),
            c14_installFee: query('f2-c14-install-fee'),
            b15_removalQty: query('f2-b15-removal-qty'),
            c15_removalFee: query('f2-c15-removal-fee'),
            b16_surchargeFee: query('f2-b16-surcharge-fee'),
            a17_totalSum: query('f2-a17-total-sum'),
            b17_mulTimes: query('f2-b17-mul-times'),
            c17_1stRbPrice: query('f2-c17-1st-rb-price'),
            b18_discount: query('f2-b18-discount'),
            b19_disRbPrice: query('f2-b19-dis-rb-price'),
            b20_singleprofit: query('f2-b20-singleprofit'),
            b21_rbProfit: query('f2-b21-rb-profit'),
            b22_sumprice: query('f2-b22-sumprice'),
            b23_sumprofit: query('f2-b23-sumprofit'),
            b24_gst: query('f2-b24-gst'),
            b25_netprofit: query('f2-b25-netprofit'),
        };
    }

    _initializeF2Listeners() {
        const setupF2InputListener = (inputElement) => {
            if (inputElement) {
                inputElement.addEventListener('change', (event) => {
                    this.handleF2ValueChange({ id: event.target.id, value: event.target.value });
                });

                inputElement.addEventListener('keydown', (event) => {
                    if (event.key === 'Enter') {
                        event.preventDefault();
                        this.focusNextF2Input(event.target.id);
                    }
                });
            }
        };

        const f2Inputs = [
            this.f2.b10_wifiQty, this.f2.b13_deliveryQty, this.f2.b14_installQty,
            this.f2.b15_removalQty, this.f2.b17_mulTimes, this.f2.b18_discount
        ];
        f2Inputs.forEach(input => setupF2InputListener(input));

        const feeCells = [
            { el: this.f2.c13_deliveryFee, type: 'delivery' },
            { el: this.f2.c14_installFee, type: 'install' },
            { el: this.f2.c15_removalFee, type: 'removal' }
        ];
        feeCells.forEach(({ el, type }) => {
            if (el) {
                el.addEventListener('click', () => {
                    this.handleToggleFeeExclusion({ feeType: type });
                });
            }
        });
    }

    render(state) {
        if (!state || !state.ui.f2 || !this.f2.b2_winderPrice) return;

        const f2State = state.ui.f2;
        const productSummary = state.quoteData.products[state.quoteData.currentProduct]?.summary;
        const accessories = productSummary?.accessories || {};

        const formatIntegerCurrency = (value) => (typeof value === 'number') ? `$${value.toFixed(0)}` : '$';
        const formatDecimalCurrency = (value) => (typeof value === 'number') ? `$${value.toFixed(2)}` : '$';
        const formatValue = (value) => (value !== null && value !== undefined) ? value : '';

        const winderPrice = accessories.winderCostSum || 0;
        const dualPrice = accessories.dualCostSum || 0;
        const motorPrice = accessories.motorCostSum || 0;
        const remotePrice = accessories.remoteCostSum || 0;
        const chargerPrice = accessories.chargerCostSum || 0;
        const cordPrice = accessories.cordCostSum || 0;

        this.f2.b2_winderPrice.textContent = formatIntegerCurrency(winderPrice);
        this.f2.b3_dualPrice.textContent = formatIntegerCurrency(dualPrice);
        this.f2.b6_motorPrice.textContent = formatIntegerCurrency(motorPrice);
        this.f2.b7_remotePrice.textContent = formatIntegerCurrency(remotePrice);
        this.f2.b8_chargerPrice.textContent = formatIntegerCurrency(chargerPrice);
        this.f2.b9_cordPrice.textContent = formatIntegerCurrency(cordPrice);

        const wifiSum = f2State.wifiSum || 0;
        const deliveryFee = f2State.deliveryFee || 0;
        const installFee = f2State.installFee || 0;
        const removalFee = f2State.removalFee || 0;

        const acceSum = winderPrice + dualPrice;
        const eAcceSum = motorPrice + remotePrice + chargerPrice + cordPrice + wifiSum;
        const surchargeFee =
            (f2State.deliveryFeeExcluded ? 0 : deliveryFee) +
            (f2State.installFeeExcluded ? 0 : installFee) +
            (f2State.removalFeeExcluded ? 0 : removalFee);

        this.f2.b4_acceSum.textContent = formatIntegerCurrency(acceSum);
        this.f2.c10_wifiSum.textContent = formatIntegerCurrency(wifiSum);
        this.f2.b11_eAcceSum.textContent = formatIntegerCurrency(eAcceSum);
        this.f2.c13_deliveryFee.textContent = formatIntegerCurrency(deliveryFee);
        this.f2.c14_installFee.textContent = formatIntegerCurrency(installFee);
        this.f2.c15_removalFee.textContent = formatIntegerCurrency(removalFee);
        this.f2.b16_surchargeFee.textContent = formatIntegerCurrency(surchargeFee);

        this.f2.a17_totalSum.textContent = formatValue(f2State.totalSumForRbTime);
        this.f2.c17_1stRbPrice.textContent = formatDecimalCurrency(f2State.firstRbPrice);
        this.f2.b19_disRbPrice.textContent = formatDecimalCurrency(f2State.disRbPrice);
        this.f2.b20_singleprofit.textContent = formatDecimalCurrency(f2State.singleprofit);
        this.f2.b21_rbProfit.textContent = formatDecimalCurrency(f2State.rbProfit);
        this.f2.b22_sumprice.textContent = formatDecimalCurrency(f2State.sumPrice);
        this.f2.b23_sumprofit.textContent = formatDecimalCurrency(f2State.sumProfit);
        this.f2.b24_gst.textContent = formatDecimalCurrency(f2State.gst);
        this.f2.b25_netprofit.textContent = formatDecimalCurrency(f2State.netProfit);

        if (document.activeElement !== this.f2.b10_wifiQty) this.f2.b10_wifiQty.value = formatValue(f2State.wifiQty);
        if (document.activeElement !== this.f2.b13_deliveryQty) this.f2.b13_deliveryQty.value = formatValue(f2State.deliveryQty);
        if (document.activeElement !== this.f2.b14_installQty) this.f2.b14_installQty.value = formatValue(f2State.installQty);
        if (document.activeElement !== this.f2.b15_removalQty) this.f2.b15_removalQty.value = formatValue(f2State.removalQty);
        if (document.activeElement !== this.f2.b17_mulTimes) this.f2.b17_mulTimes.value = formatValue(f2State.mulTimes);
        if (document.activeElement !== this.f2.b18_discount) this.f2.b18_discount.value = formatValue(f2State.discount);

        this.f2.c13_deliveryFee.classList.toggle('is-excluded', f2State.deliveryFeeExcluded);
        this.f2.c14_installFee.classList.toggle('is-excluded', f2State.installFeeExcluded);
        this.f2.c15_removalFee.classList.toggle('is-excluded', f2State.removalFeeExcluded);
    }

    activate() {
        // [REFACTORED] The view is now responsible for ensuring its data is fresh upon activation.
        const { quoteData } = this.stateService.getState();
        const productStrategy = this.calculationService.productFactory.getProductStrategy(quoteData.currentProduct);
        const { updatedQuoteData } = this.calculationService.calculateAndSum(quoteData, productStrategy);

        this.stateService.dispatch(quoteActions.setQuoteData(updatedQuoteData));
        this._calculateF2Summary();
        this.eventAggregator.publish(EVENTS.FOCUS_ELEMENT, { elementId: 'f2-b10-wifi-qty' });
    }

    // --- [NEW] Methods migrated from WorkflowService ---
    handleToggleFeeExclusion({ feeType }) {
        this.stateService.dispatch(uiActions.toggleF2FeeExclusion(feeType));
        this._calculateF2Summary();
    }

    handleF2ValueChange({ id, value }) {
        const numericValue = value === '' ? null : parseFloat(value);
        let keyToUpdate = null;

        switch (id) {
            case 'f2-b10-wifi-qty': keyToUpdate = 'wifiQty'; break;
            case 'f2-b13-delivery-qty': keyToUpdate = 'deliveryQty'; break;
            case 'f2-b14-install-qty': keyToUpdate = 'installQty'; break;
            case 'f2-b15-removal-qty': keyToUpdate = 'removalQty'; break;
            case 'f2-b17-mul-times': keyToUpdate = 'mulTimes'; break;
            case 'f2-b18-discount': keyToUpdate = 'discount'; break;
        }

        if (keyToUpdate) {
            this.stateService.dispatch(uiActions.setF2Value(keyToUpdate, numericValue));
            this._calculateF2Summary();
        }
    }

    focusNextF2Input(currentId) {
        const currentIndex = this.f2InputSequence.indexOf(currentId);
        if (currentIndex > -1 && currentIndex < this.f2InputSequence.length - 1) {
            const nextElementId = this.f2InputSequence[currentIndex + 1];
            this.eventAggregator.publish(EVENTS.FOCUS_ELEMENT, { elementId: nextElementId });
        } else {
            const currentElement = document.getElementById(currentId);
            currentElement?.blur();
        }
    }

    _calculateF2Summary() {
        const { quoteData, ui } = this.stateService.getState();
        const summaryValues = this.calculationService.calculateF2Summary(quoteData, ui);
        for (const key in summaryValues) {
            this.stateService.dispatch(uiActions.setF2Value(key, summaryValues[key]));
        }
    }
}
--- FILE END ---

--- FILE START: 04-core-code/ui/views/f3-quote-prep-view.js ---
// File: 04-core-code/ui/views/f3-quote-prep-view.js

import { EVENTS, DOM_IDS } from '../../config/constants.js';

/**
 * @fileoverview A dedicated sub-view for handling all logic related to the F3 (Quote Prep) tab.
 */
export class F3QuotePrepView {
    constructor({ panelElement, eventAggregator }) {
        this.panelElement = panelElement;
        this.eventAggregator = eventAggregator;

        this._cacheF3Elements();
        this._initializeF3Listeners();
        console.log("F3QuotePrepView Initialized.");
    }

    _cacheF3Elements() {
        const query = (id) => this.panelElement.querySelector(id);
        this.f3 = {
            inputs: {
                quoteId: query('#f3-quote-id'),
                issueDate: query('#f3-issue-date'),
                dueDate: query('#f3-due-date'),
                customerName: query('#f3-customer-name'),
                customerAddress: query('#f3-customer-address'),
                customerPhone: query('#f3-customer-phone'),
                customerEmail: query('#f3-customer-email'),
                finalOfferPrice: query('#f3-final-offer-price'),
                generalNotes: query('#f3-general-notes'),
                termsConditions: query('#f3-terms-conditions'),
            },
            buttons: {
                addQuote: query(`#${DOM_IDS.BTN_ADD_QUOTE}`),
            }
        };
    }

    _initializeF3Listeners() {
        if (!this.f3.inputs.issueDate) return;

        // --- Date Chaining Logic ---
        this.f3.inputs.issueDate.addEventListener('input', (event) => {
            const issueDateValue = event.target.value;
            if (issueDateValue) {
                const issueDate = new Date(issueDateValue);
                // Adjust for timezone offset to prevent day-before issues
                issueDate.setMinutes(issueDate.getMinutes() + issueDate.getTimezoneOffset());

                const dueDate = new Date(issueDate);
                dueDate.setDate(dueDate.getDate() + 14);

                const year = dueDate.getFullYear();
                const month = String(dueDate.getMonth() + 1).padStart(2, '0');
                const day = String(dueDate.getDate()).padStart(2, '0');

                this.f3.inputs.dueDate.value = `${year}-${month}-${day}`;
            }
        });

        // --- Add Quote Button Listener ---
        if (this.f3.buttons.addQuote) {
            this.f3.buttons.addQuote.addEventListener('click', () => {
                this.eventAggregator.publish(EVENTS.USER_REQUESTED_PRINTABLE_QUOTE);
            });
        }

        // --- Focus Jumping Logic ---
        const focusOrder = [
            'quoteId', 'issueDate', 'dueDate', 'customerName', 'customerAddress',
            'customerPhone', 'customerEmail', 'finalOfferPrice', 'generalNotes', 'termsConditions'
        ];

        focusOrder.forEach((key, index) => {
            const currentElement = this.f3.inputs[key];
            if (currentElement) {
                currentElement.addEventListener('keydown', (event) => {
                    if (event.key === 'Enter' || (event.key === 'Tab' && !event.shiftKey)) {
                        event.preventDefault();
                        event.stopPropagation(); // Stop the event from bubbling up
                        const nextIndex = index + 1;
                        if (nextIndex < focusOrder.length) {
                            const nextKey = focusOrder[nextIndex];
                            this.f3.inputs[nextKey]?.focus();
                        } else {
                            this.f3.buttons.addQuote?.focus();
                        }
                    }
                });
            }
        });
    }

    render() {
        if (!this.f3.inputs.quoteId) return;

        // Only fill if the fields are empty, to preserve manual changes.
        const formatDate = (date) => {
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            return `${year}-${month}-${day}`;
        };

        const now = new Date();
        const year = now.getFullYear();
        const month = String(now.getMonth() + 1).padStart(2, '0');
        const day = String(now.getDate()).padStart(2, '0');
        const hours = String(now.getHours()).padStart(2, '0');

        if (!this.f3.inputs.quoteId.value) this.f3.inputs.quoteId.value = `RB${year}${month}${day}${hours}`;
        if (!this.f3.inputs.issueDate.value) this.f3.inputs.issueDate.value = formatDate(now);
        if (!this.f3.inputs.dueDate.value) {
            const dueDate = new Date();
            dueDate.setDate(now.getDate() + 14);
            this.f3.inputs.dueDate.value = formatDate(dueDate);
        }
    }

    activate() {
        // This method is called when the tab becomes active.
        // The render logic will automatically handle pre-filling empty fields.
        this.render();
    }
}
--- FILE END ---

--- FILE START: 04-core-code/ui/views/f4-actions-view.js ---
// File: 04-core-code/ui/views/f4-actions-view.js

import { EVENTS } from '../../config/constants.js';

/**
 * @fileoverview A dedicated sub-view for handling all logic related to the F4 (Actions) tab.
 */
export class F4ActionsView {
    constructor({ panelElement, eventAggregator }) {
        this.panelElement = panelElement;
        this.eventAggregator = eventAggregator;

        this._cacheF4Elements();
        this._initializeF4Listeners();
        console.log("F4ActionsView Initialized.");
    }

    _cacheF4Elements() {
        const query = (id) => this.panelElement.querySelector(id);
        this.f4 = {
            buttons: {
                'f1-key-save': query('#f1-key-save'),
                'f1-key-export': query('#f1-key-export'),
                'f1-key-load': query('#f1-key-load'),
                'f1-key-reset': query('#f1-key-reset'),
            }
        };
    }

    _initializeF4Listeners() {
        const buttonEventMap = {
            'f1-key-save': EVENTS.USER_REQUESTED_SAVE,
            'f1-key-export': EVENTS.USER_REQUESTED_EXPORT_CSV,
            'f1-key-load': EVENTS.USER_REQUESTED_LOAD,
            'f1-key-reset': EVENTS.USER_REQUESTED_RESET
        };

        for (const [id, eventName] of Object.entries(buttonEventMap)) {
            const button = this.f4.buttons[id];
            if (button) {
                button.addEventListener('click', () => this.eventAggregator.publish(eventName));
            }
        }
    }

    // This view is static and doesn't require render or activate methods.
}
--- FILE END ---

--- FILE START: 04-core-code/ui/views/k1-location-view.js ---
// File: 04-core-code/ui/views/k1-location-view.js
import * as uiActions from '../../actions/ui-actions.js';
import * as quoteActions from '../../actions/quote-actions.js';

/**
 * @fileoverview A dedicated sub-view for handling all logic related to the K1 (Location) tab.
 */
export class K1LocationView {
    constructor({ stateService, publishStateChangeCallback }) {
        this.stateService = stateService;
        this.publish = publishStateChangeCallback;
        console.log("K1LocationView Initialized.");
    }

    _getItems() {
        const { quoteData } = this.stateService.getState();
        return quoteData.products[quoteData.currentProduct].items;
    }

    /**
     * Handles the request to enter or exit the location editing mode.
     * This is typically triggered by the '#Location' button.
     */
    handleFocusModeRequest() {
        const { ui } = this.stateService.getState();
        const currentMode = ui.activeEditMode;
        const newMode = currentMode === 'K1' ? null : 'K1';
        this._toggleLocationEditMode(newMode);
    }

    /**
     * Toggles the UI state for K1's location editing mode.
     * @param {string|null} newMode - The new mode ('K1' or null).
     * @private
     */
    _toggleLocationEditMode(newMode) {
        this.stateService.dispatch(uiActions.setActiveEditMode(newMode));

        if (newMode) {
            const targetRow = 0;
            this.stateService.dispatch(uiActions.setTargetCell({ rowIndex: targetRow, column: 'location' }));
            
            const currentItem = this._getItems()[targetRow];
            this.stateService.dispatch(uiActions.setLocationInputValue(currentItem.location || ''));
            
            const locationInput = document.getElementById('location-input-box');
            setTimeout(() => {
                locationInput?.focus();
                locationInput?.select();
            }, 50);
        } else {
            this.stateService.dispatch(uiActions.setTargetCell(null));
            this.stateService.dispatch(uiActions.setLocationInputValue(''));
        }
    }

    /**
     * Handles the Enter key press in the location input box.
     * @param {object} data - The event data containing the value.
     */
    handleLocationInputEnter({ value }) {
        const { ui } = this.stateService.getState();
        const { targetCell } = ui;
        if (!targetCell) return;

        this.stateService.dispatch(quoteActions.updateItemProperty(targetCell.rowIndex, targetCell.column, value));

        const nextRowIndex = targetCell.rowIndex + 1;
        const totalRows = this._getItems().length;
        const locationInput = document.getElementById('location-input-box');

        // Move to the next row if it's not the last empty row
        if (nextRowIndex < totalRows - 1) {
            this.stateService.dispatch(uiActions.setTargetCell({ rowIndex: nextRowIndex, column: 'location' }));
            const nextItem = this._getItems()[nextRowIndex];
            this.stateService.dispatch(uiActions.setLocationInputValue(nextItem.location || ''));
            
            // Refocus and select the input for continuous entry
            setTimeout(() => locationInput?.select(), 0);
        } else {
            // If it's the last row, exit the editing mode
            this._toggleLocationEditMode(null);
        }
    }

    /**
     * Handles clicks on table cells when K1 mode is active.
     * @param {object} data - The event data { rowIndex }.
     */
    handleTableCellClick({ rowIndex }) {
        // Update the target cell to the clicked row
        this.stateService.dispatch(uiActions.setTargetCell({ rowIndex, column: 'location' }));
        const item = this._getItems()[rowIndex];
        this.stateService.dispatch(uiActions.setLocationInputValue(item.location || ''));
        
        const locationInput = document.getElementById('location-input-box');
        setTimeout(() => {
            locationInput?.focus();
            locationInput?.select();
        }, 50);
    }

    /**
     * This method is called by the main DetailConfigView when the K1 tab becomes active.
     */
    activate() {
        this.stateService.dispatch(uiActions.setVisibleColumns(['sequence', 'fabricTypeDisplay', 'location']));
    }
}
--- FILE END ---

--- FILE START: 04-core-code/ui/views/k2-fabric-view.js ---
// File: 04-core-code/ui/views/k2-fabric-view.js

import { EVENTS } from '../../config/constants.js';
import * as uiActions from '../../actions/ui-actions.js';
import * as quoteActions from '../../actions/quote-actions.js';

/**
 * @fileoverview A dedicated sub-view for handling all logic related to the K2 (Fabric) tab.
 */
export class K2FabricView {
    constructor({ stateService, eventAggregator, publishStateChangeCallback }) {
        this.stateService = stateService;
        this.eventAggregator = eventAggregator;
        this.publish = publishStateChangeCallback;
        
        this.indexesToExcludeFromBatchUpdate = new Set();

        console.log("K2FabricView Initialized.");
    }

    _getState() {
        return this.stateService.getState();
    }

    _getItems() {
        const { quoteData } = this._getState();
        return quoteData.products[quoteData.currentProduct].items;
    }

    handleFocusModeRequest() {
        const { ui } = this._getState();
        const currentMode = ui.activeEditMode;
        const newMode = currentMode === 'K2' ? null : 'K2';

        if (newMode) {
            const items = this._getItems();
            const { lfModifiedRowIndexes } = this._getState().quoteData.uiMetadata;
            const eligibleTypes = ['B2', 'B3', 'B4'];
            
            const hasConflict = items.some((item, index) => 
                eligibleTypes.includes(item.fabricType) && lfModifiedRowIndexes.includes(index)
            );

            if (hasConflict) {
                this.eventAggregator.publish(EVENTS.SHOW_CONFIRMATION_DIALOG, {
                    message: 'Data Conflict: Some items (B2, B3, B4) already have Light-Filter settings. Continuing with a batch edit will overwrite this data. How would you like to proceed?',
                    closeOnOverlayClick: false,
                    layout: [
                        [
                            { 
                                type: 'button', text: 'Overwrite (L-Filter)', 
                                callback: () => {
                                    this.indexesToExcludeFromBatchUpdate.clear();
                                    this._enterFCMode(true);
                                } 
                            },
                            { 
                                type: 'button', text: 'Keep Existing (Skip L-Filter)', 
                                callback: () => {
                                    this.indexesToExcludeFromBatchUpdate = new Set(this._getState().quoteData.uiMetadata.lfModifiedRowIndexes);
                                    this._enterFCMode(false);
                                }
                            },
                            { type: 'button', text: 'Cancel', className: 'secondary', callback: () => {} }
                        ]
                    ]
                });
            } else {
                this._enterFCMode(false);
            }
        } else {
            this._exitAllK2Modes();
        }
    }

    _enterFCMode(isOverwriting) {
        if (isOverwriting) {
            const items = this._getItems();
            const { lfModifiedRowIndexes } = this._getState().quoteData.uiMetadata;
            const indexesToClear = [];
            const eligibleTypes = ['B2', 'B3', 'B4'];
            items.forEach((item, index) => {
                if (eligibleTypes.includes(item.fabricType) && lfModifiedRowIndexes.includes(index)) {
                    indexesToClear.push(index);
                }
            });
            if (indexesToClear.length > 0) {
                this.stateService.dispatch(quoteActions.removeLFModifiedRows(indexesToClear));
            }
        }
        this.stateService.dispatch(uiActions.setActiveEditMode('K2'));
        this._updatePanelInputsState(); 
        this.stateService.dispatch(uiActions.setActiveCell(null, null));
    }

    handlePanelInputBlur({ type, field, value }) {
        if (type === 'LF') {
            this._applyLFChanges();
        } else {
            this.stateService.dispatch(quoteActions.batchUpdatePropertyByType(type, field, value, this.indexesToExcludeFromBatchUpdate));
        }
    }

    handlePanelInputEnter() {
        const inputs = Array.from(document.querySelectorAll('.panel-input:not([disabled])'));
        const activeElement = document.activeElement;
        const currentIndex = inputs.indexOf(activeElement);
        const nextInput = inputs[currentIndex + 1];

        if (nextInput) {
            nextInput.focus();
            nextInput.select();
        } else {
            if (activeElement.dataset.type === 'LF' || (activeElement.dataset.type !== 'LF' && this._getState().ui.activeEditMode === 'K2')) {
                this._applyLFChanges();
            }
            this._exitAllK2Modes();
        }
    }

    handleSequenceCellClick({ rowIndex }) {
        const { activeEditMode } = this._getState().ui;

        if (activeEditMode === 'K2_LF_SELECT' || activeEditMode === 'K2_LF_DELETE_SELECT') {
            const item = this._getItems()[rowIndex];
            
            if (activeEditMode === 'K2_LF_DELETE_SELECT') {
                const { lfModifiedRowIndexes } = this._getState().quoteData.uiMetadata;
                if (!lfModifiedRowIndexes.includes(rowIndex)) {
                    this.eventAggregator.publish(EVENTS.SHOW_NOTIFICATION, { message: 'Only items with a Light-Filter setting (pink background) can be selected for deletion.', type: 'error' });
                    return;
                }
            }

            const eligibleTypes = ['B2', 'B3', 'B4'];
            if (activeEditMode === 'K2_LF_SELECT' && !eligibleTypes.includes(item.fabricType)) {
                this.eventAggregator.publish(EVENTS.SHOW_NOTIFICATION, { message: 'Only items with TYPE "B2", "B3", or "B4" can be selected.', type: 'error' });
                return;
            }
            this.stateService.dispatch(uiActions.toggleLFSelection(rowIndex));
            
            if (activeEditMode === 'K2_LF_SELECT') {
                this._updatePanelInputsState();
                const { lfSelectedRowIndexes } = this._getState().ui;
                if (lfSelectedRowIndexes.length > 0) {
                    setTimeout(() => {
                        const fnameInput = document.querySelector('input[data-type="LF"][data-field="fabric"]');
                        if (fnameInput) {
                            fnameInput.focus();
                            fnameInput.select();
                        }
                    }, 50);
                }
            }
        }
    }

    handleLFEditRequest() {
        const { activeEditMode } = this._getState().ui;
        
        if (activeEditMode === 'K2_LF_SELECT') {
            this._applyLFChanges();
            this._exitAllK2Modes();
        } else {
            this.stateService.dispatch(uiActions.setActiveEditMode('K2_LF_SELECT'));
            this.eventAggregator.publish(EVENTS.SHOW_NOTIFICATION, { message: 'Please select items with TYPE \'B2\', \'B3\', or \'B4\' to edit.' });
        }
    }

    handleLFDeleteRequest() {
        const { activeEditMode } = this._getState().ui;
        
        if (activeEditMode === 'K2_LF_DELETE_SELECT') {
            const { lfSelectedRowIndexes } = this._getState().ui;
            if (lfSelectedRowIndexes.length > 0) {
                this.stateService.dispatch(quoteActions.removeLFProperties(lfSelectedRowIndexes));
                this.stateService.dispatch(quoteActions.removeLFModifiedRows(lfSelectedRowIndexes));
                this.eventAggregator.publish(EVENTS.SHOW_NOTIFICATION, { message: 'Light-Filter settings have been cleared.' });
            }
            this._exitAllK2Modes();
        } else {
            this.stateService.dispatch(uiActions.setActiveEditMode('K2_LF_DELETE_SELECT'));
            this.eventAggregator.publish(EVENTS.SHOW_NOTIFICATION, { message: 'Please select the roller blinds for which you want to cancel the Light-Filter fabric setting. After selection, click the LF-Del button again.' });
        }
    }

    _exitAllK2Modes() {
        this.stateService.dispatch(uiActions.setActiveEditMode(null));
        this.stateService.dispatch(uiActions.clearMultiSelectSelection());
        this.stateService.dispatch(uiActions.clearLFSelection());
        
        this.indexesToExcludeFromBatchUpdate.clear();

        this._updatePanelInputsState();
    }

    _applyLFChanges() {
        const { lfSelectedRowIndexes } = this._getState().ui;
        if (lfSelectedRowIndexes.length === 0) return;

        const fNameInput = document.querySelector('input[data-type="LF"][data-field="fabric"]');
        const fColorInput = document.querySelector('input[data-type="LF"][data-field="color"]');
        
        if (fNameInput && fColorInput && fNameInput.value && fColorInput.value) {
            const fabricNameWithPrefix = `Light-filter ${fNameInput.value}`;
            this.stateService.dispatch(quoteActions.batchUpdateLFProperties(lfSelectedRowIndexes, fabricNameWithPrefix, fColorInput.value));
            this.stateService.dispatch(quoteActions.addLFModifiedRows(lfSelectedRowIndexes));
        }
    }

    _updatePanelInputsState() {
        const { ui, quoteData } = this._getState();
        const { activeEditMode, lfSelectedRowIndexes } = ui;
        const items = this._getItems();
        const { lfModifiedRowIndexes } = quoteData.uiMetadata;
        const presentTypes = new Set(items.map(item => item.fabricType).filter(Boolean));
        
        const allPanelInputs = document.querySelectorAll('.panel-input');
        let firstEnabledInput = null;
        
        if (activeEditMode === 'K2') {
            allPanelInputs.forEach(input => {
                const type = input.dataset.type;
                const field = input.dataset.field;

                if (type !== 'LF') {
                    const isEnabled = presentTypes.has(type);
                    input.disabled = !isEnabled;

                    if (isEnabled) {
                        if (!firstEnabledInput) {
                            firstEnabledInput = input;
                        }
                        const itemWithData = items.find((item, index) => 
                            item.fabricType === type && !this.indexesToExcludeFromBatchUpdate.has(index)
                        );
                        input.value = itemWithData ? itemWithData[field] : '';
                    } else {
                        input.value = '';
                    }
                } else {
                    input.disabled = true;
                }
            });

            if (firstEnabledInput) {
                setTimeout(() => {
                    firstEnabledInput.focus();
                    firstEnabledInput.select();
                }, 50);
            }
        } else if (activeEditMode === 'K2_LF_SELECT') {
            allPanelInputs.forEach(input => {
                const isLFRow = input.dataset.type === 'LF';
                const hasSelection = lfSelectedRowIndexes.length > 0;
                input.disabled = !(isLFRow && hasSelection);
            });
        } else {
             allPanelInputs.forEach(input => {
                input.disabled = true;
                input.value = '';
            });
        }
    }
    
    activate() {
        this.stateService.dispatch(uiActions.setVisibleColumns(['sequence', 'fabricTypeDisplay', 'fabric', 'color']));
    }
}
--- FILE END ---

--- FILE START: 04-core-code/ui/views/k3-options-view.js ---
// File: 04-core-code/ui/views/k3-options-view.js
import * as uiActions from '../../actions/ui-actions.js';
import * as quoteActions from '../../actions/quote-actions.js';

/**
 * @fileoverview A dedicated sub-view for handling all logic related to the K3 (Options) tab.
 */
export class K3OptionsView {
    constructor({ stateService, publishStateChangeCallback }) {
        this.stateService = stateService;
        this.publish = publishStateChangeCallback;
        console.log("K3OptionsView Initialized.");
    }

    _getState() {
        return this.stateService.getState();
    }

    _getItems() {
        const { quoteData } = this._getState();
        return quoteData.products[quoteData.currentProduct].items;
    }

    /**
     * Toggles the K3 editing mode on or off.
     */
    handleToggleK3EditMode() {
        const { ui } = this._getState();
        const currentMode = ui.activeEditMode;
        const newMode = currentMode === 'K3' ? null : 'K3';
        this.stateService.dispatch(uiActions.setActiveEditMode(newMode));
    }

    /**
     * Handles batch cycling for a given property (over, oi, lr).
     * @param {object} data - The event data containing the column to cycle.
     */
    handleBatchCycle({ column }) {
        const items = this._getItems();
        if (items.length === 0 || !items[0]) return;

        const BATCH_CYCLE_SEQUENCES = {
            over: ['O', ''],
            oi: ['IN', 'OUT'],
            lr: ['L', 'R']
        };
        const sequence = BATCH_CYCLE_SEQUENCES[column];
        if (!sequence) return;
        
        const firstItemValue = items[0][column] || '';
        const currentIndex = sequence.indexOf(firstItemValue);
        const nextIndex = (currentIndex === -1) ? 0 : (currentIndex + 1) % sequence.length;
        const nextValue = sequence[nextIndex];
        
        this.stateService.dispatch(quoteActions.batchUpdateProperty(column, nextValue));
    }
    
    /**
     * Handles clicks on individual table cells in the K3 columns.
     * @param {object} data - The event data { rowIndex, column }.
     */
    handleTableCellClick({ rowIndex, column }) {
        this.stateService.dispatch(uiActions.setActiveCell(rowIndex, column));
        this.stateService.dispatch(quoteActions.cycleK3Property(rowIndex, column));
        
        // Briefly highlight the cell by setting and then clearing the active cell state
        setTimeout(() => {
            this.stateService.dispatch(uiActions.setActiveCell(null, null));
        }, 150);
    }

    /**
     * This method is called by the main DetailConfigView when the K3 tab becomes active.
     */
    activate() {
        this.stateService.dispatch(uiActions.setVisibleColumns(['sequence', 'fabricTypeDisplay', 'location', 'over', 'oi', 'lr']));
    }
}
--- FILE END ---

--- FILE START: 04-core-code/ui/views/quick-quote-view.js ---
// File: 04-core-code/ui/views/quick-quote-view.js

import { EVENTS } from '../../config/constants.js';
import * as uiActions from '../../actions/ui-actions.js';
import * as quoteActions from '../../actions/quote-actions.js';

/**
 * @fileoverview View module responsible for all logic related to the Quick Quote screen.
 */
export class QuickQuoteView {
    constructor({ stateService, calculationService, focusService, fileService, eventAggregator, productFactory, configManager }) {
        this.stateService = stateService;
        this.calculationService = calculationService;
        this.focusService = focusService;
        this.fileService = fileService;
        this.eventAggregator = eventAggregator;
        this.productFactory = productFactory;
        this.configManager = configManager;
        this.currentProduct = 'rollerBlind';
    }

    _getItems() {
        const { quoteData } = this.stateService.getState();
        const productKey = quoteData.currentProduct;
        return quoteData.products[productKey] ? quoteData.products[productKey].items : [];
    }

    handleSequenceCellClick({ rowIndex }) {
        const items = this._getItems();
        const item = items[rowIndex];
        const isLastRowEmpty = (rowIndex === items.length - 1) && (!item.width && !item.height);

        if (isLastRowEmpty) {
            this.eventAggregator.publish(EVENTS.SHOW_NOTIFICATION, { message: "Cannot select the final empty row.", type: 'error' });
            return;
        }

        this.stateService.dispatch(uiActions.toggleMultiSelectSelection(rowIndex));
    }

    handleDeleteRow() {
        const { ui } = this.stateService.getState();
        const { multiSelectSelectedIndexes } = ui;

        if (multiSelectSelectedIndexes.length > 1) {
            this.eventAggregator.publish(EVENTS.SHOW_NOTIFICATION, { message: 'Only one item can be deleted at a time.', type: 'error' });
            return;
        }

        if (multiSelectSelectedIndexes.length === 0) {
            this.eventAggregator.publish(EVENTS.SHOW_NOTIFICATION, { message: 'Please select an item to delete.' });
            return;
        }

        const selectedIndex = multiSelectSelectedIndexes[0];
        this.stateService.dispatch(quoteActions.deleteRow(selectedIndex));

        this.stateService.dispatch(uiActions.clearMultiSelectSelection());
        this.stateService.dispatch(uiActions.setSumOutdated(true));
        this.focusService.focusAfterDelete();

        this.eventAggregator.publish(EVENTS.OPERATION_SUCCESSFUL_AUTO_HIDE_PANEL);
    }

    handleInsertRow() {
        const { ui } = this.stateService.getState();
        const { multiSelectSelectedIndexes } = ui;

        if (multiSelectSelectedIndexes.length > 1) {
            this.eventAggregator.publish(EVENTS.SHOW_NOTIFICATION, { message: 'A new item can only be inserted below a single selection.', type: 'error' });
            return;
        }

        if (multiSelectSelectedIndexes.length === 0) {
            this.eventAggregator.publish(EVENTS.SHOW_NOTIFICATION, { message: 'Please select a position to insert the new item.' });
            return;
        }

        const selectedIndex = multiSelectSelectedIndexes[0];
        const items = this._getItems();
        const isLastRow = selectedIndex === items.length - 1;

        if (isLastRow) {
            this.eventAggregator.publish(EVENTS.SHOW_NOTIFICATION, { message: "Cannot insert after the last row.", type: 'error' });
            return;
        }
        const nextItem = items[selectedIndex + 1];
        const isNextRowEmpty = !nextItem.width && !nextItem.height && !nextItem.fabricType;
        if (isNextRowEmpty) {
            this.eventAggregator.publish(EVENTS.SHOW_NOTIFICATION, { message: "Cannot insert before an empty row.", type: 'error' });
            return;
        }

        this.stateService.dispatch(quoteActions.insertRow(selectedIndex));
        // The rowIndex of the new row is selectedIndex + 1
        this.stateService.dispatch(uiActions.setActiveCell(selectedIndex + 1, 'width'));
        this.stateService.dispatch(uiActions.clearMultiSelectSelection());
        this.eventAggregator.publish(EVENTS.OPERATION_SUCCESSFUL_AUTO_HIDE_PANEL);
    }

    handleNumericKeyPress({ key }) {
        if (!isNaN(parseInt(key))) {
            this.stateService.dispatch(uiActions.appendInputValue(key));
        } else if (key === 'DEL') {
            this.stateService.dispatch(uiActions.deleteLastInputChar());
        } else if (key === 'W' || key === 'H') {
            this.focusService.focusFirstEmptyCell(key === 'W' ? 'width' : 'height');
        } else if (key === 'ENT') {
            this._commitValue();
            return;
        }
    }

    _commitValue() {
        const { ui } = this.stateService.getState();
        const { inputValue, inputMode, activeCell } = ui;
        const value = inputValue === '' ? null : parseInt(inputValue, 10);
        const productStrategy = this.productFactory.getProductStrategy(this.currentProduct);
        const validationRules = productStrategy.getValidationRules();
        const rule = validationRules[inputMode];

        if (rule && value !== null && (isNaN(value) || value < rule.min || value > rule.max)) {
            this.eventAggregator.publish(EVENTS.SHOW_NOTIFICATION, { message: `${rule.name} must be between ${rule.min} and ${rule.max}.`, type: 'error' });
            this.stateService.dispatch(uiActions.clearInputValue());
            return;
        }
        this.stateService.dispatch(quoteActions.updateItemValue(activeCell.rowIndex, activeCell.column, value));
        this.stateService.dispatch(uiActions.setSumOutdated(true));
        this.focusService.focusAfterCommit();
    }

    handleSaveToFile() {
        const { quoteData } = this.stateService.getState();
        const result = this.fileService.saveToJson(quoteData);
        const notificationType = result.success ? 'info' : 'error';
        this.eventAggregator.publish(EVENTS.SHOW_NOTIFICATION, { message: result.message, type: notificationType });
    }

    handleExportCSV() {
        const { quoteData } = this.stateService.getState();
        const result = this.fileService.exportToCsv(quoteData);
        const notificationType = result.success ? 'info' : 'error';
        this.eventAggregator.publish(EVENTS.SHOW_NOTIFICATION, { message: result.message, type: notificationType });
    }

    handleReset() {
        if (window.confirm("This will clear all data. Are you sure?")) {
            this.stateService.dispatch(quoteActions.resetQuoteData());
            this.stateService.dispatch(uiActions.resetUi());
            this.eventAggregator.publish(EVENTS.SHOW_NOTIFICATION, { message: 'Quote has been reset.' });
        }
    }

    handleClearRow() {
        const { ui } = this.stateService.getState();
        const { multiSelectSelectedIndexes } = ui;

        if (multiSelectSelectedIndexes.length !== 1) {
            this.eventAggregator.publish(EVENTS.SHOW_NOTIFICATION, {
                message: 'Please select a single item to use this function.',
                type: 'error'
            });
            return;
        }

        const selectedIndex = multiSelectSelectedIndexes[0];
        const itemNumber = selectedIndex + 1;

        this.eventAggregator.publish(EVENTS.SHOW_CONFIRMATION_DIALOG, {
            message: `Row #${itemNumber}: What would you like to do?`,
            layout: [
                [
                    {
                        type: 'button',
                        text: 'Clear Fields (W,H,Type)',
                        callback: () => {
                            this.stateService.dispatch(quoteActions.clearRow(selectedIndex));
                            this.stateService.dispatch(uiActions.clearMultiSelectSelection());
                            this.stateService.dispatch(uiActions.setSumOutdated(true));
                            this.focusService.focusAfterClear();
                        }
                    },
                    {
                        type: 'button',
                        text: 'Delete Row',
                        callback: () => {
                            this.stateService.dispatch(quoteActions.deleteRow(selectedIndex));
                            this.stateService.dispatch(uiActions.clearMultiSelectSelection());
                            this.stateService.dispatch(uiActions.setSumOutdated(true));
                            this.focusService.focusAfterDelete();
                        }
                    },
                    {
                        type: 'button',
                        text: 'Cancel',
                        className: 'secondary',
                        callback: () => { }
                    }
                ]
            ]
        });
    }

    handleMoveActiveCell({ direction }) {
        this.focusService.moveActiveCell(direction);
    }

    handleTableCellClick({ rowIndex, column }) {
        const item = this._getItems()[rowIndex];
        if (!item) return;

        this.stateService.dispatch(uiActions.clearMultiSelectSelection());

        if (column === 'width' || column === 'height') {
            this.stateService.dispatch(uiActions.setActiveCell(rowIndex, column));
            this.stateService.dispatch(uiActions.setInputValue(item[column]));
        } else if (column === 'TYPE') {
            this.stateService.dispatch(uiActions.setActiveCell(rowIndex, column));
            this.stateService.dispatch(quoteActions.cycleItemType(rowIndex));
            this.stateService.dispatch(uiActions.setSumOutdated(true));
        }
    }

    handleCycleType() {
        const items = this._getItems();
        const eligibleItems = items.filter(item => item.width && item.height);
        if (eligibleItems.length === 0) return;

        this.stateService.dispatch(quoteActions.batchUpdateFabricType());
        this.stateService.dispatch(uiActions.setSumOutdated(true));
    }

    _showFabricTypeDialog(callback, dialogTitle = 'Select a fabric type:') {
        const fabricTypes = this.configManager.getFabricTypeSequence();
        if (fabricTypes.length === 0) return;

        const layout = fabricTypes.map(type => {
            const matrix = this.configManager.getPriceMatrix(type);
            const name = matrix ? matrix.name : 'Unknown';

            return [
                { type: 'button', text: type, callback: () => callback(type), colspan: 1 },
                { type: 'text', text: name, colspan: 2 }
            ];
        });

        layout.push([
            { type: 'text', text: '', colspan: 2 },
            { type: 'button', text: 'Cancel', className: 'secondary cancel-cell', callback: () => { }, colspan: 1 }
        ]);

        this.eventAggregator.publish(EVENTS.SHOW_CONFIRMATION_DIALOG, {
            message: dialogTitle,
            layout: layout,
            position: 'bottomThird'
        });
    }

    handleTypeCellLongPress({ rowIndex }) {
        const item = this._getItems()[rowIndex];
        if (!item || (!item.width && !item.height)) {
            this.eventAggregator.publish(EVENTS.SHOW_NOTIFICATION, { message: 'Cannot set type for an empty row.', type: 'error' });
            return;
        }
        this._showFabricTypeDialog((newType) => {
            this.stateService.dispatch(quoteActions.setItemType(rowIndex, newType));
            this.stateService.dispatch(uiActions.setSumOutdated(true));
            return true;
        }, `Set fabric type for Row #${rowIndex + 1}:`);
    }

    handleTypeButtonLongPress() {
        this._showFabricTypeDialog((newType) => {
            this.stateService.dispatch(quoteActions.batchUpdateFabricType(newType));
            this.stateService.dispatch(uiActions.setSumOutdated(true));
            return true;
        }, 'Set fabric type for ALL rows:');
    }

    handleMultiTypeSet() {
        const { ui } = this.stateService.getState();
        const { multiSelectSelectedIndexes } = ui;

        if (multiSelectSelectedIndexes.length <= 1) {
            this.eventAggregator.publish(EVENTS.SHOW_NOTIFICATION, { message: 'Please select multiple items first.', type: 'error' });
            return;
        }

        const title = `Set fabric type for ${multiSelectSelectedIndexes.length} selected rows:`;
        this._showFabricTypeDialog((newType) => {
            this.stateService.dispatch(quoteActions.batchUpdateFabricTypeForSelection(multiSelectSelectedIndexes, newType));
            this.stateService.dispatch(uiActions.clearMultiSelectSelection());
            this.stateService.dispatch(uiActions.setSumOutdated(true));
            return true;
        }, title);
    }

    handleCalculateAndSum() {
        const { quoteData } = this.stateService.getState();
        const productStrategy = this.productFactory.getProductStrategy(this.currentProduct);
        const { updatedQuoteData, firstError } = this.calculationService.calculateAndSum(quoteData, productStrategy);

        this.stateService.dispatch(quoteActions.setQuoteData(updatedQuoteData));

        if (firstError) {
            this.stateService.dispatch(uiActions.setSumOutdated(true));
            this.eventAggregator.publish(EVENTS.SHOW_NOTIFICATION, { message: firstError.message, type: 'error' });
            this.stateService.dispatch(uiActions.setActiveCell(firstError.rowIndex, firstError.column));
        } else {
            this.stateService.dispatch(uiActions.setSumOutdated(false));
        }
    }

    handleSaveThenLoad() {
        this.handleSaveToFile();
        this.eventAggregator.publish(EVENTS.TRIGGER_FILE_LOAD);
    }
}
--- FILE END ---

--- FILE START: 04-core-code/ui/views/quick-quote-view.spec.js ---
// File: 04-core-code/ui/views/quick-quote-view.spec.js

import { QuickQuoteView } from './quick-quote-view.js';
import { EVENTS } from '../../config/constants.js';

describe('QuickQuoteView', () => {
    let quickQuoteView;
    let mockQuoteService;
    let mockCalculationService;
    let mockUiService;
    let mockEventAggregator;
    let mockFocusService;
    let mockProductFactory; // [FIX] Declare mock for productFactory

    beforeEach(() => {
        // Arrange: Create mock dependencies for the QuickQuoteView constructor.
        mockQuoteService = {
            getQuoteData: jest.fn(),
            getItems: jest.fn().mockReturnValue([]),
            insertRow: jest.fn(),
            setQuoteData: jest.fn(),
        };
        mockCalculationService = {
            calculateAndSum: jest.fn(),
        };
        mockUiService = {
            getState: jest.fn(),
            setActiveCell: jest.fn(),
            clearMultiSelectSelection: jest.fn(),
            setSumOutdated: jest.fn(),
        };
        mockEventAggregator = {
            publish: jest.fn(),
        };
        mockFocusService = {
            focusAfterDelete: jest.fn(),
        };
        // [FIX] Create a proper mock for productFactory with the required method.
        mockProductFactory = {
            getProductStrategy: jest.fn(),
        };

        // Arrange: Instantiate the view with all its dependencies mocked.
        quickQuoteView = new QuickQuoteView({
            quoteService: mockQuoteService,
            calculationService: mockCalculationService,
            uiService: mockUiService,
            eventAggregator: mockEventAggregator,
            focusService: mockFocusService,
            productFactory: mockProductFactory, // [FIX] Pass the new mock
            // These are not used in the tested methods but are required by the constructor.
            fileService: {},
            configManager: {},
            publishStateChangeCallback: jest.fn(),
        });
    });

    describe('handleInsertRow', () => {
        it('should call quoteService.insertRow and uiService.setActiveCell when a valid row is selected', () => {
            // Arrange: Simulate a state where a single, valid row is selected.
            mockUiService.getState.mockReturnValue({ multiSelectSelectedIndexes: [0] });
            mockQuoteService.getItems.mockReturnValue([
                { width: 100, height: 100 }, // Row 0
                { width: 200, height: 200 }, // Row 1
                { width: null, height: null } // Last empty row
            ]);
            mockQuoteService.insertRow.mockReturnValue(1); // Simulate that the new row is at index 1.

            // Act: Call the method under test.
            quickQuoteView.handleInsertRow();

            // Assert: Verify that the correct service methods were called with the correct arguments.
            expect(mockQuoteService.insertRow).toHaveBeenCalledWith(0);
            expect(mockUiService.setActiveCell).toHaveBeenCalledWith(1, 'width');
            expect(mockUiService.clearMultiSelectSelection).toHaveBeenCalled();
        });
    });

    describe('handleCalculateAndSum', () => {
        it('should set sum as not outdated when calculation is successful', () => {
            // Arrange: Mock a successful calculation result.
            const mockQuoteData = { some: 'data' };
            const mockSuccessResult = { updatedQuoteData: mockQuoteData, firstError: null };
            mockQuoteService.getQuoteData.mockReturnValue(mockQuoteData);
            mockCalculationService.calculateAndSum.mockReturnValue(mockSuccessResult);
            // [FIX] Ensure getProductStrategy returns a mock strategy object.
            mockProductFactory.getProductStrategy.mockReturnValue({});

            // Act: Call the method.
            quickQuoteView.handleCalculateAndSum();

            // Assert: Verify state is updated correctly for success.
            expect(mockQuoteService.setQuoteData).toHaveBeenCalledWith(mockQuoteData);
            expect(mockUiService.setSumOutdated).toHaveBeenCalledWith(false);
            expect(mockEventAggregator.publish).not.toHaveBeenCalledWith(EVENTS.SHOW_NOTIFICATION, expect.any(Object));
        });

        it('should set sum as outdated and show a notification when calculation fails', () => {
            // Arrange: Mock a failed calculation result.
            const mockQuoteData = { some: 'data' };
            const mockError = { message: 'Test Error', rowIndex: 1, column: 'width' };
            const mockErrorResult = { updatedQuoteData: mockQuoteData, firstError: mockError };
            mockQuoteService.getQuoteData.mockReturnValue(mockQuoteData);
            mockCalculationService.calculateAndSum.mockReturnValue(mockErrorResult);
            // [FIX] Ensure getProductStrategy returns a mock strategy object.
            mockProductFactory.getProductStrategy.mockReturnValue({});

            // Act: Call the method.
            quickQuoteView.handleCalculateAndSum();

            // Assert: Verify state is updated correctly for failure.
            expect(mockQuoteService.setQuoteData).toHaveBeenCalledWith(mockQuoteData);
            expect(mockUiService.setSumOutdated).toHaveBeenCalledWith(true);
            expect(mockEventAggregator.publish).toHaveBeenCalledWith(EVENTS.SHOW_NOTIFICATION, { message: 'Test Error', type: 'error' });
            expect(mockUiService.setActiveCell).toHaveBeenCalledWith(1, 'width');
        });
    });
});
--- FILE END ---

--- FILE START: 04-core-code/utils/csv-parser.js ---
// /04-core-code/utils/csv-parser.js

/**
 * @fileoverview Utility functions for parsing and stringifying CSV data.
 */

/**
 * Converts the application's quote data object into a comprehensive CSV formatted string,
 * including all detailed item properties and LF status.
 * @param {object} quoteData The application's quote data.
 * @returns {string} A string in CSV format.
 */
export function dataToCsv(quoteData) {
    const currentProductKey = quoteData?.currentProduct;
    const productData = quoteData?.products?.[currentProductKey];
    const lfModifiedRowIndexes = quoteData?.uiMetadata?.lfModifiedRowIndexes || [];

    if (!productData || !productData.items) return "";

    const headers = [
        '#', 'Width', 'Height', 'Type', 'Price', 
        'Location', 'F-Name', 'F-Color', 'Over', 'O/I', 'L/R', 
        'Dual', 'Chain', 'Winder', 'Motor', 'IsLF'
    ];
    
    const rows = productData.items.map((item, index) => {
        if (item.width || item.height) {
            const rowData = [
                index + 1,
                item.width || '',
                item.height || '',
                item.fabricType || '',
                item.linePrice !== null ? item.linePrice.toFixed(2) : '',
                item.location || '',
                item.fabric || '',
                item.color || '',
                item.over || '',
                item.oi || '',
                item.lr || '',
                item.dual || '',
                item.chain || '',
                item.winder || '',
                item.motor || '',
                lfModifiedRowIndexes.includes(index) ? 1 : 0
            ];
            return rowData.map(value => {
                const strValue = String(value);
                if (strValue.includes(',')) {
                    return `"${strValue}"`;
                }
                return strValue;
            }).join(',');
        }
        return null;
    }).filter(row => row !== null);

    const totalSum = productData.summary ? productData.summary.totalSum : null;
    let summaryRow = '';
    if (typeof totalSum === 'number') {
        summaryRow = `\n\nTotal,,,,${totalSum.toFixed(2)}`;
    }

    return [headers.join(','), ...rows].join('\n') + summaryRow;
}


/**
 * Converts a CSV formatted string into an object containing item objects and LF indexes.
 * This function is "pure" and has no external dependencies.
 * @param {string} csvString The string containing CSV data.
 * @returns {{items: Array<object>, lfIndexes: Array<number>}|null} An object with items and their LF status, or null if parsing fails.
 */
export function csvToData(csvString) {
    try {
        const lines = csvString.trim().split('\n');
        const headerIndex = lines.findIndex(line => line.trim() !== '');
        if (headerIndex === -1) return null;

        const dataLines = lines.slice(headerIndex + 1);

        const items = [];
        const lfIndexes = [];
        for (const line of dataLines) {
            const trimmedLine = line.trim();
            if (!trimmedLine || trimmedLine.toLowerCase().startsWith('total')) {
                continue;
            }
            
            const values = trimmedLine.split(',');

            const item = {
                itemId: `item-${Date.now()}-${items.length}`,
                width: parseInt(values[1], 10) || null,
                height: parseInt(values[2], 10) || null,
                fabricType: values[3] || null,
                linePrice: parseFloat(values[4]) || null,
                location: values[5] || '',
                fabric: values[6] || '',
                color: values[7] || '',
                over: values[8] || '',
                oi: values[9] || '',
                lr: values[10] || '',
                dual: values[11] || '',
                chain: parseInt(values[12], 10) || null,
                winder: values[13] || '',
                motor: values[14] || ''
            };
            items.push(item);
            
            const isLf = parseInt(values[15], 10) === 1;
            if (isLf) {
                lfIndexes.push(items.length - 1);
            }
        }

        return { items, lfIndexes };

    } catch (error) {
        console.error("Failed to parse CSV string:", error);
        return null;
    }
}
--- FILE END ---

